"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7458],{77458:(Le,G,l)=>{l.r(G),l.d(G,{default:()=>Ve});var f=l(10467),e=l(54438),V=l(74710),h=l(60177),s=l(89417),L=l(82765),j=l(86600),R=l(25084),F=l(75351),_=l(53719),k=l(99213),g=l(59042),S=l(59115),T=l(96695),D=l(82798),E=l(2042),p=l(9159),A=l(21413),x=l(88834),X=l(40171),B=l(44549),y=l(3366),P=l(10801),C=l(45794);let O=(()=>{class n{constructor(t,o){this._apiService=t,this._toastService=o,this._data=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isNotFound=(0,e.vPA)(!1)}Update(t){this._data.set(t)}fetchData(){var t=this;return(0,f.A)(function*(){t.isLoading.set(!0),t._apiService.get("api/V1/tickets/handover").then(function(){var o=(0,f.A)(function*(a){t.isLoading.set(!1),t.isNotFound.set(!1),t._data.set(a.data),null!==a.data||t.isNotFound.set(!0)});return function(a){return o.apply(this,arguments)}}()).catch(function(){var o=(0,f.A)(function*(a){t.isLoading.set(!1),t.isNotFound.set(!0),t._toastService.error("Failed to fetch data","Error")});return function(a){return o.apply(this,arguments)}}())})()}static{this.\u0275fac=function(o){return new(o||n)(e.KVO(y.G),e.KVO(C.tw))}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();const N=()=>({disableClose:!0}),U=()=>[5,10,20],J=(n,r,t)=>({"bg-blue-500":n,"bg-yellow-500":r,"bg-green-500":t}),M=(n,r,t,o)=>({"text-green-600":n,"text-blue-600":r,"text-yellow-600":t,"text-red-600":o}),W=n=>["/dashboards/tickets",n];function Q(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-checkbox",34),e.mxI("ngModelChange",function(a){const i=e.eBV(t).$implicit;return e.DH7(i.checked,a)||(i.checked=a),e.Njj(a)}),e.bIt("click",function(a){return e.eBV(t),e.Njj(a.stopPropagation())})("change",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.applyProductsFilter())}),e.EFF(1),e.k0s()}if(2&n){const t=r.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.SpI(" ",t.name," ")}}function z(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-checkbox",35),e.mxI("ngModelChange",function(a){const i=e.eBV(t).$implicit;return e.DH7(i.checked,a)||(i.checked=a),e.Njj(a)}),e.bIt("click",function(a){return e.eBV(t),e.Njj(a.stopPropagation())})("change",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.applyCategoryFilter())}),e.EFF(1),e.k0s()}if(2&n){const t=r.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.JRh(t.name)}}function Z(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-checkbox",34),e.mxI("ngModelChange",function(a){const i=e.eBV(t).$implicit;return e.DH7(i.checked,a)||(i.checked=a),e.Njj(a)}),e.bIt("click",function(a){return e.eBV(t),e.Njj(a.stopPropagation())})("change",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.applyStatusFilter())}),e.j41(1,"div",36)(2,"h1",37),e.EFF(3),e.k0s()()()}if(2&n){const t=r.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.Y8G("ngClass",e.sMw(3,J,"New"===t.name,"On Progress"===t.name,"Resolved"===t.name)),e.R7$(2),e.JRh(t.name)}}function K(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-checkbox",34),e.mxI("ngModelChange",function(a){const i=e.eBV(t).$implicit;return e.DH7(i.checked,a)||(i.checked=a),e.Njj(a)}),e.bIt("click",function(a){return e.eBV(t),e.Njj(a.stopPropagation())})("change",function(){e.eBV(t);const a=e.XpG();return e.Njj(a.applyPriorityFilter())}),e.j41(1,"div",16),e.nrm(2,"mat-icon",38),e.j41(3,"h1",39),e.EFF(4),e.k0s()()()}if(2&n){const t=r.$implicit;e.R50("ngModel",t.checked),e.R7$(2),e.Y8G("ngClass",e.ziG(3,M,"Low"===t.name,"Hedium"===t.name,"High"===t.name,"Critical"===t.name)),e.R7$(2),e.JRh(t.name)}}function q(n,r){1&n&&(e.j41(0,"div",40),e.nrm(1,"div",41)(2,"div",41)(3,"div",41)(4,"div",41)(5,"div",41)(6,"div",41)(7,"div",42),e.k0s())}function ee(n,r){1&n&&(e.j41(0,"div")(1,"div",43),e.nrm(2,"img",44)(3,"br"),e.j41(4,"p",45),e.EFF(5,"Data Not Found"),e.k0s(),e.j41(6,"p",46),e.EFF(7,"try using a different keyword or add a new tickets"),e.k0s()()())}function te(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Tracking ID "),e.k0s())}function ae(n,r){if(1&n&&(e.j41(0,"mat-cell",69)(1,"a",70),e.EFF(2),e.k0s()()),2&n){const t=r.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(2,W,t.tracking_id)),e.R7$(),e.JRh(t.tracking_id)}}function ne(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Date "),e.k0s())}function oe(n,r){if(1&n&&(e.j41(0,"mat-cell"),e.EFF(1),e.nrm(2,"br"),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.SpI(" ",null==t.created_at?null:t.created_at.split(" ")[0]," ")}}function re(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Time "),e.k0s())}function ie(n,r){if(1&n&&(e.j41(0,"mat-cell",16),e.nrm(1,"mat-icon",71),e.EFF(2),e.nrm(3,"br"),e.k0s()),2&n){const t=r.$implicit;e.R7$(2),e.SpI(" ",null==t.created_at?null:t.created_at.split(" ")[1]," ")}}function se(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Category "),e.k0s())}function le(n,r){if(1&n&&(e.j41(0,"mat-cell",72),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.SpI(" ",t.category_name," ")}}function ce(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Name "),e.k0s())}function me(n,r){1&n&&(e.j41(0,"div",40),e.nrm(1,"div",41),e.k0s())}function de(n,r){if(1&n&&(e.j41(0,"mat-cell",73)(1,"div",74),e.nrm(2,"img",75),e.j41(3,"p",37),e.EFF(4),e.k0s()()()),2&n){const t=r.$implicit;e.R7$(2),e.Y8G("src",t.avatar,e.B4B),e.R7$(2),e.JRh(t.user_name)}}function ue(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Shift Created "),e.k0s())}function pe(n,r){if(1&n&&(e.j41(0,"mat-cell",72),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.Lme(" ",t.shifts_id," (",t.shift_name,") ")}}function fe(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," PIC "),e.k0s())}function he(n,r){if(1&n&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.SpI(" ",""==(null==t?null:t.PIC)||null==(null==t?null:t.PIC)?"Not Found":t.PIC," ")}}function _e(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Subject "),e.k0s())}function ge(n,r){if(1&n&&(e.j41(0,"mat-cell",76),e.EFF(1),e.k0s()),2&n){const t=r.$implicit;e.R7$(),e.SpI(" ",t.subject," ")}}function ve(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Whatsapp Client "),e.k0s())}function be(n,r){if(1&n&&(e.j41(0,"mat-cell")(1,"a",77),e.EFF(2),e.k0s()()),2&n){const t=r.$implicit;e.R7$(),e.Y8G("href","https://wa.me/"+(null==t?null:t.no_whatsapp),e.B4B),e.R7$(),e.SpI(" ",""===(null==t?null:t.no_whatsapp)?"Not Found":t.no_whatsapp," ")}}function Fe(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Status "),e.k0s())}function ke(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-option",82),e.bIt("click",function(){const a=e.eBV(t).$implicit,i=e.XpG().$implicit,d=e.XpG(2);return e.Njj(d.changeStatus(i.tracking_id,a))}),e.EFF(1),e.k0s()}if(2&n){const t=r.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function xe(n,r){if(1&n){const t=e.RV6();e.j41(0,"mat-cell",78)(1,"mat-form-field",79)(2,"mat-select",80),e.mxI("valueChange",function(a){const i=e.eBV(t).$implicit;return e.DH7(i.status,a)||(i.status=a),e.Njj(a)}),e.DNE(3,ke,2,2,"mat-option",81),e.k0s()()()}if(2&n){const t=r.$implicit,o=e.XpG(2);e.R7$(2),e.R50("value",t.status),e.Y8G("disabled","Resolved"===t.status||o.shiftStatus&&!o.isAdmin),e.R7$(),e.Y8G("ngForOf",o.statusList)}}function ye(n,r){1&n&&(e.j41(0,"mat-header-cell"),e.EFF(1," Priority "),e.k0s())}function Ce(n,r){if(1&n&&(e.j41(0,"mat-cell",16),e.nrm(1,"mat-icon",38),e.j41(2,"h1",39),e.EFF(3),e.k0s()()),2&n){const t=r.$implicit;e.R7$(),e.Y8G("ngClass",e.ziG(2,M,"Low"===t.priority,"Medium"===t.priority,"High"===t.priority,"Critical"===t.priority)),e.R7$(2),e.JRh(t.priority)}}function we(n,r){1&n&&e.nrm(0,"mat-header-row")}function je(n,r){1&n&&e.nrm(0,"mat-row")}function Se(n,r){if(1&n&&(e.j41(0,"mat-table",47,6)(2,"div"),e.qex(3,48),e.DNE(4,te,2,0,"mat-header-cell",49)(5,ae,3,4,"mat-cell",50),e.bVm(),e.qex(6,51),e.DNE(7,ne,2,0,"mat-header-cell",49)(8,oe,3,1,"mat-cell",52),e.bVm(),e.qex(9,53),e.DNE(10,re,2,0,"mat-header-cell",49)(11,ie,4,1,"mat-cell",54),e.bVm(),e.qex(12,55),e.DNE(13,se,2,0,"mat-header-cell",49)(14,le,2,1,"mat-cell",56),e.bVm(),e.qex(15,57),e.DNE(16,ce,2,0,"mat-header-cell",49)(17,me,2,0,"div",29)(18,de,5,2,"mat-cell",58),e.bVm(),e.qex(19,59),e.DNE(20,ue,2,0,"mat-header-cell",49)(21,pe,2,2,"mat-cell",56),e.bVm(),e.qex(22,60),e.DNE(23,fe,2,0,"mat-header-cell",49)(24,he,2,1,"mat-cell",52),e.bVm(),e.qex(25,61),e.DNE(26,_e,2,0,"mat-header-cell",49)(27,ge,2,1,"mat-cell",62),e.bVm(),e.qex(28,63),e.DNE(29,ve,2,0,"mat-header-cell",49)(30,be,3,2,"mat-cell",52),e.bVm(),e.qex(31,64),e.DNE(32,Fe,2,0,"mat-header-cell",49)(33,xe,4,3,"mat-cell",65),e.bVm(),e.qex(34,66),e.DNE(35,ye,2,0,"mat-header-cell",49)(36,Ce,4,7,"mat-cell",54),e.bVm(),e.DNE(37,we,1,0,"mat-header-row",67)(38,je,1,0,"mat-row",68),e.k0s()()),2&n){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(17),e.Y8G("ngIf",t.isLoading),e.R7$(20),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}const H=new Date,De=H.getMonth(),Ne=H.getFullYear();H.getDay();let Re=(()=>{class n{constructor(t,o,a,i,d){this._apiService=t,this.cdr=o,this._ticketLogsService=a,this._handOversService=i,this._matDialog=d,this.filterValues={search:"",category:[],products:[],status:[],priority:[]},this.shiftStatus=!0,this.isAdmin="admin"===localStorage.getItem("userRole"),this.ticketStatus=!1,this.statusList=["New","Hold","On Progress","Resolved"],this.productsItems=[],this.category=[],this.statusItems=[],this.priorityItems=[],this._unsubscribeAll=new A.B,this.displayedColumns=["tracking_id","name","shift_created","create_date","create_time","category","subject","pic","no_whatsapp","status","priority"],this.dataSource=new p.I6,this.range=new s.gE({start:new s.MJ(new Date(Ne,De-1)),end:new s.MJ(new Date)}),this.formatDate=m=>m?B.c9.fromJSDate(new Date(m)).toISODate():null,this.formatTime=m=>{const u=new Date(m);return`${u.getHours().toString().padStart(2,"0")}:${u.getMinutes().toString().padStart(2,"0")}`},(0,e.QZP)(()=>{this.dataSource.data=this.datas;const m=new Set,u=new Set,v=new Set,w=new Set;this.datas.forEach(c=>{c.products_name&&(Array.isArray(c.products_name)?c.products_name.forEach(b=>w.add(b)):w.add(c.products_name)),c.category_name&&(Array.isArray(c.category_name)?c.category_name.forEach(b=>m.add(b)):(m.add(c.category_name),u.add(c.status))),c.status&&(Array.isArray(c.status)?c.status.forEach(b=>u.add(b)):u.add(c.status)),c.priority&&(Array.isArray(c.priority)?c.priority.forEach(b=>b.add(b)):v.add(c.priority)),c.subject||(c.subject="Subject Not Found")}),this.statusItems=[...u].map(c=>({name:c,checked:!1})),this.category=[...m].map(c=>({name:c,checked:!1})),this.priorityItems=[...v].map(c=>({name:c,checked:!1})),this.productsItems=[...w].map(c=>({name:c,checked:!1}))})}get datas(){return this._handOversService._data()}get isLoading(){return this._handOversService.isLoading()}get isNotDataFound(){return this._handOversService.isNotFound()}ngOnInit(){this._handOversService.fetchData(),this.fetchUsers(),this.range.valueChanges.subscribe(({start:t,end:o})=>{o&&(t instanceof Date||new Date(t),o instanceof Date||new Date(o))})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generateReport(){this._matDialog.open(X.E,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}fetchUsers(){var t=this;return(0,f.A)(function*(){try{const o=yield t._apiService.get("api/V1/get-profile");t.shiftStatus="Active Shift"!==o.data.shift_status,t.cdr.detectChanges()}catch(o){throw o}})()}applyFilter(){this.dataSource.filterPredicate=(t,o)=>{let a=JSON.parse(o);console.log(t);let i=""===a.search||t.tracking_id.toLowerCase().includes(a.search)||t.products_name.toLowerCase().includes(a.search)||t.category_name.toLowerCase().includes(a.search)||t.subject.toLowerCase().includes(a.search)||t.status.toLowerCase().includes(a.search)||t.priority.toLowerCase().includes(a.search)||t.no_whatsapp.toLowerCase().includes(a.search)||t.user?.name.toLowerCase().includes(a.search)||t.last_replier?.name.toLowerCase().includes(a.search),d=0===a.category.length||a.category.includes(t.category_name.toLowerCase()),m=0===a.status.length||a.status.includes(t.status.toLowerCase()),u=0===a.priority.length||a.priority.includes(t.priority.toLowerCase()),v=0===a.products.length||a.products.includes(t.products_name.toLowerCase());return i&&d&&m&&u&&v},this.dataSource.filter=JSON.stringify(this.filterValues)}applySearchFilter(t){this.filterValues.search=t.trim().toLowerCase(),this.applyFilter()}applyProductsFilter(){this.filterValues.products=this.productsItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyCategoryFilter(){this.filterValues.category=this.category.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyStatusFilter(){this.filterValues.status=this.statusItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyPriorityFilter(){this.filterValues.priority=this.priorityItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}changeStatus(t,o){var a=this;return(0,f.A)(function*(){try{const{status:i}=yield a._apiService.post(`api/V1/ticket-status/${t}`,{status:o});if(200===i){const m=yield a._apiService.get("api/V1/tickets/handover");a._handOversService.Update(m.data)}}catch(i){throw i}})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(y.G),e.rXU(e.gRc),e.rXU(P.j),e.rXU(O),e.rXU(F.bZ))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-handovers"]],viewQuery:function(o,a){if(1&o&&(e.GBs(E.B4,5),e.GBs(T.iy,5)),2&o){let i;e.mGM(i=e.lsd())&&(a.sort=i.first),e.mGM(i=e.lsd())&&(a.paginator=i.first)}},standalone:!0,features:[e.aNF],decls:58,vars:24,consts:[["menu","matMenu"],["products","matMenu"],["categorys","matMenu"],["status","matMenu"],["priority","matMenu"],["paginator",""],["table",""],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","flex-col","items-start","lg:flex-row","sm:items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Tickets",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","border-[1px]","text-white",3,"matMenuTriggerFor"],["svgIcon","filter_alt"],[1,"max-sm:hidden","font-semibold","text-black"],["svgIcon","keyboard_arrow_down"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"min-w-[300px]"],[1,"px-5","py-3","w-full"],[1,"font-semibold","mb-2"],[1,"px-5","flex","flex-col","gap-2","w-full"],["class","h-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],["class","h-full w-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],[1,"px-5","py-3"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-[2180px]",3,"dataSource",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],[1,"h-full",3,"ngModelChange","click","change","ngModel"],[1,"h-full","w-full",3,"ngModelChange","click","change","ngModel"],[1,"px-3","py-1","text-white","whitespace-nowrap","rounded-full",3,"ngClass"],[1,"font-medium"],["svgIcon","mat_outline:bookmark",1,"-rotate-90",3,"ngClass"],[1,"font-medium","uppercase"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"text-lg","font-semibold"],[1,"text-sm"],["matSort","",1,"min-w-[2180px]",3,"dataSource"],["matColumnDef","tracking_id"],[4,"matHeaderCellDef"],["class","text-lg text-blue-600 font-medium underline whitespace-nowrap",4,"matCellDef"],["matColumnDef","create_date"],[4,"matCellDef"],["matColumnDef","create_time"],["class","flex items-center gap-3",4,"matCellDef"],["matColumnDef","category"],["class","flex items-center gap-3 font-medium",4,"matCellDef"],["matColumnDef","name"],["class","py-3.5 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","shift_created"],["matColumnDef","pic"],["matColumnDef","subject"],["class","font-bold text-lg",4,"matCellDef"],["matColumnDef","no_whatsapp"],["matColumnDef","status"],["class","py-4 w-full",4,"matCellDef"],["matColumnDef","priority"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","text-blue-600","font-medium","underline","whitespace-nowrap"],[3,"routerLink"],["svgIcon","mat_outline:access_time"],[1,"flex","items-center","gap-3","font-medium"],[1,"py-3.5","flex","items-center","gap-3","w-fit"],[1,"w-full","flex","items-center","gap-3"],["alt","",1,"w-7","h-7","object-cover","rounded-full",3,"src"],[1,"font-bold","text-lg"],["target","_blank",3,"href"],[1,"py-4","w-full"],["hideRequiredMarker","",1,"w-full"],["placeholder","Select",3,"valueChange","value","disabled"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value","click",4,"ngFor","ngForOf"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"click","value"]],template:function(o,a){if(1&o){const i=e.RV6();e.j41(0,"section",7)(1,"div",8)(2,"div",9)(3,"label",10),e.EFF(4,"Search"),e.k0s(),e.j41(5,"div",11)(6,"div",12),e.qSk(),e.j41(7,"svg",13),e.nrm(8,"path",14),e.k0s()(),e.joV(),e.j41(9,"input",15),e.bIt("keyup",function(m){return e.eBV(i),e.Njj(a.applySearchFilter(m.target.value))}),e.k0s()()(),e.j41(10,"div",16)(11,"button",17),e.nrm(12,"mat-icon",18),e.j41(13,"span",19),e.EFF(14,"Filter"),e.k0s(),e.nrm(15,"mat-icon",20),e.k0s(),e.j41(16,"mat-menu",null,0)(18,"button",21),e.EFF(19,"Products"),e.k0s(),e.j41(20,"button",21),e.EFF(21,"Category"),e.k0s(),e.j41(22,"button",21),e.EFF(23,"Status"),e.k0s(),e.j41(24,"button",21),e.EFF(25,"Priority"),e.k0s(),e.j41(26,"mat-menu",22,1)(28,"div",23)(29,"h1",24),e.EFF(30,"Choose Products"),e.k0s()(),e.j41(31,"div",25),e.DNE(32,Q,2,2,"mat-checkbox",26),e.k0s()(),e.j41(33,"mat-menu",22,2)(35,"div",23)(36,"h1",24),e.EFF(37,"Choose Category"),e.k0s()(),e.j41(38,"div",25),e.DNE(39,z,2,2,"mat-checkbox",27),e.k0s()(),e.j41(40,"mat-menu",null,3)(42,"div",28)(43,"h1",24),e.EFF(44,"Choose status"),e.k0s()(),e.DNE(45,Z,4,7,"mat-checkbox",26),e.k0s(),e.j41(46,"mat-menu",null,4)(48,"div",28)(49,"h1",24),e.EFF(50,"Choose Priority"),e.k0s()(),e.DNE(51,K,5,8,"mat-checkbox",26),e.k0s()()()(),e.DNE(52,q,8,0,"div",29)(53,ee,8,0,"div",30),e.j41(54,"div",31),e.DNE(55,Se,39,4,"mat-table",32),e.k0s(),e.nrm(56,"mat-paginator",33,5),e.k0s()}if(2&o){const i=e.sdS(17),d=e.sdS(27),m=e.sdS(34),u=e.sdS(41),v=e.sdS(47);e.R7$(11),e.Y8G("matMenuTriggerFor",i),e.R7$(7),e.Y8G("matMenuTriggerFor",d)("matMenuTriggerData",e.lJ4(19,N)),e.R7$(2),e.Y8G("matMenuTriggerFor",m)("matMenuTriggerData",e.lJ4(20,N)),e.R7$(2),e.Y8G("matMenuTriggerFor",u)("matMenuTriggerData",e.lJ4(21,N)),e.R7$(2),e.Y8G("matMenuTriggerFor",v)("matMenuTriggerData",e.lJ4(22,N)),e.R7$(8),e.Y8G("ngForOf",a.productsItems),e.R7$(7),e.Y8G("ngForOf",a.category),e.R7$(6),e.Y8G("ngForOf",a.statusItems),e.R7$(6),e.Y8G("ngForOf",a.priorityItems),e.R7$(),e.Y8G("ngIf",a.isLoading),e.R7$(),e.Y8G("ngIf",a.isNotDataFound&&!a.isLoading),e.R7$(2),e.Y8G("ngIf",!a.isNotDataFound&&!a.isLoading&&0!=a.dataSource.data.length),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(23,U))("showFirstLastButtons",!0)}},dependencies:[h.MD,h.YU,h.Sq,h.bT,T.Ou,T.iy,F.hM,p.tP,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,s.X1,s.BC,g.fS,g.fg,_.rl,E.NQ,E.B4,k.An,S.Cn,S.kk,S.fb,S.Cp,L.g7,L.So,s.YN,s.vS,_.RG,R.X6,D.Ve,D.VO,j.wT,j.Sy,x.Hl,V.Wk],styles:[".mat-mdc-form-field-subscript-wrapper{display:none!important}",".mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%] {\n        display: none;\n    }"]})}}return n})();var Y=l(5271),I=l(46601);let $=(()=>{class n{constructor(){this._apiService=(0,e.WQX)(y.G),this._toastService=(0,e.WQX)(C.tw),this._data=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isNotFound=(0,e.vPA)(!1)}fetchData(){var t=this;return(0,f.A)(function*(){t.isLoading.set(!0),t._apiService.get("api/V1/notes").then(function(){var o=(0,f.A)(function*(a){t.isLoading.set(!1),t.isNotFound.set(!1),t._data.set(a.data),null!==a.data&&0!=a.data.length||t.isNotFound.set(!0)});return function(a){return o.apply(this,arguments)}}()).catch(function(){var o=(0,f.A)(function*(a){t.isLoading.set(!1),t.isNotFound.set(!0),t._toastService.error("Failed to fetch data","Error")});return function(a){return o.apply(this,arguments)}}())})()}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Te=(()=>{class n{constructor(t,o,a,i,d,m,u){this._apiService=t,this.fb=o,this.toast=a,this.fuseConfirmationService=i,this._handoverService=d,this.dialogRef=m,this.data=u,this.isLoading=!1}ngOnInit(){this.notesForm=this.fb.group({title:[null],content:[null]})}onSubmit(){var t=this;return(0,f.A)(function*(){if(t.notesForm.invalid)t.toast.warning("Please Fill All Form","Warning");else try{t.isLoading=!0;const{status:a}=yield t._apiService.post("api/V1/notes",{title:t.notesForm.value.title,content:t.notesForm.value.content});if(201===a)return t.toast.success("Success Create Notes","Success"),t._handoverService.fetchData(),t.dialogRef.close(),void(t.isLoading=!1);if(500===a)return t.toast.error("Internal Server Error","Failed"),t.dialogRef.close(),void(t.isLoading=!1);409===a&&(t.isLoading=!1,t.fuseConfirmationService.open({title:"Notification",message:"The Products already exists on the server. Would you like to create another Products time anyway?",icon:{color:"info"},actions:{confirm:{label:"Confirmation",color:"primary"}}}))}catch(o){throw o}})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(y.G),e.rXU(s.ok),e.rXU(C.tw),e.rXU(I.G),e.rXU($),e.rXU(F.CP),e.rXU(F.Vh))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-form-add-notes"]],standalone:!0,features:[e.aNF],decls:20,vars:3,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","sm:flex-row","items-start","sm:items-center","w-full","justify-between"],[1,"mb-2","text-xl","font-semibold","sm:mb-0"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Submitting Form...","spinner","circular",3,"isOpen"],[1,"bg-yellow-100","border-l-4","border-yellow-500","rounded-md","shadow-md","p-4","mx-4","mb-4"],[1,"flex","flex-col","gap-6",3,"formGroup"],["floatLabel","always",1,"w-full"],["formControlName","title","matInput","",3,"placeholder"],["matInput","","formControlName","content","rows","4","placeholder","Your Content"],["type","submit",1,"bg-yellow-500","hover:bg-yellow-600","text-white","p-2","rounded-md",3,"click"]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4,"Add Notes"),e.k0s()(),e.j41(5,"a",4),e.bIt("click",function(){return a.dialogRef.close()}),e.nrm(6,"mat-icon",5),e.k0s()(),e.nrm(7,"ion-loading",6),e.j41(8,"div",7)(9,"form",8)(10,"mat-form-field",9)(11,"mat-label"),e.EFF(12,"Title"),e.k0s(),e.nrm(13,"input",10),e.k0s(),e.j41(14,"mat-form-field",9)(15,"mat-label"),e.EFF(16,"Content"),e.k0s(),e.nrm(17,"textarea",11),e.k0s(),e.j41(18,"button",12),e.bIt("click",function(){return a.onSubmit()}),e.EFF(19," Add Notes "),e.k0s()()()()),2&o&&(e.R7$(7),e.Y8G("isOpen",a.isLoading),e.R7$(2),e.Y8G("formGroup",a.notesForm),e.R7$(4),e.Y8G("placeholder","Title"))},dependencies:[s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,s.YN,_.RG,_.rl,_.nJ,g.fS,g.fg,x.Hl,k.m_,k.An,Y.rQ,R.X6,j.Sy,D.Ve,h.MD],encapsulation:2})}}return n})(),Ee=(()=>{class n{constructor(t,o,a,i,d,m,u){this._apiService=t,this.fb=o,this.toast=a,this.fuseConfirmationService=i,this._handoverService=d,this.dialogRef=m,this.data=u,this.isLoading=!1,this.notes=u}ngOnInit(){this.notesForm=this.fb.group({title:[null],content:[null]}),this.notesForm.patchValue({title:this.notes.title,content:this.notes.content})}onSubmit(){var t=this;return(0,f.A)(function*(){if(t.notesForm.invalid)t.toast.warning("Please Fill All Form","Warning");else try{t.isLoading=!0;const{status:a}=yield t._apiService.post(`api/V1/notes/${t.notes.id}`,{title:t.notesForm.value.title,content:t.notesForm.value.content});if(200===a)return t.toast.success("Success Update Notes","Success"),t._handoverService.fetchData(),t.dialogRef.close(),void(t.isLoading=!1);if(500===a)return t.toast.error("Internal Server Error","Failed"),t.dialogRef.close(),void(t.isLoading=!1);409===a&&(t.isLoading=!1,t.fuseConfirmationService.open({title:"Notification",message:"The Products already exists on the server. Would you like to create another Products time anyway?",icon:{color:"info"},actions:{confirm:{label:"Confirmation",color:"primary"}}}))}catch(o){throw o}})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU(y.G),e.rXU(s.ok),e.rXU(C.tw),e.rXU(I.G),e.rXU($),e.rXU(F.CP),e.rXU(F.Vh))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-form-edit-notes"]],standalone:!0,features:[e.aNF],decls:20,vars:3,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","sm:flex-row","items-start","sm:items-center","w-full","justify-between"],[1,"mb-2","text-xl","font-semibold","sm:mb-0"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Submitting Form...","spinner","circular",3,"isOpen"],[1,"bg-yellow-100","border-l-4","border-yellow-500","rounded-md","shadow-md","p-4","mx-6","mb-4"],[1,"flex","flex-col","gap-6",3,"formGroup"],["floatLabel","always",1,"w-full"],["formControlName","title","matInput","",3,"placeholder"],["matInput","","formControlName","content","rows","4","placeholder","Your Content"],["type","submit",1,"bg-yellow-500","hover:bg-yellow-600","text-white","p-2","rounded-md",3,"click"]],template:function(o,a){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4,"Edit Notes"),e.k0s()(),e.j41(5,"a",4),e.bIt("click",function(){return a.dialogRef.close()}),e.nrm(6,"mat-icon",5),e.k0s()(),e.nrm(7,"ion-loading",6),e.j41(8,"div",7)(9,"form",8)(10,"mat-form-field",9)(11,"mat-label"),e.EFF(12,"Title"),e.k0s(),e.nrm(13,"input",10),e.k0s(),e.j41(14,"mat-form-field",9)(15,"mat-label"),e.EFF(16,"Content"),e.k0s(),e.nrm(17,"textarea",11),e.k0s(),e.j41(18,"button",12),e.bIt("click",function(){return a.onSubmit()}),e.EFF(19," Edit Notes "),e.k0s()()()()),2&o&&(e.R7$(7),e.Y8G("isOpen",a.isLoading),e.R7$(2),e.Y8G("formGroup",a.notesForm),e.R7$(4),e.Y8G("placeholder","Title"))},dependencies:[s.X1,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,s.YN,_.RG,_.rl,_.nJ,g.fS,g.fg,x.Hl,k.m_,k.An,Y.rQ,R.X6,j.Sy,D.Ve,h.MD]})}}return n})();const He=()=>["/dashboards/home"];function Ie(n,r){1&n&&(e.j41(0,"div",23)(1,"mat-icon",24),e.EFF(2,"note_alt"),e.k0s(),e.j41(3,"p",25),e.EFF(4,"Tidak ada catatan ditemukan"),e.k0s(),e.j41(5,"p",26),e.EFF(6,"Coba gunakan kata kunci lain atau tambahkan catatan baru."),e.k0s()())}function $e(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",29),e.bIt("click",function(){const a=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.editNotes(a))}),e.j41(1,"h3",30),e.EFF(2),e.k0s(),e.j41(3,"p",31),e.EFF(4),e.k0s(),e.j41(5,"div",32)(6,"span",33),e.EFF(7),e.k0s(),e.j41(8,"span",33),e.EFF(9),e.k0s()(),e.j41(10,"button",34),e.bIt("click",function(){const a=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.handleDeleteNotes(a.id))}),e.j41(11,"mat-icon"),e.EFF(12,"close"),e.k0s()()()}if(2&n){const t=r.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.content),e.R7$(3),e.SpI("Ditulis oleh ",t.name,""),e.R7$(2),e.JRh(t.updated_at)}}function Ge(n,r){if(1&n&&(e.j41(0,"div",27),e.DNE(1,$e,13,4,"div",28),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.filteredData)}}const Ve=[{path:"",component:(()=>{class n{constructor(t,o,a,i,d){this._handoverService=t,this._apiService=o,this.fuseConfirmationService=a,this._matDialog=i,this._toastService=d,this.data=[],this.searchText="",this.filteredData=[],(0,e.QZP)(()=>{this.data=this._data,this.filteredData=this.data})}get _data(){return this._handoverService._data()}get isNotFound(){return this._handoverService.isNotFound()}ngOnInit(){this._handoverService.fetchData()}filterNotes(){const t=this.searchText.toLowerCase();this.filteredData=this.data.filter(o=>o.title.toLowerCase().includes(t)||o.content.toLowerCase().includes(t)||o.name.toLowerCase().includes(t))}addNotes(){this._matDialog.open(Te,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}editNotes(t){this._matDialog.open(Ee,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw",data:t})}handleDeleteNotes(t){this.fuseConfirmationService.open({title:"Confirmation Delete",message:"Are you sure want to delete this note ?",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this.deleteNotes(t)})}deleteNotes(t){var o=this;return(0,f.A)(function*(){try{const{status:i}=yield o._apiService.delete(`api/V1/notes/${t}`);return 200===i?(o._toastService.success("Success Delete Notes","Success"),void o._handoverService.fetchData()):void o._toastService.error("Failed Delete Notes","Failed")}catch(a){throw o._toastService.error("Failed Delete Notes","Failed"),a}})()}static{this.\u0275fac=function(o){return new(o||n)(e.rXU($),e.rXU(y.G),e.rXU(I.G),e.rXU(F.bZ),e.rXU(C.tw))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-handover"]],standalone:!0,features:[e.aNF],decls:37,vars:7,consts:[[1,"p-4","h-full","w-full"],[1,"px-1","pt-3","flex","justify-between","items-start","sm:items-center","flex-col","sm:flex-row","gap-5","sm:gap-0"],[1,"font-bold","text-lg","sm:text-3xl"],[1,"text-sm","sm:text-base"],[1,"text-sm","text-gray-600"],[1,"font-medium","text-gray-500","hover:cursor-pointer","hover:text-blue-400",3,"routerLink"],[1,"mx-2","text-gray-400"],[1,"font-semibold","text-blue-600","hover:text-blue-500"],[1,"px-1","pt-10","pb-3","flex","justify-between","items-start","sm:items-center","flex-col","sm:flex-row","gap-5","sm:gap-0"],[1,""],[1,"flex","items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","rounded-full","w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Notes",1,"block","w-full","p-4","ps-10","text-sm","rounded-full","text-gray-900","border","bg-white","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["mat-flat-button","",1,"ml-4","min-w-10","px-1","sm:px-4",3,"click","color"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","hidden","sm:inline-block"],["class","text-center py-10 text-gray-500",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-2 p-3",4,"ngIf"],[1,"text-center","py-10","text-gray-500"],[1,"text-5xl","mb-2"],[1,"text-lg","font-semibold"],[1,"text-sm"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4","mt-2","p-3"],["class","bg-yellow-100 border-l-4 border-yellow-500 p-4 hover:cursor-pointer rounded-md shadow-md relative",3,"click",4,"ngFor","ngForOf"],[1,"bg-yellow-100","border-l-4","border-yellow-500","p-4","hover:cursor-pointer","rounded-md","shadow-md","relative",3,"click"],[1,"text-md","font-semibold","text-gray-800"],[1,"text-sm","text-gray-600","mt-1"],[1,"mt-4","flex","justify-between","items-center"],[1,"text-xs","text-gray-500","italic"],["mat-icon-button","","aria-label","Delete note",1,"absolute","top-2","right-2","text-gray-500","hover:text-red-600",3,"click"]],template:function(o,a){1&o&&(e.j41(0,"main",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4,"Handover Tickets"),e.k0s(),e.j41(5,"p",3),e.EFF(6,"List of unresolved tickets pending handover to the next team."),e.k0s()(),e.j41(7,"div",4)(8,"span",5),e.EFF(9,"Home"),e.k0s(),e.j41(10,"span",6),e.EFF(11,"/"),e.k0s(),e.j41(12,"span",7),e.EFF(13,"Handover Tickets"),e.k0s()()(),e.nrm(14,"app-handovers"),e.j41(15,"div",8)(16,"div")(17,"h1",2),e.EFF(18,"List Task"),e.k0s(),e.j41(19,"p",3),e.EFF(20,"Review and manage all pending tasks assigned to your team."),e.k0s()()(),e.j41(21,"div",9)(22,"div",10)(23,"div",11)(24,"label",12),e.EFF(25,"Search"),e.k0s(),e.j41(26,"div",13)(27,"div",14),e.qSk(),e.j41(28,"svg",15),e.nrm(29,"path",16),e.k0s()(),e.joV(),e.j41(30,"input",17),e.mxI("ngModelChange",function(d){return e.DH7(a.searchText,d)||(a.searchText=d),d}),e.bIt("ngModelChange",function(){return a.filterNotes()}),e.k0s()()(),e.j41(31,"button",18),e.bIt("click",function(){return a.addNotes()}),e.nrm(32,"mat-icon",19),e.j41(33,"span",20),e.EFF(34,"New note"),e.k0s()()(),e.DNE(35,Ie,7,0,"div",21)(36,Ge,2,1,"div",22),e.k0s()()),2&o&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(6,He)),e.R7$(22),e.R50("ngModel",a.searchText),e.R7$(),e.Y8G("color","primary"),e.R7$(),e.Y8G("svgIcon","heroicons_solid:plus-circle"),e.R7$(3),e.Y8G("ngIf",a.isNotFound),e.R7$(),e.Y8G("ngIf",!a.isNotFound))},dependencies:[Re,V.Wk,k.m_,k.An,x.Hl,x.$z,x.iY,g.fS,g.fg,h.MD,h.Sq,h.bT,s.YN,s.me,s.BC,s.vS],encapsulation:2})}}return n})()}]}}]);