"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[789],{10789:(_,h,a)=>{a.r(h),a.d(h,{default:()=>Y});var f=a(10467),d=a(60177),r=a(89417),F=a(88834),k=a(86600),c=a(25084),p=a(53719),b=a(99213),g=a(59042),v=a(82798),u=a(76233),T=a(44549),y=a(89967),t=a(54438),C=a(3366),j=a(74710),I=a(75351),E=a(45794);const G=(o,l,e,i)=>({"text-green-600":o,"text-blue-600":l,"text-yellow-600":e,"text-red-600":i});function R(o,l){1&o&&t.EFF(0,"Ticket Information")}function S(o,l){if(1&o&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&o){const e=l.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function $(o,l){if(1&o&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&o){const e=l.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function N(o,l){if(1&o&&(t.j41(0,"mat-form-field",18)(1,"mat-label"),t.EFF(2,"Place (Optional)"),t.k0s(),t.j41(3,"mat-select",35),t.DNE(4,$,2,2,"mat-option",14),t.k0s()()),2&o){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.place)}}function w(o,l){if(1&o&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&o){const e=l.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.category_name," ")}}function x(o,l){if(1&o&&(t.j41(0,"mat-option",34),t.nrm(1,"mat-icon",36),t.EFF(2),t.k0s()),2&o){const e=l.$implicit;t.Y8G("value",e),t.R7$(),t.Y8G("ngClass",t.ziG(3,G,"low"===e.toLowerCase(),"medium"===e.toLowerCase(),"high"===e.toLowerCase(),"critical"===e.toLowerCase())),t.R7$(),t.SpI(" ",e," ")}}function D(o,l){1&o&&t.EFF(0,"Response Information")}const Y=[{path:"",component:(()=>{class o{constructor(e,i,s,n,m){this._apiService=e,this.fb=i,this.router=s,this._matDialog=n,this._toastService=m,this.products=[],this.category=[],this.priority=["Low","Medium","High"],this.place=[],this.disableInput=!0,this.isLoading=!1}ngOnInit(){var e=this;this.fetchDataProducts(),this.firstTicketForm=this.fb.group({products_name:["",r.k0.required],subject:[{value:"",disabled:this.disableInput},r.k0.required],places_id:[{value:null,disabled:this.disableInput}],category_id:[{value:0,disabled:this.disableInput},r.k0.required],detail_kendala:[{value:"",disabled:this.disableInput},r.k0.required],priority:[{value:"",disabled:this.disableInput},r.k0.required],hari_masuk:[{value:null,disabled:this.disableInput},r.k0.required],waktu_masuk:[{value:"",disabled:this.disableInput},r.k0.required],hari_respon:[{value:null,disabled:this.disableInput},r.k0.required],waktu_respon:[{value:"",disabled:this.disableInput},r.k0.required]}),this.secondTicketForm=this.fb.group({PIC:["",[]],no_whatsapp:["",[r.k0.required]],respon_diberikan:["",r.k0.required]}),this.firstTicketForm.get("products_name")?.valueChanges.subscribe(function(){var i=(0,f.A)(function*(s){if(s){const{data:n}=yield e._apiService.post("api/V1/get-data-form",{name:s});e.category=n.data.category,e.place=n.data.places,e.enableFields()}else e.disableFields()});return function(s){return i.apply(this,arguments)}}())}enableFields(){Object.keys(this.firstTicketForm.controls).forEach(e=>{"products_name"!==e&&this.firstTicketForm.get(e)?.enable()})}disableFields(){Object.keys(this.firstTicketForm.controls).forEach(e=>{"products_name"!==e&&this.firstTicketForm.get(e)?.disable()})}fetchDataProducts(){var e=this;return(0,f.A)(function*(){try{const i=yield e._apiService.get("api/V1/list-products");e.products=i.data}catch(i){throw i}})()}addProducts(){this._matDialog.open(y.H,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}onSubmit(){var e=this;return(0,f.A)(function*(){try{e.isLoading=!0;const i=m=>m?T.c9.fromJSDate(new Date(m)).toISODate():null,s={...e.firstTicketForm.value,...e.secondTicketForm.value,hari_masuk:i(e.firstTicketForm.value.hari_masuk),hari_respon:i(e.firstTicketForm.value.hari_respon),entry_day:i(e.firstTicketForm.value.entry_day),response_day:i(e.firstTicketForm.value.response_day),PIC:e.secondTicketForm.value.PIC,no_whatsapp:e.secondTicketForm.value.no_whatsapp};201===(yield e._apiService.post("api/V1/tickets",s)).status&&(e.router.navigateByUrl("/dashboards/tickets"),e.firstTicketForm.disable(),e.firstTicketForm.reset(),e.secondTicketForm.disable(),e.secondTicketForm.reset())}catch{e._toastService.error("Failed to submit ticket","Error")}finally{e.isLoading=!1}})()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(C.G),t.rXU(r.ok),t.rXU(j.Ix),t.rXU(I.bZ),t.rXU(E.tw))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-form-add-tickets"]],standalone:!0,features:[t.aNF],decls:78,vars:16,consts:[["stepper","matHorizontalStepper"],["picker",""],["pickers",""],[1,"flex","justify-center","bg-[url('/assets/images/cards/moon.jpg')]","bg-center","bg-cover","w-full","py-0","sm:py-20"],[1,"bg-white","shadow-xl","w-full","mx-5","md:mx-40","h-fit","p-5","sm:rounded"],[1,"self-start","text-lg","font-semibold","uppercase"],[1,"text-sm","opacity-60","font-medium"],[3,"linear"],[3,"stepControl"],[1,"mt-8","w-full",3,"formGroup"],["matStepLabel",""],["action","",1,"mt-2.5","flex","flex-col"],["hideRequiredMarker","",1,"w-full"],["formControlName","products_name","placeholder","Select Products"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value",4,"ngFor","ngForOf"],["floatLabel","always",1,"w-full"],["formControlName","subject","matInput","",3,"placeholder"],["class","w-full",4,"ngIf"],[1,"w-full"],["formControlName","category_id"],["floatLabel","always",1,"w-full","mb-2"],["formControlName","detail_kendala","matInput","","rows","4","cols","50","placeholder","Problem Detail"],["formControlName","priority","placeholder","Select Priority"],[1,"example-full-width"],["formControlName","hari_masuk","matInput","","placeholder","Choose a date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["formControlName","waktu_masuk","matInput","","type","time"],["formControlName","hari_respon","matInput","","placeholder","Choose a date",3,"matDatepicker"],["formControlName","waktu_respon","matInput","","type","time"],["mat-raised-button","",1,"bg-blue-500","w-full","rounded-full","p-3","text-white","font-semibold",3,"click"],["formControlName","PIC","matInput","",3,"placeholder"],["formControlName","no_whatsapp","matInput","",3,"placeholder"],["formControlName","respon_diberikan","matInput","","rows","4","cols","50","placeholder","Response Admin"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"value"],["formControlName","places_id"],["svgIcon","mat_outline:bookmark",1,"-rotate-90",3,"ngClass"]],template:function(i,s){if(1&i){const n=t.RV6();t.j41(0,"main",3)(1,"div",4)(2,"h1",5),t.EFF(3,"Form Add Ticketing"),t.k0s(),t.j41(4,"h3",6),t.EFF(5,"Add Tickets"),t.k0s(),t.j41(6,"mat-horizontal-stepper",7,0)(8,"mat-step",8)(9,"form",9),t.DNE(10,R,1,0,"ng-template",10),t.j41(11,"div",11)(12,"mat-form-field",12)(13,"mat-label"),t.EFF(14,"Products"),t.k0s(),t.j41(15,"mat-select",13),t.DNE(16,S,2,2,"mat-option",14),t.k0s()(),t.j41(17,"mat-form-field",15)(18,"mat-label"),t.EFF(19,"Subject Judul"),t.k0s(),t.nrm(20,"input",16),t.k0s(),t.DNE(21,N,5,1,"mat-form-field",17),t.j41(22,"mat-form-field",18)(23,"mat-label"),t.EFF(24,"Category"),t.k0s(),t.j41(25,"mat-select",19),t.DNE(26,w,2,2,"mat-option",14),t.k0s()(),t.j41(27,"mat-form-field",20)(28,"mat-label"),t.EFF(29,"Problem Detail"),t.k0s(),t.nrm(30,"textarea",21),t.k0s(),t.j41(31,"mat-form-field",12)(32,"mat-label"),t.EFF(33,"Priority"),t.k0s(),t.j41(34,"mat-select",22),t.DNE(35,x,3,8,"mat-option",14),t.k0s()(),t.j41(36,"mat-form-field",23)(37,"mat-label"),t.EFF(38,"Ticket Entry day"),t.k0s(),t.nrm(39,"input",24)(40,"mat-datepicker-toggle",25)(41,"mat-datepicker",26,1),t.k0s(),t.j41(43,"mat-form-field",23)(44,"mat-label"),t.EFF(45,"Ticket Entry Time"),t.k0s(),t.nrm(46,"input",27),t.k0s(),t.j41(47,"mat-form-field",23)(48,"mat-label"),t.EFF(49,"Respon day"),t.k0s(),t.nrm(50,"input",28)(51,"mat-datepicker-toggle",25)(52,"mat-datepicker",26,2),t.k0s(),t.j41(54,"mat-form-field",23)(55,"mat-label"),t.EFF(56,"Respon Time"),t.k0s(),t.nrm(57,"input",29),t.k0s(),t.j41(58,"button",30),t.bIt("click",function(){t.eBV(n);const A=t.sdS(7);return t.Njj(A.next())}),t.EFF(59," Next "),t.k0s()()()(),t.j41(60,"mat-step",8)(61,"form",9),t.DNE(62,D,1,0,"ng-template",10),t.j41(63,"div",11)(64,"mat-form-field",15)(65,"mat-label"),t.EFF(66,"PIC"),t.k0s(),t.nrm(67,"input",31),t.k0s(),t.j41(68,"mat-form-field",15)(69,"mat-label"),t.EFF(70,"No Whatsapp Client"),t.k0s(),t.nrm(71,"input",32),t.k0s(),t.j41(72,"mat-form-field",20)(73,"mat-label"),t.EFF(74,"Response Admin"),t.k0s(),t.nrm(75,"textarea",33),t.k0s(),t.j41(76,"button",30),t.bIt("click",function(){return t.eBV(n),t.Njj(s.onSubmit())}),t.EFF(77," Submit "),t.k0s()()()()()()()}if(2&i){const n=t.sdS(42),m=t.sdS(53);t.R7$(6),t.Y8G("linear",!0),t.R7$(2),t.Y8G("stepControl",s.firstTicketForm),t.R7$(),t.Y8G("formGroup",s.firstTicketForm),t.R7$(7),t.Y8G("ngForOf",s.products),t.R7$(4),t.Y8G("placeholder","Subject Judul"),t.R7$(),t.Y8G("ngIf",0!==(null==s.place?null:s.place.length)),t.R7$(5),t.Y8G("ngForOf",s.category),t.R7$(9),t.Y8G("ngForOf",s.priority),t.R7$(4),t.Y8G("matDatepicker",n),t.R7$(),t.Y8G("for",n),t.R7$(10),t.Y8G("matDatepicker",m),t.R7$(),t.Y8G("for",m),t.R7$(9),t.Y8G("stepControl",null),t.R7$(),t.Y8G("formGroup",s.secondTicketForm),t.R7$(6),t.Y8G("placeholder","PIC"),t.R7$(4),t.Y8G("placeholder","No Whatsapp")}},dependencies:[p.RG,p.rl,p.nJ,p.yw,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,v.Ve,v.VO,k.wT,k.Sy,F.Hl,F.$z,g.fS,g.fg,c.X6,c.Vh,c.bZ,c.bU,u.aP,u.V5,u.Ti,u.M6,d.MD,d.YU,d.Sq,d.bT,b.m_,b.An,k.WX],encapsulation:2})}}return o})()}]}}]);