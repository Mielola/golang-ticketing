"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5237],{75237:(ie,S,n)=>{n.r(S),n.d(S,{default:()=>se});var d=n(10467),c=n(60177),e=n(54438),l=n(89417),g=n(88834),k=n(82765),v=n(86600),x=n(25084),p=n(75351),u=n(53719),_=n(99213),b=n(59042),y=n(59115),F=n(96695),U=n(82798),h=n(2042),m=n(9159),R=n(21413),D=n(5271),w=n(3366),C=n(45794),E=n(46601);let T=(()=>{class s{constructor(t,r){this._apiService=t,this._toastService=r,this._data=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isNotFound=(0,e.vPA)(!1)}Update(t){this._data.set(t)}fetchData(){var t=this;return(0,d.A)(function*(){t.isLoading.set(!0),t._apiService.get("api/V1/users").then(function(){var r=(0,d.A)(function*(a){t.isLoading.set(!1),t.isNotFound.set(!1),t._data.set(a.data),null!==a.data&&0!=a.data.length||t.isNotFound.set(!0)});return function(a){return r.apply(this,arguments)}}()).catch(function(){var r=(0,d.A)(function*(a){t.isLoading.set(!1),t.isNotFound.set(!0),t._toastService.error("Failed to fetch data","Error")});return function(a){return r.apply(this,arguments)}}())})()}static{this.\u0275fac=function(r){return new(r||s)(e.KVO(w.G),e.KVO(C.tw))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();function G(s,i){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Users Name is required "),e.k0s())}function N(s,i){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Email is required "),e.k0s())}function $(s,i){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Please enter a valid email address "),e.k0s())}function I(s,i){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Password is required "),e.k0s())}function A(s,i){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Password must be at least 6 characters long "),e.k0s())}function V(s,i){if(1&s&&(e.j41(0,"mat-option",17),e.EFF(1),e.k0s()),2&s){const t=i.$implicit;e.Y8G("value",t.name),e.R7$(),e.SpI(" ",t.name," ")}}let j=(()=>{class s{constructor(t,r,a,o,f,ae,re){this._apiService=t,this.fb=r,this.toast=a,this.fuseConfirmationService=o,this._usersTableService=f,this.dialogRef=ae,this.data=re,this.isLoading=!1}ngOnInit(){this.fetchRole(),this.usersForm=this.fb.group({name:[null,[l.k0.required]],email:[null,[l.k0.required,l.k0.email]],password:[null,[l.k0.required,l.k0.minLength(6)]],role:[null,[l.k0.required]]}),null!=this.data.id&&"edit"===this.data.mode&&this.getUsersById()}fetchRole(){var t=this;return(0,d.A)(function*(){const r=yield t._apiService.get("api/V1/role"),{data:a}=r;t.role=a})()}getUsersById(){var t=this;return(0,d.A)(function*(){try{const r=yield t._apiService.get(`api/V1/users/${t.data.id}`),{data:a}=r;t.usersForm.patchValue({name:a.Name,email:a.Email,password:a.Password})}catch(r){throw t.toast.error("Failed Get Users","Error"),r}})()}onSubmit(){var t=this;return(0,d.A)(function*(){if(t.usersForm.invalid)return void t.toast.warning("Please Fill All Form","Warning");let r="api/V1/register";"edit"===t.data.mode&&(r=`api/V1/users/${t.data.id}`);try{t.isLoading=!0;const{status:o}=yield t._apiService.post(r,t.usersForm.value);if(201===o)return t.toast.success("Success Create Users","Success"),t._usersTableService.fetchData(),t.dialogRef.close(),void(t.isLoading=!1);if(200===o)return t.toast.success("Success Update Users","Success"),t._usersTableService.fetchData(),t.dialogRef.close(),void(t.isLoading=!1);if(500===o)return t.toast.error("Internal Server Error","Failed"),t.dialogRef.close(),void(t.isLoading=!1);409===o&&(t.isLoading=!1,t.fuseConfirmationService.open({title:"Notification",message:"The Users already exists on the server. Would you like to create another Users time anyway?",icon:{color:"info"},actions:{confirm:{label:"Confirmation",color:"primary"}}}))}catch(a){throw a}})()}static{this.\u0275fac=function(r){return new(r||s)(e.rXU(w.G),e.rXU(l.ok),e.rXU(C.tw),e.rXU(E.G),e.rXU(T),e.rXU(p.CP),e.rXU(p.Vh))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-form-add-edit-users"]],standalone:!0,features:[e.aNF],decls:33,vars:13,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","sm:flex-row","items-start","sm:items-center","w-full","justify-between"],[1,"mb-2","text-xl","font-semibold","sm:mb-0"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","px-8","pt-2","pb-4","gap-1",3,"formGroup"],["floatLabel","always",1,"w-full"],["formControlName","name","matInput","",3,"placeholder"],[4,"ngIf"],["formControlName","email","matInput","","placeholder","Email"],["formControlName","password","matInput","",3,"placeholder"],["hideRequiredMarker","",1,"w-full"],["formControlName","role","placeholder","Select User Role"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value",4,"ngFor","ngForOf"],["type","submit",1,"text-white","p-2","rounded",3,"click","ngClass"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"value"]],template:function(r,a){1&r&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4),e.k0s()(),e.j41(5,"a",4),e.bIt("click",function(){return a.dialogRef.close()}),e.nrm(6,"mat-icon",5),e.k0s()(),e.nrm(7,"ion-loading",6),e.j41(8,"form",7)(9,"mat-form-field",8)(10,"mat-label"),e.EFF(11,"User Name"),e.k0s(),e.nrm(12,"input",9),e.DNE(13,G,2,0,"mat-error",10),e.k0s(),e.j41(14,"mat-form-field",8)(15,"mat-label"),e.EFF(16,"Email"),e.k0s(),e.nrm(17,"input",11),e.DNE(18,N,2,0,"mat-error",10)(19,$,2,0,"mat-error",10),e.k0s(),e.j41(20,"mat-form-field",8)(21,"mat-label"),e.EFF(22,"Password"),e.k0s(),e.nrm(23,"input",12),e.DNE(24,I,2,0,"mat-error",10)(25,A,2,0,"mat-error",10),e.k0s(),e.j41(26,"mat-form-field",13)(27,"mat-label"),e.EFF(28,"User Role"),e.k0s(),e.j41(29,"mat-select",14),e.DNE(30,V,2,2,"mat-option",15),e.k0s()(),e.j41(31,"button",16),e.bIt("click",function(){return a.onSubmit()}),e.EFF(32),e.k0s()()()),2&r&&(e.R7$(4),e.JRh("edit"===a.data.mode?"Edit Users":"Add Users"),e.R7$(3),e.Y8G("isOpen",a.isLoading),e.R7$(),e.Y8G("formGroup",a.usersForm),e.R7$(4),e.Y8G("placeholder","Users Name"),e.R7$(),e.Y8G("ngIf",a.usersForm.get("name").hasError("required")),e.R7$(5),e.Y8G("ngIf",a.usersForm.get("email").hasError("required")),e.R7$(),e.Y8G("ngIf",a.usersForm.get("email").hasError("email")),e.R7$(4),e.Y8G("placeholder","******"),e.R7$(),e.Y8G("ngIf",a.usersForm.get("password").hasError("required")),e.R7$(),e.Y8G("ngIf",a.usersForm.get("password").hasError("minlength")),e.R7$(5),e.Y8G("ngForOf",a.role),e.R7$(),e.Y8G("ngClass","edit"===a.data.mode?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"),e.R7$(),e.SpI(" ","edit"===a.data.mode?"Edit Users":"Add Users"," "))},dependencies:[l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,l.YN,u.RG,u.rl,u.nJ,u.TL,b.fS,b.fg,g.Hl,_.m_,_.An,D.rQ,x.X6,v.Sy,v.wT,U.Ve,U.VO,c.MD,c.YU,c.Sq,c.bT],encapsulation:2})}}return s})();const Y=()=>[5,10,20];function L(s,i){1&s&&(e.j41(0,"div",15),e.nrm(1,"div",16)(2,"div",16)(3,"div",16)(4,"div",16)(5,"div",16)(6,"div",16)(7,"div",17),e.k0s())}function X(s,i){1&s&&(e.j41(0,"div")(1,"div",18),e.nrm(2,"img",19),e.j41(3,"h1",20),e.EFF(4,"Data Not Found"),e.k0s()()())}function B(s,i){1&s&&(e.j41(0,"mat-header-cell"),e.EFF(1," Users "),e.k0s())}function O(s,i){1&s&&(e.j41(0,"div",15),e.nrm(1,"div",16),e.k0s())}function P(s,i){if(1&s&&(e.j41(0,"mat-cell",32)(1,"div",33),e.nrm(2,"img",34),e.j41(3,"div")(4,"p",9),e.EFF(5),e.k0s(),e.j41(6,"p",35),e.EFF(7),e.k0s()()()()),2&s){const t=i.$implicit;e.R7$(2),e.Y8G("src",t.avatar,e.B4B),e.R7$(3),e.JRh(t.name),e.R7$(2),e.JRh(t.email)}}function H(s,i){1&s&&(e.j41(0,"mat-header-cell"),e.EFF(1," Password "),e.k0s())}function M(s,i){if(1&s&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&s){const t=i.$implicit;e.R7$(),e.SpI(" ",t.password," ")}}function J(s,i){1&s&&(e.j41(0,"mat-header-cell"),e.EFF(1," Users Role "),e.k0s())}function W(s,i){if(1&s&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&s){const t=i.$implicit;e.R7$(),e.SpI(" ",t.role," ")}}function z(s,i){1&s&&(e.j41(0,"mat-header-cell",36),e.EFF(1," Action "),e.k0s())}function Q(s,i){if(1&s){const t=e.RV6();e.j41(0,"div",38)(1,"a",39),e.bIt("click",function(){e.eBV(t);const a=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.handleDeleteUsers(a.id,a.name))}),e.nrm(2,"mat-icon",40),e.k0s(),e.j41(3,"a",41),e.bIt("click",function(){e.eBV(t);const a=e.XpG().$implicit,o=e.XpG(2);return e.Njj(o.editUsers(a.id))}),e.nrm(4,"mat-icon",42),e.k0s()()}}function Z(s,i){if(1&s&&(e.j41(0,"mat-cell"),e.DNE(1,Q,5,0,"div",37),e.k0s()),2&s){const t=i.$implicit;e.R7$(),e.Y8G("ngIf","default-trial"!=t.name)}}function K(s,i){1&s&&e.nrm(0,"mat-header-row")}function q(s,i){1&s&&e.nrm(0,"mat-row")}function ee(s,i){if(1&s&&(e.j41(0,"mat-table",21,1)(2,"div"),e.qex(3,22),e.DNE(4,B,2,0,"mat-header-cell",23)(5,O,2,0,"div",10)(6,P,8,3,"mat-cell",24),e.bVm(),e.qex(7,25),e.DNE(8,H,2,0,"mat-header-cell",23)(9,M,2,1,"mat-cell",26),e.bVm(),e.qex(10,27),e.DNE(11,J,2,0,"mat-header-cell",23)(12,W,2,1,"mat-cell",26),e.bVm(),e.qex(13,28),e.DNE(14,z,2,0,"mat-header-cell",29)(15,Z,2,1,"mat-cell",26),e.bVm(),e.DNE(16,K,1,0,"mat-header-row",30)(17,q,1,0,"mat-row",31),e.k0s()()),2&s){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(5),e.Y8G("ngIf",t.isLoading),e.R7$(11),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}let te=(()=>{class s{constructor(t,r,a,o,f){this._apiService=t,this.fuseConfirmationService=r,this._usersService=a,this._matDialog=o,this._toastService=f,this.shiftStatus=!0,this.ticketStatus=!1,this._unsubscribeAll=new R.B,this.displayedColumns=["users","password","role","action"],this.dataSource=new m.I6,(0,e.QZP)(()=>{this.dataSource.data=this.datas})}get datas(){return this._usersService._data()}get isLoading(){return this._usersService.isLoading()}get isNotDataFound(){return this._usersService.isNotFound()}ngOnInit(){this._usersService.fetchData()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addUsers(){this._matDialog.open(j,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw",data:{id:null,mode:"add"}})}editUsers(t){this._matDialog.open(j,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw",data:{id:t,mode:"edit"}})}handleDeleteUsers(t,r){this.fuseConfirmationService.open({title:"Confirmation Delete",message:`Are you sure want to delete ${r}?`,actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this.deleteUsers(t)})}deleteUsers(t){var r=this;return(0,d.A)(function*(){try{const{status:o}=yield r._apiService.delete(`api/V1/users/${t}`);return 200===o?(r._toastService.success("Success Delete Users","Success"),void r._usersService.fetchData()):void r._toastService.error("Failed Delete Users","Failed")}catch(a){throw r._toastService.error("Failed Delete Users","Failed"),a}})()}static{this.\u0275fac=function(r){return new(r||s)(e.rXU(w.G),e.rXU(E.G),e.rXU(T),e.rXU(p.bZ),e.rXU(C.tw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-table-users"]],viewQuery:function(r,a){if(1&r&&(e.GBs(h.B4,5),e.GBs(F.iy,5)),2&r){let o;e.mGM(o=e.lsd())&&(a.sort=o.first),e.mGM(o=e.lsd())&&(a.paginator=o.first)}},standalone:!0,features:[e.aNF],decls:16,vars:7,consts:[["paginator",""],["table",""],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","items-start","flex-row","sm:items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],[1,"text-xl","font-semibold"],[1,"flex","items-center","gap-3"],["mat-raised-button","",1,"bg-blue-600","hover:bg-blue-700","text-white",3,"click"],["svgIcon","mat_outline:add",1,"text-white"],[1,"font-semibold"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-160",3,"dataSource",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-160",3,"dataSource"],["matColumnDef","users"],[4,"matHeaderCellDef"],["class","py-3.5 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","password"],[4,"matCellDef"],["matColumnDef","role"],["matColumnDef","action","n",""],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"py-3.5","flex","items-center","gap-3","w-fit"],[1,"w-full","flex","items-center","gap-3"],["alt","",1,"w-7","h-7","object-cover","rounded-full",3,"src"],[1,"font-medium"],["mat-sort-header",""],["class","flex items-center",4,"ngIf"],[1,"flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-blue-500","hover:bg-blue-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:pencil-square",1,"text-white",2,"transform","scale(0.7)"]],template:function(r,a){if(1&r){const o=e.RV6();e.j41(0,"section",2)(1,"div",3)(2,"div",4)(3,"h1",5),e.EFF(4,"Users"),e.k0s()(),e.j41(5,"div",6)(6,"button",7),e.bIt("click",function(){return e.eBV(o),e.Njj(a.addUsers())}),e.nrm(7,"mat-icon",8),e.j41(8,"span",9),e.EFF(9,"Add Users"),e.k0s()()()(),e.DNE(10,L,8,0,"div",10)(11,X,5,0,"div",11),e.j41(12,"div",12),e.DNE(13,ee,18,4,"mat-table",13),e.k0s(),e.nrm(14,"mat-paginator",14,0),e.k0s()}2&r&&(e.R7$(10),e.Y8G("ngIf",a.isLoading),e.R7$(),e.Y8G("ngIf",a.isNotDataFound&&!a.isLoading),e.R7$(2),e.Y8G("ngIf",!a.isNotDataFound&&!a.isLoading&&0!=a.dataSource.data.length),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(6,Y))("showFirstLastButtons",!0))},dependencies:[c.MD,c.bT,F.Ou,F.iy,p.hM,m.tP,m.Zl,m.tL,m.ji,m.cC,m.YV,m.iL,m.KS,m.$R,m.YZ,m.NB,l.X1,b.fS,h.NQ,h.B4,h.aE,_.An,y.Cn,k.g7,l.YN,u.RG,x.X6,U.Ve,v.Sy,g.Hl,g.$z],styles:[".mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%] {\n        display: none;\n    }"]})}}return s})();const se=[{path:"",component:(()=>{class s{static{this.\u0275fac=function(r){return new(r||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-users"]],standalone:!0,features:[e.aNF],decls:2,vars:0,consts:[[1,"p-4","h-full","w-full"]],template:function(r,a){1&r&&(e.j41(0,"main",0),e.nrm(1,"app-table-users"),e.k0s())},dependencies:[te]})}}return s})()}]}}]);