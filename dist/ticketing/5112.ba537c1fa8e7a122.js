"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5112],{85112:(A,D,r)=>{r.r(D),r.d(D,{default:()=>Tt});var F=r(74710),f=r(10467),e=r(54438),x=r(60177),d=r(89417),T=r(82765),w=r(75351),p=r(59042),h=r(59115),k=r(96695),m=r(2042),l=r(9159),C=r(99213),X=r(48807),B=r(46601),$=r(3366),Y=r(45794),N=r(35883),M=r(10801);const H=()=>[5,10,20];function W(a,o){1&a&&(e.j41(0,"div",18),e.nrm(1,"div",19)(2,"div",19)(3,"div",19)(4,"div",19)(5,"div",19)(6,"div",19)(7,"div",20),e.k0s())}function J(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Tracking ID "),e.k0s())}function K(a,o){if(1&a&&(e.j41(0,"mat-cell",36)(1,"a"),e.EFF(2),e.k0s()()),2&a){const t=o.$implicit;e.R7$(2),e.JRh(t.tracking_id)}}function z(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Category "),e.k0s())}function Q(a,o){if(1&a&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.category," ")}}function Z(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Products "),e.k0s())}function q(a,o){if(1&a&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.product," ")}}function ee(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Deleted By "),e.k0s())}function te(a,o){if(1&a&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.deleted_by," ")}}function ae(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Deleted at "),e.k0s())}function ie(a,o){if(1&a&&(e.j41(0,"mat-cell",38),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.deleted_at," ")}}function ne(a,o){1&a&&(e.j41(0,"mat-header-cell",39),e.EFF(1," Action "),e.k0s())}function oe(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",41)(1,"a",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.handleRestoreTickets(i.tracking_id))}),e.nrm(2,"mat-icon",43),e.k0s(),e.j41(3,"a",44),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.handleDeleteTempTicket(i.tracking_id))}),e.nrm(4,"mat-icon",45),e.k0s()()}}function se(a,o){if(1&a&&(e.j41(0,"mat-cell"),e.DNE(1,oe,5,0,"div",40),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("ngIf","default-trial"!=t.name)}}function re(a,o){1&a&&e.nrm(0,"mat-header-row")}function le(a,o){1&a&&e.nrm(0,"mat-row")}function ce(a,o){if(1&a&&(e.j41(0,"mat-table",21,1)(2,"div"),e.qex(3,22),e.DNE(4,J,2,0,"mat-header-cell",23)(5,K,3,1,"mat-cell",24),e.bVm(),e.qex(6,25),e.DNE(7,z,2,0,"mat-header-cell",23)(8,Q,2,1,"mat-cell",26),e.bVm(),e.qex(9,27),e.DNE(10,Z,2,0,"mat-header-cell",23)(11,q,2,1,"mat-cell",26),e.bVm(),e.qex(12,28),e.DNE(13,ee,2,0,"mat-header-cell",23)(14,te,2,1,"mat-cell",26),e.bVm(),e.qex(15,29),e.DNE(16,ae,2,0,"mat-header-cell",23)(17,ie,2,1,"mat-cell",30),e.bVm(),e.qex(18,31),e.DNE(19,ne,2,0,"mat-header-cell",32)(20,se,2,1,"mat-cell",33),e.bVm(),e.DNE(21,re,1,0,"mat-header-row",34)(22,le,1,0,"mat-row",35),e.k0s()()),2&a){const t=e.XpG(2);e.Y8G("dataSource",t.dataSource),e.R7$(21),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}function me(a,o){1&a&&(e.j41(0,"div",46)(1,"div",47),e.nrm(2,"img",48)(3,"br"),e.j41(4,"p",49),e.EFF(5,"Data Not Found"),e.k0s(),e.j41(6,"p",50),e.EFF(7,"try using a different keyword or add a new tickets"),e.k0s()()())}function _e(a,o){if(1&a){const t=e.RV6();e.j41(0,"section",3)(1,"div",4)(2,"h1",5),e.EFF(3,"Deleted Tickets"),e.k0s(),e.j41(4,"div",6)(5,"label",7),e.EFF(6,"Search"),e.k0s(),e.j41(7,"div",8)(8,"div",9),e.qSk(),e.j41(9,"svg",10),e.nrm(10,"path",11),e.k0s()(),e.joV(),e.j41(11,"input",12),e.bIt("keyup",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.applyFilter(i.target.value))}),e.k0s()()()(),e.DNE(12,W,8,0,"div",13),e.j41(13,"div",14),e.DNE(14,ce,23,3,"mat-table",15),e.k0s(),e.DNE(15,me,8,0,"div",16),e.nrm(16,"mat-paginator",17,0),e.k0s()}if(2&a){const t=e.XpG();e.R7$(12),e.Y8G("ngIf",t.isLoading),e.R7$(2),e.Y8G("ngIf",!t.isLoading),e.R7$(),e.Y8G("ngIf",t.isNotDataFound&&!t.isLoading),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(6,H))("showFirstLastButtons",!0)}}let de=(()=>{class a{constructor(t,n,i,s,_,g){this._tempTicketsService=t,this.fuseConfirmationService=n,this._apiService=i,this._toastService=s,this._ticketTableService=_,this._ticketLogsService=g,this.displayedColumns=["tracking_id","category","product","deleted_by","deleted_at","action"],this.dataSource=new l.I6,this.isAdmin="admin"===localStorage.getItem("userRole"),this._tempTicketsService.fetchData(),(0,e.QZP)(()=>{this.dataSource.data=this.dataTempTickets})}get isNotDataFound(){return this._tempTicketsService.isNotFound()}get isLoading(){return this._tempTicketsService.isLoading()}get dataTempTickets(){return this._tempTicketsService._data()}ngOnInit(){}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}applyFilter(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t}handleRestoreTickets(t){this.fuseConfirmationService.open({title:"Restore Confirmation",message:`Are you sure want to restore this ticket ${t}?`,icon:{show:!0,name:"restore",color:"primary"},actions:{confirm:{label:"Restore",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.restoreTickets(t)})}restoreTickets(t){var n=this;return(0,f.A)(function*(){try{const{status:s}=yield n._apiService.post(`api/V1/tickets/restore/${t}`,{});return 200===s?(n._toastService.success("Success Restore Ticket","Success"),n._tempTicketsService.fetchData(),n._ticketTableService.fetchData(),void n._ticketLogsService.fetchDatas()):void n._toastService.error("Failed Restore Ticket","Failed")}catch(i){throw n._toastService.error("Failed Restore Ticket","Failed"),i}})()}handleDeleteTempTicket(t){this.fuseConfirmationService.open({title:"Delete Confirmation",message:`Are you sure want to delete this ticket permanent ${t}?`,actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.deleteTempTicket(t)})}deleteTempTicket(t){var n=this;return(0,f.A)(function*(){try{const{status:s}=yield n._apiService.delete(`api/V1/tickets/temp/${t}`);return 200===s?(n._toastService.success("Success Delete Tickets Permanent","Success"),void n._tempTicketsService.fetchData()):void n._toastService.error("Failed Delete Tickets Permanent","Failed")}catch(i){throw n._toastService.error("Failed Delete Tickets Permanent","Failed"),i}})()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(X.X),e.rXU(B.G),e.rXU($.G),e.rXU(Y.tw),e.rXU(N.M),e.rXU(M.j))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-temp-tickets"]],viewQuery:function(n,i){if(1&n&&(e.GBs(m.B4,5),e.GBs(k.iy,5)),2&n){let s;e.mGM(s=e.lsd())&&(i.sort=s.first),e.mGM(s=e.lsd())&&(i.paginator=s.first)}},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["paginator",""],["table",""],["class","h-fit border-[1px] shadow-xl mt-4 bg-white rounded-lg p-5",4,"ngIf"],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","flex-col","items-start","sm:flex-row","sm:items-center","justify-between"],[1,"text-2xl","font-semibold"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Tickets",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-192",3,"dataSource",4,"ngIf"],["class","py-10",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],["matSort","",1,"min-w-192",3,"dataSource"],["matColumnDef","tracking_id"],[4,"matHeaderCellDef"],["class","text-lg whitespace-nowrap",4,"matCellDef"],["matColumnDef","category"],["class","flex items-center gap-3 py-5",4,"matCellDef"],["matColumnDef","product"],["matColumnDef","deleted_by"],["matColumnDef","deleted_at"],["class","flex items-center gap-3",4,"matCellDef"],["matColumnDef","action"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","whitespace-nowrap"],[1,"flex","items-center","gap-3","py-5"],[1,"flex","items-center","gap-3"],["mat-sort-header",""],["class","flex items-center",4,"ngIf"],[1,"flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-yellow-500","hover:bg-yellow-600","rounded","hover:cursor-pointer","hover:underline",3,"click"],["svgIcon","restore",1,"text-white",2,"transform","scale(0.8)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"py-10"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"text-lg","font-semibold"],[1,"text-sm"]],template:function(n,i){1&n&&e.DNE(0,_e,18,7,"section",2),2&n&&e.Y8G("ngIf",i.isAdmin)},dependencies:[x.MD,x.bT,k.Ou,k.iy,w.hM,l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,d.X1,p.fS,p.fg,m.NQ,m.B4,m.aE,h.Cn,T.g7,d.YN,C.An]})}}return a})();var pe=r(68589),G=r(86600),j=r(25084),I=r(53719),L=r(82798),ue=r(21413),V=r(88834),fe=r(40171),he=r(5271),O=r(62288);let ge=(()=>{class a{constructor(t,n,i,s,_,g,b){this._apiService=t,this.toast=n,this._ticketTableSerivce=i,this._ticketLogsTableService=s,this.fuseConfirmationService=_,this.dialogRef=g,this.data=b,this.isLoading=!1,this.excelData=[],this.selectedFile=null}ngOnInit(){}formatDate(t){const n=new Date(t.getTime()+6e4*t.getTimezoneOffset());return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()+1).padStart(2,"0")}`}formatTime(t){return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}onFileChange(t){const n=t.target.files[0];if(n){this.selectedFile=n;const i=new FileReader;i.onload=s=>{const _=new Uint8Array(s.target.result),g=O.LF(_,{type:"array",cellDates:!0});this.excelData=O.Wp.sheet_to_json(g.Sheets[g.SheetNames[0]]),this.excelData=this.excelData.map(u=>({...u,hari_masuk:u.hari_masuk instanceof Date?this.formatDate(u.hari_masuk):u.hari_masuk,hari_respon:u.hari_respon instanceof Date?this.formatDate(u.hari_respon):u.hari_respon,waktu_masuk:u.waktu_masuk instanceof Date?this.formatTime(u.waktu_masuk):u.waktu_masuk,waktu_respon:u.waktu_respon instanceof Date?this.formatTime(u.waktu_respon):u.waktu_respon})),console.log("Formatted Excel Data:",this.excelData)},i.readAsArrayBuffer(n)}}onSubmit(){var t=this;return(0,f.A)(function*(){if(t.selectedFile)if(t.excelData&&0!==t.excelData.length)try{t.isLoading=!0,console.log(t.excelData);const{status:i}=yield t._apiService.post("api/V1/tickets/excel",t.excelData);if(201===i)return t.toast.success("Success Create Tickets","Success"),t._ticketTableSerivce.fetchData(),t._ticketLogsTableService.fetchDatas(),t.dialogRef.close(),void(t.isLoading=!1);if(500===i)return t.toast.error("Internal Server Error","Failed"),t.dialogRef.close(),void(t.isLoading=!1);if(409===i)t.isLoading=!1,t.fuseConfirmationService.open({title:"Notification",message:"The Tickets already exists on the server. Would you like to create another Tickets time anyway?",icon:{color:"info"},actions:{confirm:{label:"Confirmation",color:"primary"}}});else if(400===i)return t.toast.error("Bad Request","Failed"),t.dialogRef.close(),void(t.isLoading=!1)}catch(n){throw n}else t.toast.warning("The selected file is empty or invalid.","Warning");else t.toast.warning("Please select a file before submitting.","Warning")})()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU($.G),e.rXU(Y.tw),e.rXU(N.M),e.rXU(M.j),e.rXU(B.G),e.rXU(w.CP),e.rXU(w.Vh))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-import-excel"]],standalone:!0,features:[e.aNF],decls:26,vars:2,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","items-start","w-full","justify-between"],[1,"mb-2","text-2xl","font-semibold","sm:mb-0"],[1,"text-sm","text-gray-500"],["href","files/template_ticket_import.xlsx","download","",1,"text-blue-600","underline"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,""],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","px-8","py-4","pb-4","gap-5"],[1,"flex","flex-col","gap-2"],["for","excelFile",1,"text-sm","font-medium","text-gray-700","mb-1"],[1,"flex","items-center","border","border-gray-300","rounded-lg","px-4","py-2","cursor-pointer","hover:border-blue-500"],["type","file","id","excelFile","accept",".xlsx, .xls",1,"hidden",3,"change"],["for","excelFile",1,"flex-1","text-gray-600","cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M12 12v6m0 0l3-3m-3 3l-3-3M16 8V4H8v4"],["type","submit",1,"bg-green-600","text-white","p-2","rounded",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4,"Import Excel"),e.k0s(),e.j41(5,"p",4),e.EFF(6," Upload an Excel file. "),e.j41(7,"a",5),e.EFF(8,"Download here"),e.k0s(),e.EFF(9,". "),e.k0s()(),e.j41(10,"a",6),e.bIt("click",function(){return i.dialogRef.close()}),e.nrm(11,"mat-icon",7),e.k0s()(),e.nrm(12,"ion-loading",8),e.j41(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),e.EFF(17,"Upload Excel File"),e.k0s(),e.j41(18,"div",13)(19,"input",14),e.bIt("change",function(_){return i.onFileChange(_)}),e.k0s(),e.j41(20,"label",15),e.EFF(21),e.k0s(),e.qSk(),e.j41(22,"svg",16),e.nrm(23,"path",17),e.k0s()()(),e.joV(),e.j41(24,"button",18),e.bIt("click",function(){return i.onSubmit()}),e.EFF(25," Import Excel "),e.k0s()()()()),2&n&&(e.R7$(12),e.Y8G("isOpen",i.isLoading),e.R7$(9),e.SpI(" ",i.selectedFile?i.selectedFile.name:"Choose Excel file..."," "))},dependencies:[d.X1,d.qT,d.cb,d.YN,d.cV,I.RG,p.fS,V.Hl,C.m_,C.An,he.rQ,j.X6,G.Sy,L.Ve,x.MD]})}}return a})();const ke=()=>["/dashboards/tickets/add-tickets"],S=()=>({disableClose:!0}),xe=()=>[5,10,20],Te=(a,o,t)=>({"bg-blue-500":a,"bg-yellow-500":o,"bg-green-500":t}),U=(a,o,t,n)=>({"text-green-600":a,"text-blue-600":o,"text-yellow-600":t,"text-red-600":n}),be=a=>["/dashboards/tickets",a];function ve(a,o){if(1&a){const t=e.RV6();e.j41(0,"button",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.importExcel())}),e.nrm(1,"mat-icon",55),e.j41(2,"span"),e.EFF(3,"Import Excel"),e.k0s()()}}function Fe(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyProductsFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.SpI(" ",t.name," ")}}function Ce(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyPlacesFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.SpI(" ",t.name," ")}}function ye(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",57),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyCategoryFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.JRh(t.name)}}function we(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyStatusFilter())}),e.j41(1,"div",58)(2,"h1",59),e.EFF(3),e.k0s()()()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.Y8G("ngClass",e.sMw(3,Te,"New"===t.name,"On Progress"===t.name,"Resolved"===t.name)),e.R7$(2),e.JRh(t.name)}}function je(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyPriorityFilter())}),e.j41(1,"div",19),e.nrm(2,"mat-icon",60),e.j41(3,"h1",61),e.EFF(4),e.k0s()()()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(2),e.Y8G("ngClass",e.ziG(3,U,"Low"===t.name,"Hedium"===t.name,"High"===t.name,"Critical"===t.name)),e.R7$(2),e.JRh(t.name)}}function De(a,o){1&a&&(e.j41(0,"div",62),e.nrm(1,"div",63)(2,"div",63)(3,"div",63)(4,"div",63)(5,"div",63)(6,"div",63)(7,"div",64),e.k0s())}function Se(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Tracking ID "),e.k0s())}function Ee(a,o){if(1&a&&(e.j41(0,"mat-cell",92)(1,"a",93),e.EFF(2),e.k0s()()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(2,be,t.tracking_id)),e.R7$(),e.JRh(t.tracking_id)}}function Re(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Ticket Entry Day "),e.k0s())}function Ie(a,o){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",94),e.EFF(2),e.k0s()),2&a){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.hari_masuk," ")}}function $e(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Ticket Entry Time "),e.k0s())}function Ne(a,o){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",95),e.EFF(2),e.k0s()),2&a){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.waktu_masuk," ")}}function Me(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Place "),e.k0s())}function Ge(a,o){if(1&a&&(e.j41(0,"mat-cell",96),e.EFF(1),e.k0s()),2&a){let t;const n=o.$implicit;e.R7$(),e.SpI(" ",null!==(t=n.places_name)&&void 0!==t?t:"Not Found"," ")}}function Le(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Category "),e.k0s())}function Ve(a,o){if(1&a&&(e.j41(0,"mat-cell",96),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.category," ")}}function Pe(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Users "),e.k0s())}function Ae(a,o){1&a&&(e.j41(0,"div",62),e.nrm(1,"div",63),e.k0s())}function Be(a,o){if(1&a&&(e.j41(0,"mat-cell",97)(1,"div",98),e.nrm(2,"img",99),e.j41(3,"p",59),e.EFF(4),e.k0s()()()),2&a){const t=o.$implicit;e.R7$(2),e.Y8G("src",t.user.avatar,e.B4B),e.R7$(2),e.JRh(t.user.name)}}function Ye(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," PIC "),e.k0s())}function Oe(a,o){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",""==(null==t?null:t.pic)||null==(null==t?null:t.pic)?"Not Found":t.pic," ")}}function Ue(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Subject "),e.k0s())}function Xe(a,o){if(1&a&&(e.j41(0,"mat-cell",100),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.subject," ")}}function He(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Whatsapp Client "),e.k0s())}function We(a,o){if(1&a&&(e.j41(0,"mat-cell")(1,"a",101),e.EFF(2),e.k0s()()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("href","https://wa.me/"+(null==t?null:t.no_whatsapp),e.B4B),e.R7$(),e.SpI(" ",""===(null==t?null:t.no_whatsapp)?"Not Found":t.no_whatsapp," ")}}function Je(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Status "),e.k0s())}function Ke(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-option",106),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG().$implicit,_=e.XpG(2);return e.Njj(_.changeStatus(s.tracking_id,i))}),e.EFF(1),e.k0s()}if(2&a){const t=o.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function ze(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-cell",102)(1,"mat-form-field",103)(2,"mat-select",104),e.mxI("valueChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.status,i)||(s.status=i),e.Njj(i)}),e.DNE(3,Ke,2,2,"mat-option",105),e.k0s()()()}if(2&a){const t=o.$implicit,n=e.XpG(2);e.R7$(2),e.R50("value",t.status),e.Y8G("disabled",!n.isAdmin&&(n.shiftStatus||"Resolved"===(null==t?null:t.status))),e.R7$(),e.Y8G("ngForOf",n.statusList)}}function Qe(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Solved Time "),e.k0s())}function Ze(a,o){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",""===t.solved_time||null===t.solved_time?"On Progress":t.solved_time,"")}}function qe(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Last Replier "),e.k0s())}function et(a,o){1&a&&(e.j41(0,"div",62),e.nrm(1,"div",63),e.k0s())}function tt(a,o){if(1&a&&(e.j41(0,"mat-cell",107)(1,"div",98),e.nrm(2,"img",108),e.j41(3,"p",59),e.EFF(4),e.k0s()()()),2&a){const t=o.$implicit;e.R7$(2),e.Y8G("src",null===t.last_replier?t.user.avatar:t.last_replier.avatar,e.B4B),e.R7$(2),e.JRh(null===t.last_replier?t.user.name:t.last_replier.name)}}function at(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Priority "),e.k0s())}function it(a,o){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",60),e.j41(2,"h1",61),e.EFF(3),e.k0s()()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("ngClass",e.ziG(2,U,"Low"===t.priority,"Medium"===t.priority,"High"===t.priority,"Critical"===t.priority)),e.R7$(2),e.JRh(t.priority)}}function nt(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Date "),e.k0s())}function ot(a,o){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",94),e.EFF(2),e.k0s()),2&a){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.created_date," ")}}function st(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Time "),e.k0s())}function rt(a,o){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",95),e.EFF(2),e.k0s()),2&a){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.created_time," ")}}function lt(a,o){1&a&&e.nrm(0,"mat-header-row")}function ct(a,o){1&a&&e.nrm(0,"mat-row")}function mt(a,o){if(1&a&&(e.j41(0,"mat-table",65,9)(2,"div"),e.qex(3,66),e.DNE(4,Se,2,0,"mat-header-cell",67)(5,Ee,3,4,"mat-cell",68),e.bVm(),e.qex(6,69),e.DNE(7,Re,2,0,"mat-header-cell",67)(8,Ie,3,1,"mat-cell",70),e.bVm(),e.qex(9,71),e.DNE(10,$e,2,0,"mat-header-cell",67)(11,Ne,3,1,"mat-cell",70),e.bVm(),e.qex(12,72),e.DNE(13,Me,2,0,"mat-header-cell",67)(14,Ge,2,1,"mat-cell",73),e.bVm(),e.qex(15,74),e.DNE(16,Le,2,0,"mat-header-cell",67)(17,Ve,2,1,"mat-cell",73),e.bVm(),e.qex(18,75),e.DNE(19,Pe,2,0,"mat-header-cell",67)(20,Ae,2,0,"div",49)(21,Be,5,2,"mat-cell",76),e.bVm(),e.qex(22,77),e.DNE(23,Ye,2,0,"mat-header-cell",67)(24,Oe,2,1,"mat-cell",78),e.bVm(),e.qex(25,79),e.DNE(26,Ue,2,0,"mat-header-cell",67)(27,Xe,2,1,"mat-cell",80),e.bVm(),e.qex(28,81),e.DNE(29,He,2,0,"mat-header-cell",67)(30,We,3,2,"mat-cell",78),e.bVm(),e.qex(31,82),e.DNE(32,Je,2,0,"mat-header-cell",67)(33,ze,4,3,"mat-cell",83),e.bVm(),e.qex(34,84),e.DNE(35,Qe,2,0,"mat-header-cell",67)(36,Ze,2,1,"mat-cell",78),e.bVm(),e.qex(37,85),e.DNE(38,qe,2,0,"mat-header-cell",67)(39,et,2,0,"div",49)(40,tt,5,2,"mat-cell",86),e.bVm(),e.qex(41,87),e.DNE(42,at,2,0,"mat-header-cell",67)(43,it,4,7,"mat-cell",70),e.bVm(),e.qex(44,88),e.DNE(45,nt,2,0,"mat-header-cell",67)(46,ot,3,1,"mat-cell",70),e.bVm(),e.qex(47,89),e.DNE(48,st,2,0,"mat-header-cell",67)(49,rt,3,1,"mat-cell",70),e.bVm(),e.DNE(50,lt,1,0,"mat-header-row",90)(51,ct,1,0,"mat-row",91),e.k0s()()),2&a){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(20),e.Y8G("ngIf",t.isLoading),e.R7$(19),e.Y8G("ngIf",t.isLoading),e.R7$(11),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}function _t(a,o){1&a&&(e.j41(0,"div",109)(1,"div",110),e.nrm(2,"img",111)(3,"br"),e.j41(4,"p",112),e.EFF(5,"Data Not Found"),e.k0s(),e.j41(6,"p",113),e.EFF(7,"try using a different keyword or add a new tickets"),e.k0s()()())}const P=new Date,dt=P.getMonth(),pt=P.getFullYear();P.getDay();let ut=(()=>{class a{constructor(t,n,i,s,_){this._apiService=t,this.cdr=n,this._ticketLogsService=i,this._ticketTableService=s,this._matDialog=_,this.filterValues={search:"",category:[],products:[],places:[],status:[],priority:[]},this.shiftStatus=!0,this.ticketStatus=!1,this.isAdmin="admin"===localStorage.getItem("userRole"),this.statusList=["New","On Progress","Resolved"],this.productsItems=[],this.category=[],this.statusItems=[],this.priorityItems=[],this.placesItems=[],this._unsubscribeAll=new ue.B,this.displayedColumns=["tracking_id","hari_masuk","waktu_masuk","place","name","category","subject","pic","no_whatsapp","status","solved_time","last_replier","priority","create_date","create_time"],this.dataSource=new l.I6,this.range=new d.gE({start:new d.MJ(new Date(pt,dt-1)),end:new d.MJ(new Date)}),this._ticketTableService.checkTickets(),this._ticketTableService.fetchData(),(0,e.QZP)(()=>{const g=this.datas,b=new Set,v=new Set,u=new Set,E=new Set,R=new Set;g.forEach(c=>{c.products_name&&(Array.isArray(c.products_name)?c.products_name.forEach(y=>E.add(y)):E.add(c.products_name)),c.places_name&&(Array.isArray(c.places_name)?c.places_name.forEach(y=>R.add(y)):R.add(c.places_name)),c.category&&(Array.isArray(c.category)?c.category.forEach(y=>b.add(y)):(b.add(c.category),v.add(c.status))),c.status&&(Array.isArray(c.status)?c.status.forEach(y=>v.add(y)):v.add(c.status)),c.priority&&(Array.isArray(c.priority)?c.priority.forEach(y=>u.add(y)):u.add(c.priority)),c.subject||(c.subject="Subject Not Found")}),this.statusItems=[...v].map(c=>({name:c,checked:!1})),this.category=[...b].map(c=>({name:c,checked:!1})),this.priorityItems=[...u].map(c=>({name:c,checked:!1})),this.productsItems=[...E].map(c=>({name:c,checked:!1})),this.placesItems=[...R].map(c=>({name:c,checked:!1})),this.dataSource.data=0!==this._ticketTableService._datas().length?g:[]})}get datas(){return this._ticketTableService._datas()}get isLoading(){return this._ticketTableService.isLoading()}get isNotFound(){return this._ticketTableService.isNotFound()}ngOnInit(){this.fetchUsers(),this.range.valueChanges.subscribe(({start:t,end:n})=>{if(n){const i=t instanceof Date?t:new Date(t),s=n instanceof Date?n:new Date(n);this._ticketTableService.fetchDataByDate(i.toLocaleDateString("en-CA"),s.toLocaleDateString("en-CA"))}})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}importExcel(){this._matDialog.open(ge,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}generateReport(){this._matDialog.open(fe.E,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}fetchUsers(){var t=this;return(0,f.A)(function*(){try{const n=yield t._apiService.get("api/V1/get-profile");t.shiftStatus="Active Shift"!==n.data.shift_status,t.cdr.detectChanges()}catch(n){throw n}})()}applyFilter(){this.dataSource.filterPredicate=(t,n)=>{let i=JSON.parse(n),s=""===i.search||t.tracking_id.toLowerCase().includes(i.search)||t.created_date.toLowerCase().includes(i.search)||t.created_time.toLowerCase().includes(i.search)||t.hari_masuk.toLowerCase().includes(i.search)||t.waktu_masuk.toLowerCase().includes(i.search)||t.products_name.toLowerCase().includes(i.search)||t.category.toLowerCase().includes(i.search)||t.subject.toLowerCase().includes(i.search)||t.status.toLowerCase().includes(i.search)||t.priority.toLowerCase().includes(i.search)||t.places_name.toLowerCase().includes(i.search)||t.no_whatsapp.toLowerCase().includes(i.search)||t.user?.name.toLowerCase().includes(i.search)||t.last_replier?.name.toLowerCase().includes(i.search),_=0===i.category.length||i.category.includes(t.category.toLowerCase()),g=0===i.status.length||i.status.includes(t.status.toLowerCase()),b=0===i.priority.length||i.priority.includes(t.priority.toLowerCase()),v=0===i.products.length||i.products.includes(t.products_name.toLowerCase()),u=0===i.places.length||i.places.includes((t.places_name||"").toLowerCase());return s&&_&&g&&b&&v&&u},this.dataSource.filter=JSON.stringify(this.filterValues)}applySearchFilter(t){this.filterValues.search=t.trim().toLowerCase(),this.applyFilter()}applyProductsFilter(){this.filterValues.products=this.productsItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyPlacesFilter(){this.filterValues.places=this.placesItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyCategoryFilter(){this.filterValues.category=this.category.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyStatusFilter(){this.filterValues.status=this.statusItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyPriorityFilter(){this.filterValues.priority=this.priorityItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}changeStatus(t,n){var i=this;return(0,f.A)(function*(){try{const{status:s}=yield i._apiService.post(`api/V1/ticket-status/${t}`,{status:n});200===s&&(i._ticketLogsService.fetchDatas(),i._ticketTableService.fetchData())}catch(s){throw s}})()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU($.G),e.rXU(e.gRc),e.rXU(M.j),e.rXU(N.M),e.rXU(w.bZ))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-ticket"]],viewQuery:function(n,i){if(1&n&&(e.GBs(m.B4,5),e.GBs(k.iy,5)),2&n){let s;e.mGM(s=e.lsd())&&(i.sort=s.first),e.mGM(s=e.lsd())&&(i.paginator=s.first)}},standalone:!0,features:[e.aNF],decls:97,vars:40,consts:[["addUserMenu","matMenu"],["picker",""],["menu","matMenu"],["products","matMenu"],["places","matMenu"],["categorys","matMenu"],["status","matMenu"],["priority","matMenu"],["paginator",""],["table",""],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","flex-col","items-start","lg:flex-row","sm:items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Tickets",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],[1,"flex","items-center","gap-3"],["mat-raised-button","",1,"flex","w-fit","text-nowrap","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","text-white",3,"disabled","matMenuTriggerFor","ngClass"],[1,"flex","items-center","gap-1"],[1,"m-2","pr-4","border-r-[1px]"],["svgIcon","keyboard_arrow_down",1,"font-bold","text-2xl"],["mat-menu-item","",3,"routerLink"],["svgIcon","mat_outline:add",1,"icon-size-5"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-raised-button","",1,"flex","w-fit","text-nowrap","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","bg-red-500","text-white",3,"click"],["svgIcon","mat_solid:picture_as_pdf",1,"text-white"],[1,"max-sm:hidden","font-semibold"],[1,"min-w-[300px]","max-w-full","self-end","hidden","sm:block"],[1,"w-full",3,"rangePicker","formGroup"],["matStartDate","","formControlName","start","placeholder","Start date",1,"w-full"],["matEndDate","","formControlName","end","placeholder","End date",1,"w-full"],["matSuffix","",3,"for"],["touchUi",""],[1,"flex","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","border-[1px]","text-white",3,"matMenuTriggerFor"],["svgIcon","filter_alt"],[1,"max-sm:hidden","font-semibold","text-black"],["svgIcon","keyboard_arrow_down"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"min-w-[300px]"],[1,"px-5","py-3","w-full"],[1,"font-semibold","mb-2"],[1,"px-5","flex","flex-col","gap-2","w-full"],["class","h-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],["class","h-full w-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],[1,"px-5","py-3"],[1,"min-w-[300px]","max-w-full","pt-4","self-start","sm:hidden","block"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-[2480px]",3,"dataSource",4,"ngIf"],["class","py-10",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mat-menu-item","",3,"click"],["svgIcon","mat_outline:upload_file",1,"icon-size-5"],[1,"h-full",3,"ngModelChange","click","change","ngModel"],[1,"h-full","w-full",3,"ngModelChange","click","change","ngModel"],[1,"px-3","py-1","text-white","whitespace-nowrap","rounded-full",3,"ngClass"],[1,"font-medium"],["svgIcon","mat_outline:bookmark",1,"-rotate-90",3,"ngClass"],[1,"font-medium","uppercase"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],["matSort","",1,"min-w-[2480px]",3,"dataSource"],["matColumnDef","tracking_id"],[4,"matHeaderCellDef"],["class","text-lg text-blue-600 font-medium underline whitespace-nowrap",4,"matCellDef"],["matColumnDef","hari_masuk"],["class","flex items-center gap-3",4,"matCellDef"],["matColumnDef","waktu_masuk"],["matColumnDef","place"],["class","flex items-center gap-3 font-medium",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","name"],["class","py-3.5 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","pic"],[4,"matCellDef"],["matColumnDef","subject"],["class","font-bold text-lg",4,"matCellDef"],["matColumnDef","no_whatsapp"],["matColumnDef","status"],["class","py-4 w-full",4,"matCellDef"],["matColumnDef","solved_time"],["matColumnDef","last_replier"],["class","py-2 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","priority"],["matColumnDef","create_date"],["matColumnDef","create_time"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","text-blue-600","font-medium","underline","whitespace-nowrap"],[3,"routerLink"],["svgIcon","mat_solid:date_range"],["svgIcon","mat_outline:access_time"],[1,"flex","items-center","gap-3","font-medium"],[1,"py-3.5","flex","items-center","gap-3","w-fit"],[1,"w-full","flex","items-center","gap-3"],["alt","",1,"w-7","h-7","object-cover","rounded-full",3,"src"],[1,"font-bold","text-lg"],["target","_blank",3,"href"],[1,"py-4","w-full"],["hideRequiredMarker","",1,"w-full"],["placeholder","Select",3,"valueChange","value","disabled"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value","click",4,"ngFor","ngForOf"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"click","value"],[1,"py-2","flex","items-center","gap-3","w-fit"],["alt","",1,"w-7","h-7","rounded-full",3,"src"],[1,"py-10"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"text-lg","font-semibold"],[1,"text-sm"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"section",10)(1,"div",11)(2,"div",12)(3,"label",13),e.EFF(4,"Search"),e.k0s(),e.j41(5,"div",14)(6,"div",15),e.qSk(),e.j41(7,"svg",16),e.nrm(8,"path",17),e.k0s()(),e.joV(),e.j41(9,"input",18),e.bIt("keyup",function(g){return e.eBV(s),e.Njj(i.applySearchFilter(g.target.value))}),e.k0s()()(),e.j41(10,"div",19)(11,"button",20)(12,"div",21)(13,"span",22),e.EFF(14,"New Tickets"),e.k0s(),e.nrm(15,"mat-icon",23),e.k0s()(),e.j41(16,"mat-menu",null,0)(18,"button",24),e.nrm(19,"mat-icon",25),e.j41(20,"span"),e.EFF(21,"Add Tickets"),e.k0s()(),e.DNE(22,ve,4,0,"button",26),e.k0s(),e.j41(23,"button",27),e.bIt("click",function(){return e.eBV(s),e.Njj(i.generateReport())}),e.nrm(24,"mat-icon",28),e.j41(25,"span",29),e.EFF(26,"Generate Report"),e.k0s()(),e.j41(27,"mat-form-field",30)(28,"mat-date-range-input",31),e.nrm(29,"input",32)(30,"input",33),e.k0s(),e.nrm(31,"mat-datepicker-toggle",34)(32,"mat-date-range-picker",35,1),e.k0s(),e.j41(34,"button",36),e.nrm(35,"mat-icon",37),e.j41(36,"span",38),e.EFF(37,"Filter"),e.k0s(),e.nrm(38,"mat-icon",39),e.k0s(),e.j41(39,"mat-menu",null,2)(41,"button",40),e.EFF(42,"Products"),e.k0s(),e.j41(43,"button",40),e.EFF(44,"Places"),e.k0s(),e.j41(45,"button",40),e.EFF(46,"Category"),e.k0s(),e.j41(47,"button",40),e.EFF(48,"Status"),e.k0s(),e.j41(49,"button",40),e.EFF(50,"Priority"),e.k0s(),e.j41(51,"mat-menu",41,3)(53,"div",42)(54,"h1",43),e.EFF(55,"Choose Products"),e.k0s()(),e.j41(56,"div",44),e.DNE(57,Fe,2,2,"mat-checkbox",45),e.k0s()(),e.j41(58,"mat-menu",41,4)(60,"div",42)(61,"h1",43),e.EFF(62,"Choose Places"),e.k0s()(),e.j41(63,"div",44),e.DNE(64,Ce,2,2,"mat-checkbox",45),e.k0s()(),e.j41(65,"mat-menu",41,5)(67,"div",42)(68,"h1",43),e.EFF(69,"Choose Category"),e.k0s()(),e.j41(70,"div",44),e.DNE(71,ye,2,2,"mat-checkbox",46),e.k0s()(),e.j41(72,"mat-menu",null,6)(74,"div",47)(75,"h1",43),e.EFF(76,"Choose status"),e.k0s()(),e.DNE(77,we,4,7,"mat-checkbox",45),e.k0s(),e.j41(78,"mat-menu",null,7)(80,"div",47)(81,"h1",43),e.EFF(82,"Choose Priority"),e.k0s()(),e.DNE(83,je,5,8,"mat-checkbox",45),e.k0s()()(),e.j41(84,"mat-form-field",48)(85,"mat-date-range-input",31),e.nrm(86,"input",32)(87,"input",33),e.k0s(),e.nrm(88,"mat-datepicker-toggle",34)(89,"mat-date-range-picker",null,1),e.k0s()(),e.DNE(91,De,8,0,"div",49),e.j41(92,"div",50),e.DNE(93,mt,52,5,"mat-table",51),e.k0s(),e.DNE(94,_t,8,0,"div",52),e.nrm(95,"mat-paginator",53,8),e.k0s()}if(2&n){const s=e.sdS(17),_=e.sdS(33),g=e.sdS(40),b=e.sdS(52),v=e.sdS(59),u=e.sdS(66),E=e.sdS(73),R=e.sdS(79);e.R7$(11),e.Y8G("disabled",i.shiftStatus&&!i.isAdmin)("matMenuTriggerFor",s)("ngClass",i.shiftStatus&&!i.isAdmin?"bg-gray-400":"bg-primary"),e.R7$(7),e.Y8G("routerLink",e.lJ4(33,ke)),e.R7$(4),e.Y8G("ngIf",i.isAdmin),e.R7$(6),e.Y8G("rangePicker",_)("formGroup",i.range),e.R7$(3),e.Y8G("for",_),e.R7$(3),e.Y8G("matMenuTriggerFor",g),e.R7$(7),e.Y8G("matMenuTriggerFor",b)("matMenuTriggerData",e.lJ4(34,S)),e.R7$(2),e.Y8G("matMenuTriggerFor",v)("matMenuTriggerData",e.lJ4(35,S)),e.R7$(2),e.Y8G("matMenuTriggerFor",u)("matMenuTriggerData",e.lJ4(36,S)),e.R7$(2),e.Y8G("matMenuTriggerFor",E)("matMenuTriggerData",e.lJ4(37,S)),e.R7$(2),e.Y8G("matMenuTriggerFor",R)("matMenuTriggerData",e.lJ4(38,S)),e.R7$(8),e.Y8G("ngForOf",i.productsItems),e.R7$(7),e.Y8G("ngForOf",i.placesItems),e.R7$(7),e.Y8G("ngForOf",i.category),e.R7$(6),e.Y8G("ngForOf",i.statusItems),e.R7$(6),e.Y8G("ngForOf",i.priorityItems),e.R7$(2),e.Y8G("rangePicker",_)("formGroup",i.range),e.R7$(3),e.Y8G("for",_),e.R7$(3),e.Y8G("ngIf",i.isLoading),e.R7$(2),e.Y8G("ngIf",!i.isLoading),e.R7$(),e.Y8G("ngIf",i.isNotFound&&!i.isLoading),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(39,xe))("showFirstLastButtons",!0)}},dependencies:[x.MD,x.YU,x.Sq,x.bT,k.Ou,k.iy,w.hM,l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,d.X1,d.me,d.BC,d.cb,d.j4,d.JD,p.fS,p.fg,I.rl,I.yw,m.NQ,m.B4,C.An,h.Cn,h.kk,h.fb,h.Cp,T.g7,T.So,d.YN,d.vS,I.RG,j.X6,j.bU,j.el,j.xR,j.IG,j.SG,L.Ve,L.VO,G.wT,G.Sy,V.Hl,V.$z,F.Wk],styles:[".mat-mdc-form-field-subscript-wrapper{display:none!important}",".mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%] {\n        display: none;\n    }"]})}}return a})();const ft=()=>["/dashboards/home"];let ht=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-tickets"]],standalone:!0,features:[e.aNF],decls:18,vars:2,consts:[[1,"p-4","h-full","w-full","sm:px-5"],[1,"px-1","pt-3","flex","justify-between","items-start","sm:items-center","flex-col","sm:flex-row","gap-5","sm:gap-0"],[1,"font-bold","text-lg","sm:text-3xl"],[1,"text-sm","sm:text-base"],[1,"text-sm","text-gray-600"],[1,"font-medium","text-gray-500","hover:cursor-pointer","hover:text-blue-400",3,"routerLink"],[1,"mx-2","text-gray-400"],[1,"font-semibold","text-blue-600","hover:text-blue-500"],[1,"h-fit","w-full"]],template:function(n,i){1&n&&(e.j41(0,"main",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4,"Tickets"),e.k0s(),e.j41(5,"p",3),e.EFF(6,"Keep track of ongoing tickets and follow up efficiently."),e.k0s()(),e.j41(7,"div",4)(8,"span",5),e.EFF(9,"Home"),e.k0s(),e.j41(10,"span",6),e.EFF(11,"/"),e.k0s(),e.j41(12,"span",7),e.EFF(13,"Tickets"),e.k0s()()(),e.j41(14,"div",8),e.nrm(15,"app-ticket")(16,"app-ticket-logs")(17,"app-temp-tickets"),e.k0s()()),2&n&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(1,ft)))},dependencies:[ut,pe.V,F.Wk,de],encapsulation:2,changeDetection:0})}}return a})();var gt=r(25798),kt=r(96697),xt=r(96354);const Tt=[{path:"",component:ht},{path:"add-tickets",canActivate:[(a,o)=>{const t=(0,e.WQX)(F.Ix),n=(0,e.WQX)(gt.D),i="admin"===localStorage.getItem("userRole");return n.user$.pipe((0,kt.s)(1),(0,xt.T)(s=>!(!i&&"Active Shift"!==s.shift_status)||t.parseUrl("/dashboards/tickets")))}],loadChildren:()=>Promise.all([r.e(6233),r.e(2076),r.e(789)]).then(r.bind(r,10789))},{path:":trackingId",loadChildren:()=>Promise.all([r.e(6233),r.e(1526)]).then(r.bind(r,21526))}]},48807:(A,D,r)=>{r.d(D,{X:()=>d});var F=r(10467),f=r(54438),e=r(3366),x=r(45794);let d=(()=>{class T{constructor(p,h){this._apiService=p,this._toastService=h,this._data=(0,f.vPA)([]),this.isLoading=(0,f.vPA)(!1),this.isNotFound=(0,f.vPA)(!1)}fetchData(){var p=this;return(0,F.A)(function*(){p.isLoading.set(!0),p._apiService.get("api/V1/tickets/temp").then(function(){var h=(0,F.A)(function*(k){p.isLoading.set(!1),p.isNotFound.set(!1),p._data.set(k.data),null!==k.data&&0!=k.data.length||p.isNotFound.set(!0)});return function(k){return h.apply(this,arguments)}}()).catch(function(){var h=(0,F.A)(function*(k){p.isLoading.set(!1),p.isNotFound.set(!0),p._toastService.error("Failed to fetch data","Error")});return function(k){return h.apply(this,arguments)}}())})()}static{this.\u0275fac=function(h){return new(h||T)(f.KVO(e.G),f.KVO(x.tw))}}static{this.\u0275prov=f.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()},35883:(A,D,r)=>{r.d(D,{M:()=>p});var F=r(10467),f=r(54438),e=r(84412),x=r(86648),d=r(88141),T=r(3366),w=r(45794);let p=(()=>{class h{constructor(m,l){this._apiService=m,this._toastService=l,this._data=new e.t(null),this._datas=(0,f.vPA)([]),this.isLoading=(0,f.vPA)(!0),this.isNotFound=(0,f.vPA)(!1)}get data$(){return this._data.asObservable()}Update(m){this._data.next(m)}checkTickets(){return(0,x.H)(this._apiService.get("api/V1/check-tickets-deadline")).pipe((0,d.M)(m=>{console.log(m)}))}fetchDataByDate(m,l){this.isLoading.set(!0),this._apiService.get(`api/V1/tickets-date?start_date=${m}&end_date=${l}`).then(C=>{this.isLoading.set(!1),this.isNotFound.set(!1),this._datas.set(C.data),null!==C.data&&0!=C.data.length||this.isNotFound.set(!0)}).catch(C=>{this.isLoading.set(!1),this.isNotFound.set(!0),this._toastService.error("Failed to fetch data","Error")})}fetchData(){var m=this;return(0,F.A)(function*(){m.isLoading.set(!0),m._apiService.get("api/V1/tickets").then(l=>{m.isLoading.set(!1),m.isNotFound.set(!1),m._datas.set(l.data),null!==l.data&&0!=l.data.length||m.isNotFound.set(!0)}).catch(l=>{m.isLoading.set(!1),m.isNotFound.set(!0),m._toastService.error("Failed to fetch data","Error")})})()}static{this.\u0275fac=function(l){return new(l||h)(f.KVO(T.G),f.KVO(w.tw))}}static{this.\u0275prov=f.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()}}]);