"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[650],{90650:(W,$,n)=>{n.r($),n.d($,{default:()=>ke});var C=n(74710),g=n(10467),e=n(54438),k=n(60177),I=n(89417),D=n(82765),w=n(75351),x=n(59042),y=n(59115),F=n(96695),L=n(2042),d=n(9159),c=n(99213),_=n(48807),V=n(46601),S=n(3366),J=n(45794),G=n(35883),K=n(10801);const z=()=>[5,10,20];function Q(r,f){1&r&&(e.j41(0,"div",18),e.nrm(1,"div",19)(2,"div",19)(3,"div",19)(4,"div",19)(5,"div",19)(6,"div",19)(7,"div",20),e.k0s())}function O(r,f){1&r&&(e.j41(0,"mat-header-cell"),e.EFF(1," Tracking ID "),e.k0s())}function Y(r,f){if(1&r&&(e.j41(0,"mat-cell",36)(1,"a"),e.EFF(2),e.k0s()()),2&r){const l=f.$implicit;e.R7$(2),e.JRh(l.tracking_id)}}function Z(r,f){1&r&&(e.j41(0,"mat-header-cell"),e.EFF(1," Category "),e.k0s())}function U(r,f){if(1&r&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&r){const l=f.$implicit;e.R7$(),e.SpI(" ",l.category," ")}}function X(r,f){1&r&&(e.j41(0,"mat-header-cell"),e.EFF(1," Products "),e.k0s())}function q(r,f){if(1&r&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&r){const l=f.$implicit;e.R7$(),e.SpI(" ",l.product," ")}}function ee(r,f){1&r&&(e.j41(0,"mat-header-cell"),e.EFF(1," Deleted By "),e.k0s())}function te(r,f){if(1&r&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&r){const l=f.$implicit;e.R7$(),e.SpI(" ",l.deleted_by," ")}}function M(r,f){1&r&&(e.j41(0,"mat-header-cell"),e.EFF(1," Deleted at "),e.k0s())}function ae(r,f){if(1&r&&(e.j41(0,"mat-cell",38),e.EFF(1),e.k0s()),2&r){const l=f.$implicit;e.R7$(),e.SpI(" ",l.deleted_at," ")}}function ie(r,f){1&r&&(e.j41(0,"mat-header-cell",39),e.EFF(1," Action "),e.k0s())}function H(r,f){if(1&r){const l=e.RV6();e.j41(0,"div",41)(1,"a",42),e.bIt("click",function(){e.eBV(l);const h=e.XpG().$implicit,b=e.XpG(3);return e.Njj(b.handleRestoreTickets(h.tracking_id))}),e.nrm(2,"mat-icon",43),e.k0s(),e.j41(3,"a",44),e.bIt("click",function(){e.eBV(l);const h=e.XpG().$implicit,b=e.XpG(3);return e.Njj(b.handleDeleteTempTicket(h.tracking_id))}),e.nrm(4,"mat-icon",45),e.k0s()()}}function ne(r,f){if(1&r&&(e.j41(0,"mat-cell"),e.DNE(1,H,5,0,"div",40),e.k0s()),2&r){const l=f.$implicit;e.R7$(),e.Y8G("ngIf","default-trial"!=l.name)}}function oe(r,f){1&r&&e.nrm(0,"mat-header-row")}function se(r,f){1&r&&e.nrm(0,"mat-row")}function re(r,f){if(1&r&&(e.j41(0,"mat-table",21,1)(2,"div"),e.qex(3,22),e.DNE(4,O,2,0,"mat-header-cell",23)(5,Y,3,1,"mat-cell",24),e.bVm(),e.qex(6,25),e.DNE(7,Z,2,0,"mat-header-cell",23)(8,U,2,1,"mat-cell",26),e.bVm(),e.qex(9,27),e.DNE(10,X,2,0,"mat-header-cell",23)(11,q,2,1,"mat-cell",26),e.bVm(),e.qex(12,28),e.DNE(13,ee,2,0,"mat-header-cell",23)(14,te,2,1,"mat-cell",26),e.bVm(),e.qex(15,29),e.DNE(16,M,2,0,"mat-header-cell",23)(17,ae,2,1,"mat-cell",30),e.bVm(),e.qex(18,31),e.DNE(19,ie,2,0,"mat-header-cell",32)(20,ne,2,1,"mat-cell",33),e.bVm(),e.DNE(21,oe,1,0,"mat-header-row",34)(22,se,1,0,"mat-row",35),e.k0s()()),2&r){const l=e.XpG(2);e.Y8G("dataSource",l.dataSource),e.R7$(21),e.Y8G("matHeaderRowDef",l.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",l.displayedColumns)}}function le(r,f){1&r&&(e.j41(0,"div",46)(1,"div",47),e.nrm(2,"img",48)(3,"br"),e.j41(4,"p",49),e.EFF(5,"Data Not Found"),e.k0s(),e.j41(6,"p",50),e.EFF(7,"try using a different keyword or add a new tickets"),e.k0s()()())}function ce(r,f){if(1&r){const l=e.RV6();e.j41(0,"section",3)(1,"div",4)(2,"h1",5),e.EFF(3,"Deleted Tickets"),e.k0s(),e.j41(4,"div",6)(5,"label",7),e.EFF(6,"Search"),e.k0s(),e.j41(7,"div",8)(8,"div",9),e.qSk(),e.j41(9,"svg",10),e.nrm(10,"path",11),e.k0s()(),e.joV(),e.j41(11,"input",12),e.bIt("keyup",function(h){e.eBV(l);const b=e.XpG();return e.Njj(b.applyFilter(h.target.value))}),e.k0s()()()(),e.DNE(12,Q,8,0,"div",13),e.j41(13,"div",14),e.DNE(14,re,23,3,"mat-table",15),e.k0s(),e.DNE(15,le,8,0,"div",16),e.nrm(16,"mat-paginator",17,0),e.k0s()}if(2&r){const l=e.XpG();e.R7$(12),e.Y8G("ngIf",l.isLoading),e.R7$(2),e.Y8G("ngIf",!l.isLoading),e.R7$(),e.Y8G("ngIf",l.isNotDataFound&&!l.isLoading),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(6,z))("showFirstLastButtons",!0)}}let me=(()=>{class r{constructor(l,u,h,b,P,xe){this._tempTicketsService=l,this.fuseConfirmationService=u,this._apiService=h,this._toastService=b,this._ticketTableService=P,this._ticketLogsService=xe,this.displayedColumns=["tracking_id","category","product","deleted_by","deleted_at","action"],this.dataSource=new d.I6,this.isAdmin="admin"===localStorage.getItem("userRole"),this._tempTicketsService.fetchData(),(0,e.QZP)(()=>{this.dataSource.data=this.dataTempTickets})}get isNotDataFound(){return this._tempTicketsService.isNotFound()}get isLoading(){return this._tempTicketsService.isLoading()}get dataTempTickets(){return this._tempTicketsService._data()}ngOnInit(){}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}applyFilter(l){l=(l=l.trim()).toLowerCase(),this.dataSource.filter=l}handleRestoreTickets(l){this.fuseConfirmationService.open({title:"Restore Confirmation",message:`Are you sure want to restore this ticket ${l}?`,icon:{show:!0,name:"restore",color:"primary"},actions:{confirm:{label:"Restore",color:"primary"}}}).afterClosed().subscribe(h=>{"confirmed"===h&&this.restoreTickets(l)})}restoreTickets(l){var u=this;return(0,g.A)(function*(){try{const{status:b}=yield u._apiService.post(`api/V1/tickets/restore/${l}`,{});return 200===b?(u._toastService.success("Success Restore Ticket","Success"),u._tempTicketsService.fetchData(),u._ticketTableService.fetchData(),void u._ticketLogsService.fetchDatas()):void u._toastService.error("Failed Restore Ticket","Failed")}catch(h){throw u._toastService.error("Failed Restore Ticket","Failed"),h}})()}handleDeleteTempTicket(l){this.fuseConfirmationService.open({title:"Delete Confirmation",message:`Are you sure want to delete this ticket permanent ${l}?`,actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(h=>{"confirmed"===h&&this.deleteTempTicket(l)})}deleteTempTicket(l){var u=this;return(0,g.A)(function*(){try{const{status:b}=yield u._apiService.delete(`api/V1/tickets/temp/${l}`);return 200===b?(u._toastService.success("Success Delete Tickets Permanent","Success"),void u._tempTicketsService.fetchData()):void u._toastService.error("Failed Delete Tickets Permanent","Failed")}catch(h){throw u._toastService.error("Failed Delete Tickets Permanent","Failed"),h}})()}static{this.\u0275fac=function(u){return new(u||r)(e.rXU(_.X),e.rXU(V.G),e.rXU(S.G),e.rXU(J.tw),e.rXU(G.M),e.rXU(K.j))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-temp-tickets"]],viewQuery:function(u,h){if(1&u&&(e.GBs(L.B4,5),e.GBs(F.iy,5)),2&u){let b;e.mGM(b=e.lsd())&&(h.sort=b.first),e.mGM(b=e.lsd())&&(h.paginator=b.first)}},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["paginator",""],["table",""],["class","h-fit border-[1px] shadow-xl mt-4 bg-white rounded-lg p-5",4,"ngIf"],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","flex-col","items-start","sm:flex-row","sm:items-center","justify-between"],[1,"text-2xl","font-semibold"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Tickets",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-192",3,"dataSource",4,"ngIf"],["class","py-10",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],["matSort","",1,"min-w-192",3,"dataSource"],["matColumnDef","tracking_id"],[4,"matHeaderCellDef"],["class","text-lg whitespace-nowrap",4,"matCellDef"],["matColumnDef","category"],["class","flex items-center gap-3 py-5",4,"matCellDef"],["matColumnDef","product"],["matColumnDef","deleted_by"],["matColumnDef","deleted_at"],["class","flex items-center gap-3",4,"matCellDef"],["matColumnDef","action"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","whitespace-nowrap"],[1,"flex","items-center","gap-3","py-5"],[1,"flex","items-center","gap-3"],["mat-sort-header",""],["class","flex items-center",4,"ngIf"],[1,"flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-yellow-500","hover:bg-yellow-600","rounded","hover:cursor-pointer","hover:underline",3,"click"],["svgIcon","restore",1,"text-white",2,"transform","scale(0.8)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"py-10"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"text-lg","font-semibold"],[1,"text-sm"]],template:function(u,h){1&u&&e.DNE(0,ce,18,7,"section",2),2&u&&e.Y8G("ngIf",h.isAdmin)},dependencies:[k.MD,k.bT,F.Ou,F.iy,w.hM,d.tP,d.Zl,d.tL,d.ji,d.cC,d.YV,d.iL,d.KS,d.$R,d.YZ,d.NB,I.X1,x.fS,x.fg,L.NQ,L.B4,L.aE,y.Cn,D.g7,I.YN,c.An]})}}return r})();var de=n(68589),ue=n(68676);const pe=()=>["/dashboards/home"];let _e=(()=>{class r{constructor(l){this._ticketTableService=l,this._ticketTableService.fetchData()}static{this.\u0275fac=function(u){return new(u||r)(e.rXU(G.M))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-tickets"]],standalone:!0,features:[e.aNF],decls:18,vars:2,consts:[[1,"p-4","h-full","w-full","sm:px-5"],[1,"px-1","pt-3","flex","justify-between","items-start","sm:items-center","flex-col","sm:flex-row","gap-5","sm:gap-0"],[1,"font-bold","text-lg","sm:text-3xl"],[1,"text-sm","sm:text-base"],[1,"text-sm","text-gray-600"],[1,"font-medium","text-gray-500","hover:cursor-pointer","hover:text-blue-400",3,"routerLink"],[1,"mx-2","text-gray-400"],[1,"font-semibold","text-blue-600","hover:text-blue-500"],[1,"h-fit","w-full"]],template:function(u,h){1&u&&(e.j41(0,"main",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4,"Tickets"),e.k0s(),e.j41(5,"p",3),e.EFF(6,"Keep track of ongoing tickets and follow up efficiently."),e.k0s()(),e.j41(7,"div",4)(8,"span",5),e.EFF(9,"Home"),e.k0s(),e.j41(10,"span",6),e.EFF(11,"/"),e.k0s(),e.j41(12,"span",7),e.EFF(13,"Tickets"),e.k0s()()(),e.j41(14,"div",8),e.nrm(15,"app-ticket")(16,"app-ticket-logs")(17,"app-temp-tickets"),e.k0s()()),2&u&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(1,pe)))},dependencies:[ue.U,de.V,C.Wk,me],encapsulation:2,changeDetection:0})}}return r})();var fe=n(25798),he=n(96697),ge=n(96354);const ke=[{path:"",component:_e},{path:"add-tickets",canActivate:[(r,f)=>{const l=(0,e.WQX)(C.Ix),u=(0,e.WQX)(fe.D),h="admin"===localStorage.getItem("userRole");return u.user$.pipe((0,he.s)(1),(0,ge.T)(b=>!(!h&&"Active Shift"!==b.shift_status)||l.parseUrl("/dashboards/tickets")))}],loadChildren:()=>Promise.all([n.e(6233),n.e(2076),n.e(789)]).then(n.bind(n,10789))},{path:":trackingId",loadChildren:()=>Promise.all([n.e(6233),n.e(1526)]).then(n.bind(n,21526))},{path:"places/:places_name",loadChildren:()=>n.e(4922).then(n.bind(n,44922))},{path:"category/:category_name",loadChildren:()=>n.e(6123).then(n.bind(n,66123))},{path:"users/:users_name",loadChildren:()=>n.e(6036).then(n.bind(n,86036))}]},48807:(W,$,n)=>{n.d($,{X:()=>I});var C=n(10467),g=n(54438),e=n(3366),k=n(45794);let I=(()=>{class D{constructor(x,y){this._apiService=x,this._toastService=y,this._data=(0,g.vPA)([]),this.isLoading=(0,g.vPA)(!1),this.isNotFound=(0,g.vPA)(!1)}fetchData(){var x=this;return(0,C.A)(function*(){x.isLoading.set(!0),x._apiService.get("api/V1/tickets/temp").then(function(){var y=(0,C.A)(function*(F){x.isLoading.set(!1),x.isNotFound.set(!1),x._data.set(F.data),null!==F.data&&0!=F.data.length||x.isNotFound.set(!0)});return function(F){return y.apply(this,arguments)}}()).catch(function(){var y=(0,C.A)(function*(F){x.isLoading.set(!1),x.isNotFound.set(!0),x._toastService.error("Failed to fetch data","Error")});return function(F){return y.apply(this,arguments)}}())})()}static{this.\u0275fac=function(y){return new(y||D)(g.KVO(e.G),g.KVO(k.tw))}}static{this.\u0275prov=g.jDH({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})()},68676:(W,$,n)=>{n.d($,{U:()=>Xe});var C=n(10467),g=n(60177),e=n(54438),k=n(89417),I=n(82765),D=n(86600),w=n(25084),x=n(75351),y=n(53719),F=n(99213),L=n(59042),d=n(59115),c=n(96695),_=n(82798),V=n(2042),S=n(9159),J=n(21413),G=n(88834),K=n(74710),z=n(40171),Q=n(5271),O=n(62288),Y=n(3366),Z=n(45794),U=n(35883),X=n(10801),q=n(46601);let ee=(()=>{class a{constructor(t,o,i,m,T,j,E){this._apiService=t,this.toast=o,this._ticketTableSerivce=i,this._ticketLogsTableService=m,this.fuseConfirmationService=T,this.dialogRef=j,this.data=E,this.isLoading=!1,this.excelData=[],this.selectedFile=null}ngOnInit(){}formatDate(t){const o=new Date(t.getTime()+6e4*t.getTimezoneOffset());return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()+1).padStart(2,"0")}`}formatTime(t){return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}onFileChange(t){const o=t.target.files[0];if(o){this.selectedFile=o;const i=new FileReader;i.onload=m=>{const T=new Uint8Array(m.target.result),j=O.LF(T,{type:"array",cellDates:!0});this.excelData=O.Wp.sheet_to_json(j.Sheets[j.SheetNames[0]]),this.excelData=this.excelData.map(v=>({...v,hari_masuk:v.hari_masuk instanceof Date?this.formatDate(v.hari_masuk):v.hari_masuk,hari_respon:v.hari_respon instanceof Date?this.formatDate(v.hari_respon):v.hari_respon,waktu_masuk:v.waktu_masuk instanceof Date?this.formatTime(v.waktu_masuk):v.waktu_masuk,waktu_respon:v.waktu_respon instanceof Date?this.formatTime(v.waktu_respon):v.waktu_respon})),console.log("Formatted Excel Data:",this.excelData)},i.readAsArrayBuffer(o)}}onSubmit(){var t=this;return(0,C.A)(function*(){if(t.selectedFile)if(t.excelData&&0!==t.excelData.length)try{t.isLoading=!0,console.log(t.excelData);const{status:i}=yield t._apiService.post("api/V1/tickets/excel",t.excelData);if(201===i)return t.toast.success("Success Create Tickets","Success"),t._ticketTableSerivce.fetchData(),t._ticketLogsTableService.fetchDatas(),t.dialogRef.close(),void(t.isLoading=!1);if(500===i)return t.toast.error("Internal Server Error","Failed"),t.dialogRef.close(),void(t.isLoading=!1);if(409===i)t.isLoading=!1,t.fuseConfirmationService.open({title:"Notification",message:"The Tickets already exists on the server. Would you like to create another Tickets time anyway?",icon:{color:"info"},actions:{confirm:{label:"Confirmation",color:"primary"}}});else if(400===i)return t.toast.error("Bad Request","Failed"),t.dialogRef.close(),void(t.isLoading=!1)}catch(o){throw o}else t.toast.warning("The selected file is empty or invalid.","Warning");else t.toast.warning("Please select a file before submitting.","Warning")})()}static{this.\u0275fac=function(o){return new(o||a)(e.rXU(Y.G),e.rXU(Z.tw),e.rXU(U.M),e.rXU(X.j),e.rXU(q.G),e.rXU(x.CP),e.rXU(x.Vh))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-import-excel"]],standalone:!0,features:[e.aNF],decls:26,vars:2,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","items-start","w-full","justify-between"],[1,"mb-2","text-2xl","font-semibold","sm:mb-0"],[1,"text-sm","text-gray-500"],["href","files/template_ticket_import.xlsx","download","",1,"text-blue-600","underline"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,""],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","px-8","py-4","pb-4","gap-5"],[1,"flex","flex-col","gap-2"],["for","excelFile",1,"text-sm","font-medium","text-gray-700","mb-1"],[1,"flex","items-center","border","border-gray-300","rounded-lg","px-4","py-2","cursor-pointer","hover:border-blue-500"],["type","file","id","excelFile","accept",".xlsx, .xls",1,"hidden",3,"change"],["for","excelFile",1,"flex-1","text-gray-600","cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M12 12v6m0 0l3-3m-3 3l-3-3M16 8V4H8v4"],["type","submit",1,"bg-green-600","text-white","p-2","rounded",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4,"Import Excel"),e.k0s(),e.j41(5,"p",4),e.EFF(6," Upload an Excel file. "),e.j41(7,"a",5),e.EFF(8,"Download here"),e.k0s(),e.EFF(9,". "),e.k0s()(),e.j41(10,"a",6),e.bIt("click",function(){return i.dialogRef.close()}),e.nrm(11,"mat-icon",7),e.k0s()(),e.nrm(12,"ion-loading",8),e.j41(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),e.EFF(17,"Upload Excel File"),e.k0s(),e.j41(18,"div",13)(19,"input",14),e.bIt("change",function(T){return i.onFileChange(T)}),e.k0s(),e.j41(20,"label",15),e.EFF(21),e.k0s(),e.qSk(),e.j41(22,"svg",16),e.nrm(23,"path",17),e.k0s()()(),e.joV(),e.j41(24,"button",18),e.bIt("click",function(){return i.onSubmit()}),e.EFF(25," Import Excel "),e.k0s()()()()),2&o&&(e.R7$(12),e.Y8G("isOpen",i.isLoading),e.R7$(9),e.SpI(" ",i.selectedFile?i.selectedFile.name:"Choose Excel file..."," "))},dependencies:[k.X1,k.qT,k.cb,k.YN,k.cV,y.RG,L.fS,G.Hl,F.m_,F.An,Q.rQ,w.X6,D.Sy,_.Ve,g.MD]})}}return a})();const te=()=>["/dashboards/tickets/add-tickets"],M=()=>({disableClose:!0}),ae=()=>[5,10,20],ie=(a,s,t,o)=>({"bg-blue-500":a,"bg-yellow-500":s,"bg-[#7D7D7D]":t,"bg-green-500":o}),H=(a,s,t,o)=>({"text-green-600":a,"text-blue-600":s,"text-yellow-600":t,"text-red-600":o}),ne=a=>["/dashboards/tickets",a];function oe(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",54),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.importExcel())}),e.nrm(1,"mat-icon",55),e.j41(2,"span"),e.EFF(3,"Import Excel"),e.k0s()()}}function se(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const m=e.eBV(t).$implicit;return e.DH7(m.checked,i)||(m.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyProductsFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=s.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.SpI(" ",t.name," ")}}function re(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const m=e.eBV(t).$implicit;return e.DH7(m.checked,i)||(m.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyPlacesFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=s.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.SpI(" ",t.name," ")}}function le(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",57),e.mxI("ngModelChange",function(i){const m=e.eBV(t).$implicit;return e.DH7(m.checked,i)||(m.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyCategoryFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=s.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.JRh(t.name)}}function ce(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const m=e.eBV(t).$implicit;return e.DH7(m.checked,i)||(m.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyStatusFilter())}),e.j41(1,"div",58)(2,"h1",59),e.EFF(3),e.k0s()()()}if(2&a){const t=s.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.Y8G("ngClass",e.ziG(3,ie,"New"===t.name,"On Progress"===t.name,"Hold"===t.name,"Resolved"===t.name)),e.R7$(2),e.JRh(t.name)}}function me(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const m=e.eBV(t).$implicit;return e.DH7(m.checked,i)||(m.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyPriorityFilter())}),e.j41(1,"div",19),e.nrm(2,"mat-icon",60),e.j41(3,"h1",61),e.EFF(4),e.k0s()()()}if(2&a){const t=s.$implicit;e.R50("ngModel",t.checked),e.R7$(2),e.Y8G("ngClass",e.ziG(3,H,"Low"===t.name,"Hedium"===t.name,"High"===t.name,"Critical"===t.name)),e.R7$(2),e.JRh(t.name)}}function de(a,s){1&a&&(e.j41(0,"div",62),e.nrm(1,"div",63)(2,"div",63)(3,"div",63)(4,"div",63)(5,"div",63)(6,"div",63)(7,"div",64),e.k0s())}function ue(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Tracking ID "),e.k0s())}function pe(a,s){if(1&a&&(e.j41(0,"mat-cell",92)(1,"a",93),e.EFF(2),e.k0s()()),2&a){const t=s.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(2,ne,t.tracking_id)),e.R7$(),e.JRh(t.tracking_id)}}function _e(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Ticket Entry Day "),e.k0s())}function fe(a,s){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",94),e.EFF(2),e.k0s()),2&a){const t=s.$implicit;e.R7$(2),e.SpI(" ",t.hari_masuk," ")}}function he(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Ticket Entry Time "),e.k0s())}function ge(a,s){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",95),e.EFF(2),e.k0s()),2&a){const t=s.$implicit;e.R7$(2),e.SpI(" ",t.waktu_masuk," ")}}function ve(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Place "),e.k0s())}function ke(a,s){if(1&a&&(e.j41(0,"mat-cell",96),e.EFF(1),e.k0s()),2&a){let t;const o=s.$implicit;e.R7$(),e.SpI(" ",null!==(t=o.places_name)&&void 0!==t?t:"Not Found"," ")}}function r(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Category "),e.k0s())}function f(a,s){if(1&a&&(e.j41(0,"mat-cell",96),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",t.category," ")}}function l(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Users "),e.k0s())}function u(a,s){1&a&&(e.j41(0,"div",62),e.nrm(1,"div",63),e.k0s())}function h(a,s){if(1&a&&(e.j41(0,"mat-cell",97)(1,"div",98),e.nrm(2,"img",99),e.j41(3,"p",59),e.EFF(4),e.k0s()()()),2&a){const t=s.$implicit;e.R7$(2),e.Y8G("src",t.user.avatar,e.B4B),e.R7$(2),e.JRh(t.user.name)}}function b(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," PIC "),e.k0s())}function P(a,s){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",""==(null==t?null:t.pic)||null==(null==t?null:t.pic)?"Not Found":t.pic," ")}}function xe(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Subject "),e.k0s())}function Fe(a,s){if(1&a&&(e.j41(0,"mat-cell",100),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",t.subject," ")}}function be(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Whatsapp Client "),e.k0s())}function ye(a,s){if(1&a&&(e.j41(0,"mat-cell")(1,"a",101),e.EFF(2),e.k0s()()),2&a){const t=s.$implicit;e.R7$(),e.Y8G("href","https://wa.me/"+(null==t?null:t.no_whatsapp),e.B4B),e.R7$(),e.SpI(" ",""===(null==t?null:t.no_whatsapp)?"Not Found":t.no_whatsapp," ")}}function Ce(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Status "),e.k0s())}function Se(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-option",106),e.bIt("click",function(){const i=e.eBV(t).$implicit,m=e.XpG().$implicit,T=e.XpG(2);return e.Njj(T.changeStatus(m.tracking_id,i))}),e.EFF(1),e.k0s()}if(2&a){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function De(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-cell",102)(1,"mat-form-field",103)(2,"mat-select",104),e.mxI("valueChange",function(i){const m=e.eBV(t).$implicit;return e.DH7(m.status,i)||(m.status=i),e.Njj(i)}),e.DNE(3,Se,2,2,"mat-option",105),e.k0s()()()}if(2&a){const t=s.$implicit,o=e.XpG(2);e.R7$(2),e.R50("value",t.status),e.Y8G("disabled",!o.isAdmin&&(o.shiftStatus||"Resolved"===(null==t?null:t.status))),e.R7$(),e.Y8G("ngForOf",o.statusList)}}function je(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Solved Time "),e.k0s())}function we(a,s){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",""===t.solved_time||null===t.solved_time?"On Progress":t.solved_time,"")}}function Ee(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Last Replier "),e.k0s())}function Re(a,s){1&a&&(e.j41(0,"div",62),e.nrm(1,"div",63),e.k0s())}function Ie(a,s){if(1&a&&(e.j41(0,"mat-cell",107)(1,"div",98),e.nrm(2,"img",108),e.j41(3,"p",59),e.EFF(4),e.k0s()()()),2&a){const t=s.$implicit;e.R7$(2),e.Y8G("src",null===t.last_replier?t.user.avatar:t.last_replier.avatar,e.B4B),e.R7$(2),e.JRh(null===t.last_replier?t.user.name:t.last_replier.name)}}function Ne(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Priority "),e.k0s())}function $e(a,s){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",60),e.j41(2,"h1",61),e.EFF(3),e.k0s()()),2&a){const t=s.$implicit;e.R7$(),e.Y8G("ngClass",e.ziG(2,H,"Low"===t.priority,"Medium"===t.priority,"High"===t.priority,"Critical"===t.priority)),e.R7$(2),e.JRh(t.priority)}}function Le(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Date "),e.k0s())}function Me(a,s){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",94),e.EFF(2),e.k0s()),2&a){const t=s.$implicit;e.R7$(2),e.SpI(" ",t.created_date," ")}}function Ge(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Time "),e.k0s())}function Ve(a,s){if(1&a&&(e.j41(0,"mat-cell",19),e.nrm(1,"mat-icon",95),e.EFF(2),e.k0s()),2&a){const t=s.$implicit;e.R7$(2),e.SpI(" ",t.created_time," ")}}function Pe(a,s){1&a&&e.nrm(0,"mat-header-row")}function Ae(a,s){1&a&&e.nrm(0,"mat-row")}function Be(a,s){if(1&a&&(e.j41(0,"mat-table",65,9)(2,"div"),e.qex(3,66),e.DNE(4,ue,2,0,"mat-header-cell",67)(5,pe,3,4,"mat-cell",68),e.bVm(),e.qex(6,69),e.DNE(7,_e,2,0,"mat-header-cell",67)(8,fe,3,1,"mat-cell",70),e.bVm(),e.qex(9,71),e.DNE(10,he,2,0,"mat-header-cell",67)(11,ge,3,1,"mat-cell",70),e.bVm(),e.qex(12,72),e.DNE(13,ve,2,0,"mat-header-cell",67)(14,ke,2,1,"mat-cell",73),e.bVm(),e.qex(15,74),e.DNE(16,r,2,0,"mat-header-cell",67)(17,f,2,1,"mat-cell",73),e.bVm(),e.qex(18,75),e.DNE(19,l,2,0,"mat-header-cell",67)(20,u,2,0,"div",49)(21,h,5,2,"mat-cell",76),e.bVm(),e.qex(22,77),e.DNE(23,b,2,0,"mat-header-cell",67)(24,P,2,1,"mat-cell",78),e.bVm(),e.qex(25,79),e.DNE(26,xe,2,0,"mat-header-cell",67)(27,Fe,2,1,"mat-cell",80),e.bVm(),e.qex(28,81),e.DNE(29,be,2,0,"mat-header-cell",67)(30,ye,3,2,"mat-cell",78),e.bVm(),e.qex(31,82),e.DNE(32,Ce,2,0,"mat-header-cell",67)(33,De,4,3,"mat-cell",83),e.bVm(),e.qex(34,84),e.DNE(35,je,2,0,"mat-header-cell",67)(36,we,2,1,"mat-cell",78),e.bVm(),e.qex(37,85),e.DNE(38,Ee,2,0,"mat-header-cell",67)(39,Re,2,0,"div",49)(40,Ie,5,2,"mat-cell",86),e.bVm(),e.qex(41,87),e.DNE(42,Ne,2,0,"mat-header-cell",67)(43,$e,4,7,"mat-cell",70),e.bVm(),e.qex(44,88),e.DNE(45,Le,2,0,"mat-header-cell",67)(46,Me,3,1,"mat-cell",70),e.bVm(),e.qex(47,89),e.DNE(48,Ge,2,0,"mat-header-cell",67)(49,Ve,3,1,"mat-cell",70),e.bVm(),e.DNE(50,Pe,1,0,"mat-header-row",90)(51,Ae,1,0,"mat-row",91),e.k0s()()),2&a){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(20),e.Y8G("ngIf",t.isLoading),e.R7$(19),e.Y8G("ngIf",t.isLoading),e.R7$(11),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}function Oe(a,s){1&a&&(e.j41(0,"div",109)(1,"div",110),e.nrm(2,"img",111)(3,"br"),e.j41(4,"p",112),e.EFF(5,"Data Not Found"),e.k0s(),e.j41(6,"p",113),e.EFF(7,"try using a different keyword or add a new tickets"),e.k0s()()())}const Te=new Date,Ye=Te.getMonth(),Ue=Te.getFullYear();Te.getDay();let Xe=(()=>{class a{constructor(t,o,i,m,T){this._apiService=t,this.cdr=o,this._ticketLogsService=i,this._ticketTableService=m,this._matDialog=T,this.filterValues={search:"",category:[],products:[],places:[],status:[],priority:[]},this.shiftStatus=!0,this.ticketStatus=!1,this.isAdmin="admin"===localStorage.getItem("userRole"),this.statusList=["New","Hold","On Progress","Resolved"],this.productsItems=[],this.category=[],this.statusItems=[],this.priorityItems=[],this.placesItems=[],this._unsubscribeAll=new J.B,this.displayedColumns=["tracking_id","hari_masuk","waktu_masuk","place","name","category","subject","pic","no_whatsapp","status","solved_time","last_replier","priority","create_date","create_time"],this.dataSource=new S.I6,this.range=new k.gE({start:new k.MJ(new Date(Ue,Ye-1)),end:new k.MJ(new Date)}),this._ticketTableService.checkTickets(),(0,e.QZP)(()=>{const j=this.datas,E=new Set,R=new Set,v=new Set,A=new Set,B=new Set;j.forEach(p=>{p.products_name&&(Array.isArray(p.products_name)?p.products_name.forEach(N=>A.add(N)):A.add(p.products_name)),p.places_name&&(Array.isArray(p.places_name)?p.places_name.forEach(N=>B.add(N)):B.add(p.places_name)),p.category&&(Array.isArray(p.category)?p.category.forEach(N=>E.add(N)):(E.add(p.category),R.add(p.status))),p.status&&(Array.isArray(p.status)?p.status.forEach(N=>R.add(N)):R.add(p.status)),p.priority&&(Array.isArray(p.priority)?p.priority.forEach(N=>v.add(N)):v.add(p.priority)),p.subject||(p.subject="Subject Not Found")}),this.statusItems=[...R].map(p=>({name:p,checked:!1})),this.category=[...E].map(p=>({name:p,checked:!1})),this.priorityItems=[...v].map(p=>({name:p,checked:!1})),this.productsItems=[...A].map(p=>({name:p,checked:!1})),this.placesItems=[...B].map(p=>({name:p,checked:!1})),this.dataSource.data=0!==this._ticketTableService._datas().length?j.map(p=>({...p,originalStatus:p.status})):[]})}get datas(){return this._ticketTableService._datas()}get isLoading(){return this._ticketTableService.isLoading()}get isNotFound(){return this._ticketTableService.isNotFound()}ngOnInit(){this.fetchUsers(),this.range.valueChanges.subscribe(({start:t,end:o})=>{if(o){const i=t instanceof Date?t:new Date(t),m=o instanceof Date?o:new Date(o);this._ticketTableService.fetchDataByDate(i.toLocaleDateString("en-CA"),m.toLocaleDateString("en-CA"))}})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}importExcel(){this._matDialog.open(ee,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}generateReport(){this._matDialog.open(z.E,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}fetchUsers(){var t=this;return(0,C.A)(function*(){try{const o=yield t._apiService.get("api/V1/get-profile");t.shiftStatus="Active Shift"!==o.data.shift_status,t.cdr.detectChanges()}catch(o){throw o}})()}applyFilter(){this.dataSource.filterPredicate=(t,o)=>{let i=JSON.parse(o);console.log(t);let m=""===i.search||t.tracking_id.toLowerCase().includes(i.search)||t.created_date.toLowerCase().includes(i.search)||t.created_time.toLowerCase().includes(i.search)||t.hari_masuk.toLowerCase().includes(i.search)||t.waktu_masuk.toLowerCase().includes(i.search)||t.products_name.toLowerCase().includes(i.search)||t.pic.toLowerCase().includes(i.search)||t.category.toLowerCase().includes(i.search)||t.subject.toLowerCase().includes(i.search)||t.status.toLowerCase().includes(i.search)||t.priority.toLowerCase().includes(i.search)||t.places_name.toLowerCase().includes(i.search)||t.no_whatsapp.toLowerCase().includes(i.search)||t.user?.name.toLowerCase().includes(i.search)||t.last_replier?.name.toLowerCase().includes(i.search),T=0===i.category.length||i.category.includes(t.category.toLowerCase()),j=0===i.status.length||i.status.includes(t.status.toLowerCase()),E=0===i.priority.length||i.priority.includes(t.priority.toLowerCase()),R=0===i.products.length||i.products.includes(t.products_name.toLowerCase()),v=0===i.places.length||i.places.includes((t.places_name||"").toLowerCase());return m&&T&&j&&E&&R&&v},this.dataSource.filter=JSON.stringify(this.filterValues)}applySearchFilter(t){this.filterValues.search=t.trim().toLowerCase(),this.applyFilter()}applyProductsFilter(){this.filterValues.products=this.productsItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyPlacesFilter(){this.filterValues.places=this.placesItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyCategoryFilter(){this.filterValues.category=this.category.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyStatusFilter(){this.filterValues.status=this.statusItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyPriorityFilter(){this.filterValues.priority=this.priorityItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}onStatusChange(t,o){t!==o.originalStatus&&(console.log("Status changed:",t),this.changeStatus(o.tracking_id,t))}changeStatus(t,o){var i=this;return(0,C.A)(function*(){try{const{status:m}=yield i._apiService.post(`api/V1/ticket-status/${t}`,{status:o});200===m&&(i._ticketLogsService.fetchDatas(),i._ticketTableService.fetchData())}catch(m){throw m}})()}static{this.\u0275fac=function(o){return new(o||a)(e.rXU(Y.G),e.rXU(e.gRc),e.rXU(X.j),e.rXU(U.M),e.rXU(x.bZ))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-ticket"]],viewQuery:function(o,i){if(1&o&&(e.GBs(V.B4,5),e.GBs(c.iy,5)),2&o){let m;e.mGM(m=e.lsd())&&(i.sort=m.first),e.mGM(m=e.lsd())&&(i.paginator=m.first)}},standalone:!0,features:[e.aNF],decls:97,vars:40,consts:[["addUserMenu","matMenu"],["picker",""],["menu","matMenu"],["products","matMenu"],["places","matMenu"],["categorys","matMenu"],["status","matMenu"],["priority","matMenu"],["paginator",""],["table",""],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","flex-col","items-start","lg:flex-row","sm:items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Tickets",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],[1,"flex","items-center","gap-3"],["mat-raised-button","",1,"flex","w-fit","text-nowrap","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","text-white",3,"disabled","matMenuTriggerFor","ngClass"],[1,"flex","items-center","gap-1"],[1,"m-2","pr-4","border-r-[1px]"],["svgIcon","keyboard_arrow_down",1,"font-bold","text-2xl"],["mat-menu-item","",3,"routerLink"],["svgIcon","mat_outline:add",1,"icon-size-5"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-raised-button","",1,"flex","w-fit","text-nowrap","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","bg-red-500","text-white",3,"click"],["svgIcon","mat_solid:picture_as_pdf",1,"text-white"],[1,"max-sm:hidden","font-semibold"],[1,"min-w-[300px]","max-w-full","self-end","hidden","sm:block"],[1,"w-full",3,"rangePicker","formGroup"],["matStartDate","","formControlName","start","placeholder","Start date",1,"w-full"],["matEndDate","","formControlName","end","placeholder","End date",1,"w-full"],["matSuffix","",3,"for"],["touchUi",""],[1,"flex","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","border-[1px]","text-white",3,"matMenuTriggerFor"],["svgIcon","filter_alt"],[1,"max-sm:hidden","font-semibold","text-black"],["svgIcon","keyboard_arrow_down"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"min-w-[300px]"],[1,"px-5","py-3","w-full"],[1,"font-semibold","mb-2"],[1,"px-5","flex","flex-col","gap-2","w-full"],["class","h-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],["class","h-full w-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],[1,"px-5","py-3"],[1,"min-w-[300px]","max-w-full","pt-4","self-start","sm:hidden","block"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-[2480px]",3,"dataSource",4,"ngIf"],["class","py-10",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mat-menu-item","",3,"click"],["svgIcon","mat_outline:upload_file",1,"icon-size-5"],[1,"h-full",3,"ngModelChange","click","change","ngModel"],[1,"h-full","w-full",3,"ngModelChange","click","change","ngModel"],[1,"px-3","py-1","text-white","whitespace-nowrap","rounded-full",3,"ngClass"],[1,"font-medium"],["svgIcon","mat_outline:bookmark",1,"-rotate-90",3,"ngClass"],[1,"font-medium","uppercase"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],["matSort","",1,"min-w-[2480px]",3,"dataSource"],["matColumnDef","tracking_id"],[4,"matHeaderCellDef"],["class","text-lg text-blue-600 font-medium underline whitespace-nowrap",4,"matCellDef"],["matColumnDef","hari_masuk"],["class","flex items-center gap-3",4,"matCellDef"],["matColumnDef","waktu_masuk"],["matColumnDef","place"],["class","flex items-center gap-3 font-medium",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","name"],["class","py-3.5 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","pic"],[4,"matCellDef"],["matColumnDef","subject"],["class","font-bold text-lg",4,"matCellDef"],["matColumnDef","no_whatsapp"],["matColumnDef","status"],["class","py-4 w-full",4,"matCellDef"],["matColumnDef","solved_time"],["matColumnDef","last_replier"],["class","py-2 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","priority"],["matColumnDef","create_date"],["matColumnDef","create_time"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","text-blue-600","font-medium","underline","whitespace-nowrap"],[3,"routerLink"],["svgIcon","mat_solid:date_range"],["svgIcon","mat_outline:access_time"],[1,"flex","items-center","gap-3","font-medium"],[1,"py-3.5","flex","items-center","gap-3","w-fit"],[1,"w-full","flex","items-center","gap-3"],["alt","",1,"w-7","h-7","object-cover","rounded-full",3,"src"],[1,"font-bold","text-lg"],["target","_blank",3,"href"],[1,"py-4","w-full"],["hideRequiredMarker","",1,"w-full"],["placeholder","Select",3,"valueChange","value","disabled"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value","click",4,"ngFor","ngForOf"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"click","value"],[1,"py-2","flex","items-center","gap-3","w-fit"],["alt","",1,"w-7","h-7","rounded-full",3,"src"],[1,"py-10"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"text-lg","font-semibold"],[1,"text-sm"]],template:function(o,i){if(1&o){const m=e.RV6();e.j41(0,"section",10)(1,"div",11)(2,"div",12)(3,"label",13),e.EFF(4,"Search"),e.k0s(),e.j41(5,"div",14)(6,"div",15),e.qSk(),e.j41(7,"svg",16),e.nrm(8,"path",17),e.k0s()(),e.joV(),e.j41(9,"input",18),e.bIt("keyup",function(j){return e.eBV(m),e.Njj(i.applySearchFilter(j.target.value))}),e.k0s()()(),e.j41(10,"div",19)(11,"button",20)(12,"div",21)(13,"span",22),e.EFF(14,"New Tickets"),e.k0s(),e.nrm(15,"mat-icon",23),e.k0s()(),e.j41(16,"mat-menu",null,0)(18,"button",24),e.nrm(19,"mat-icon",25),e.j41(20,"span"),e.EFF(21,"Add Tickets"),e.k0s()(),e.DNE(22,oe,4,0,"button",26),e.k0s(),e.j41(23,"button",27),e.bIt("click",function(){return e.eBV(m),e.Njj(i.generateReport())}),e.nrm(24,"mat-icon",28),e.j41(25,"span",29),e.EFF(26,"Generate Report"),e.k0s()(),e.j41(27,"mat-form-field",30)(28,"mat-date-range-input",31),e.nrm(29,"input",32)(30,"input",33),e.k0s(),e.nrm(31,"mat-datepicker-toggle",34)(32,"mat-date-range-picker",35,1),e.k0s(),e.j41(34,"button",36),e.nrm(35,"mat-icon",37),e.j41(36,"span",38),e.EFF(37,"Filter"),e.k0s(),e.nrm(38,"mat-icon",39),e.k0s(),e.j41(39,"mat-menu",null,2)(41,"button",40),e.EFF(42,"Products"),e.k0s(),e.j41(43,"button",40),e.EFF(44,"Places"),e.k0s(),e.j41(45,"button",40),e.EFF(46,"Category"),e.k0s(),e.j41(47,"button",40),e.EFF(48,"Status"),e.k0s(),e.j41(49,"button",40),e.EFF(50,"Priority"),e.k0s(),e.j41(51,"mat-menu",41,3)(53,"div",42)(54,"h1",43),e.EFF(55,"Choose Products"),e.k0s()(),e.j41(56,"div",44),e.DNE(57,se,2,2,"mat-checkbox",45),e.k0s()(),e.j41(58,"mat-menu",41,4)(60,"div",42)(61,"h1",43),e.EFF(62,"Choose Places"),e.k0s()(),e.j41(63,"div",44),e.DNE(64,re,2,2,"mat-checkbox",45),e.k0s()(),e.j41(65,"mat-menu",41,5)(67,"div",42)(68,"h1",43),e.EFF(69,"Choose Category"),e.k0s()(),e.j41(70,"div",44),e.DNE(71,le,2,2,"mat-checkbox",46),e.k0s()(),e.j41(72,"mat-menu",null,6)(74,"div",47)(75,"h1",43),e.EFF(76,"Choose status"),e.k0s()(),e.DNE(77,ce,4,8,"mat-checkbox",45),e.k0s(),e.j41(78,"mat-menu",null,7)(80,"div",47)(81,"h1",43),e.EFF(82,"Choose Priority"),e.k0s()(),e.DNE(83,me,5,8,"mat-checkbox",45),e.k0s()()(),e.j41(84,"mat-form-field",48)(85,"mat-date-range-input",31),e.nrm(86,"input",32)(87,"input",33),e.k0s(),e.nrm(88,"mat-datepicker-toggle",34)(89,"mat-date-range-picker",null,1),e.k0s()(),e.DNE(91,de,8,0,"div",49),e.j41(92,"div",50),e.DNE(93,Be,52,5,"mat-table",51),e.k0s(),e.DNE(94,Oe,8,0,"div",52),e.nrm(95,"mat-paginator",53,8),e.k0s()}if(2&o){const m=e.sdS(17),T=e.sdS(33),j=e.sdS(40),E=e.sdS(52),R=e.sdS(59),v=e.sdS(66),A=e.sdS(73),B=e.sdS(79);e.R7$(11),e.Y8G("disabled",i.shiftStatus&&!i.isAdmin)("matMenuTriggerFor",m)("ngClass",i.shiftStatus&&!i.isAdmin?"bg-gray-400":"bg-primary"),e.R7$(7),e.Y8G("routerLink",e.lJ4(33,te)),e.R7$(4),e.Y8G("ngIf",i.isAdmin),e.R7$(6),e.Y8G("rangePicker",T)("formGroup",i.range),e.R7$(3),e.Y8G("for",T),e.R7$(3),e.Y8G("matMenuTriggerFor",j),e.R7$(7),e.Y8G("matMenuTriggerFor",E)("matMenuTriggerData",e.lJ4(34,M)),e.R7$(2),e.Y8G("matMenuTriggerFor",R)("matMenuTriggerData",e.lJ4(35,M)),e.R7$(2),e.Y8G("matMenuTriggerFor",v)("matMenuTriggerData",e.lJ4(36,M)),e.R7$(2),e.Y8G("matMenuTriggerFor",A)("matMenuTriggerData",e.lJ4(37,M)),e.R7$(2),e.Y8G("matMenuTriggerFor",B)("matMenuTriggerData",e.lJ4(38,M)),e.R7$(8),e.Y8G("ngForOf",i.productsItems),e.R7$(7),e.Y8G("ngForOf",i.placesItems),e.R7$(7),e.Y8G("ngForOf",i.category),e.R7$(6),e.Y8G("ngForOf",i.statusItems),e.R7$(6),e.Y8G("ngForOf",i.priorityItems),e.R7$(2),e.Y8G("rangePicker",T)("formGroup",i.range),e.R7$(3),e.Y8G("for",T),e.R7$(3),e.Y8G("ngIf",i.isLoading),e.R7$(2),e.Y8G("ngIf",!i.isLoading),e.R7$(),e.Y8G("ngIf",i.isNotFound&&!i.isLoading),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(39,ae))("showFirstLastButtons",!0)}},dependencies:[g.MD,g.YU,g.Sq,g.bT,c.Ou,c.iy,x.hM,S.tP,S.Zl,S.tL,S.ji,S.cC,S.YV,S.iL,S.KS,S.$R,S.YZ,S.NB,k.X1,k.me,k.BC,k.cb,k.j4,k.JD,L.fS,L.fg,y.rl,y.yw,V.NQ,V.B4,F.An,d.Cn,d.kk,d.fb,d.Cp,I.g7,I.So,k.YN,k.vS,y.RG,w.X6,w.bU,w.el,w.xR,w.IG,w.SG,_.Ve,_.VO,D.wT,D.Sy,G.Hl,G.$z,K.Wk],styles:[".mat-mdc-form-field-subscript-wrapper{display:none!important}",".mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%] {\n        display: none;\n    }"]})}}return a})()},35883:(W,$,n)=>{n.d($,{M:()=>y});var C=n(10467),g=n(54438),e=n(84412),k=n(86648),I=n(88141),D=n(3366),w=n(45794),x=n(64394);let y=(()=>{class F{constructor(d,c,_){this._apiService=d,this._toastService=c,this._analyticsService=_,this._data=new e.t(null),this._datas=(0,g.vPA)([]),this.sumarry=(0,g.vPA)(null),this.isLoading=(0,g.vPA)(!0),this.isNotFound=(0,g.vPA)(!1)}get data$(){return this._data.asObservable()}get currentProducts$(){return this._analyticsService.currentProducts()}Update(d){this._data.next(d)}checkTickets(){return(0,k.H)(this._apiService.get("api/V1/check-tickets-deadline")).pipe((0,I.M)(d=>{console.log(d)}))}fetchDataByDate(d,c){this.isLoading.set(!0),this._apiService.get(`api/V1/tickets-date?start_date=${d}&end_date=${c}`).then(_=>{this.isLoading.set(!1),this.isNotFound.set(!1),this._datas.set(_.data),null!==_.data&&0!=_.data.length||this.isNotFound.set(!0)}).catch(_=>{this.isLoading.set(!1),this.isNotFound.set(!0),this._toastService.error("Failed to fetch data","Error")})}fetchData(){var d=this;return(0,C.A)(function*(){d.isLoading.set(!0),d._apiService.get("api/V1/tickets").then(c=>{d.isLoading.set(!1),d.isNotFound.set(!1),d._datas.set(c.data),null!==c.data&&0!=c.data.length||d.isNotFound.set(!0)}).catch(c=>{d.isLoading.set(!1),d.isNotFound.set(!0),d._toastService.error("Failed to fetch data","Error")})})()}fetchDataByPlaces(d){var c=this;return(0,C.A)(function*(){c.isLoading.set(!0),c._apiService.post("api/V1/statistik/places",{places_name:d}).then(_=>{c.isLoading.set(!1),c.isNotFound.set(!1),c.sumarry.set(_.data.data.sumary),c._datas.set(_.data.data.tickets),null!==_.data&&0!=_.data.length||c.isNotFound.set(!0)}).catch(_=>{c.isLoading.set(!1),c.isNotFound.set(!0),c._toastService.error("Failed to fetch data","Error")})})()}fetchDataByCategory(d){var c=this;return(0,C.A)(function*(){c.isLoading.set(!0),c._apiService.post("api/V1/statistik/category",{category_name:d}).then(_=>{c.isLoading.set(!1),c.isNotFound.set(!1),c.sumarry.set(_.data.data.sumary),c._datas.set(_.data.data.tickets),null!==_.data&&0!=_.data.length||c.isNotFound.set(!0)}).catch(_=>{c.isLoading.set(!1),c.isNotFound.set(!0),c._toastService.error("Failed to fetch data","Error")})})()}fetchDataByUsers(d){var c=this;return(0,C.A)(function*(){c.isLoading.set(!0),c._apiService.post("api/V1/statistik/user",{name:d,product_name:c.currentProducts$}).then(_=>{c.isLoading.set(!1),c.isNotFound.set(!1),c.sumarry.set(_.data.data.sumary),c._datas.set(_.data.data.tickets),null!==_.data&&0!=_.data.length||c.isNotFound.set(!0)}).catch(_=>{c.isLoading.set(!1),c.isNotFound.set(!0),c._toastService.error("Failed to fetch data","Error")})})()}static{this.\u0275fac=function(c){return new(c||F)(g.KVO(D.G),g.KVO(w.tw),g.KVO(x.c))}}static{this.\u0275prov=g.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}}return F})()}}]);