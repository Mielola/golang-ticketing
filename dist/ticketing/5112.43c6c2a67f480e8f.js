"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[5112],{85112:(A,j,r)=>{r.r(j),r.d(j,{default:()=>ht});var F=r(74710),p=r(10467),e=r(54438),x=r(60177),_=r(89417),T=r(82765),C=r(75351),u=r(59042),f=r(59115),k=r(96695),c=r(2042),l=r(9159),y=r(99213),U=r(48807),B=r(46601),I=r(3366),P=r(45794),$=r(35883),N=r(10801);const X=()=>[5,10,20];function W(a,o){1&a&&(e.j41(0,"div",18),e.nrm(1,"div",19)(2,"div",19)(3,"div",19)(4,"div",19)(5,"div",19)(6,"div",19)(7,"div",20),e.k0s())}function H(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Tracking ID "),e.k0s())}function J(a,o){if(1&a&&(e.j41(0,"mat-cell",36)(1,"a"),e.EFF(2),e.k0s()()),2&a){const t=o.$implicit;e.R7$(2),e.JRh(t.tracking_id)}}function K(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Category "),e.k0s())}function z(a,o){if(1&a&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.category," ")}}function Q(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Products "),e.k0s())}function Z(a,o){if(1&a&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.product," ")}}function q(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Deleted By "),e.k0s())}function ee(a,o){if(1&a&&(e.j41(0,"mat-cell",37),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.deleted_by," ")}}function te(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Deleted at "),e.k0s())}function ae(a,o){if(1&a&&(e.j41(0,"mat-cell",38),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.deleted_at," ")}}function ie(a,o){1&a&&(e.j41(0,"mat-header-cell",39),e.EFF(1," Action "),e.k0s())}function ne(a,o){if(1&a){const t=e.RV6();e.j41(0,"div",41)(1,"a",42),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.handleRestoreTickets(i.tracking_id))}),e.nrm(2,"mat-icon",43),e.k0s(),e.j41(3,"a",44),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.handleDeleteTempTicket(i.tracking_id))}),e.nrm(4,"mat-icon",45),e.k0s()()}}function oe(a,o){if(1&a&&(e.j41(0,"mat-cell"),e.DNE(1,ne,5,0,"div",40),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("ngIf","default-trial"!=t.name)}}function se(a,o){1&a&&e.nrm(0,"mat-header-row")}function re(a,o){1&a&&e.nrm(0,"mat-row")}function le(a,o){if(1&a&&(e.j41(0,"mat-table",21,1)(2,"div"),e.qex(3,22),e.DNE(4,H,2,0,"mat-header-cell",23)(5,J,3,1,"mat-cell",24),e.bVm(),e.qex(6,25),e.DNE(7,K,2,0,"mat-header-cell",23)(8,z,2,1,"mat-cell",26),e.bVm(),e.qex(9,27),e.DNE(10,Q,2,0,"mat-header-cell",23)(11,Z,2,1,"mat-cell",26),e.bVm(),e.qex(12,28),e.DNE(13,q,2,0,"mat-header-cell",23)(14,ee,2,1,"mat-cell",26),e.bVm(),e.qex(15,29),e.DNE(16,te,2,0,"mat-header-cell",23)(17,ae,2,1,"mat-cell",30),e.bVm(),e.qex(18,31),e.DNE(19,ie,2,0,"mat-header-cell",32)(20,oe,2,1,"mat-cell",33),e.bVm(),e.DNE(21,se,1,0,"mat-header-row",34)(22,re,1,0,"mat-row",35),e.k0s()()),2&a){const t=e.XpG(2);e.Y8G("dataSource",t.dataSource),e.R7$(21),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}function ce(a,o){1&a&&(e.j41(0,"div",46)(1,"div",47),e.nrm(2,"img",48)(3,"br"),e.j41(4,"p",49),e.EFF(5,"Data Not Found"),e.k0s(),e.j41(6,"p",50),e.EFF(7,"try using a different keyword or add a new tickets"),e.k0s()()())}function me(a,o){if(1&a){const t=e.RV6();e.j41(0,"section",3)(1,"div",4)(2,"h1",5),e.EFF(3,"Deleted Tickets"),e.k0s(),e.j41(4,"div",6)(5,"label",7),e.EFF(6,"Search"),e.k0s(),e.j41(7,"div",8)(8,"div",9),e.qSk(),e.j41(9,"svg",10),e.nrm(10,"path",11),e.k0s()(),e.joV(),e.j41(11,"input",12),e.bIt("keyup",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.applyFilter(i.target.value))}),e.k0s()()()(),e.DNE(12,W,8,0,"div",13),e.j41(13,"div",14),e.DNE(14,le,23,3,"mat-table",15),e.k0s(),e.DNE(15,ce,8,0,"div",16),e.nrm(16,"mat-paginator",17,0),e.k0s()}if(2&a){const t=e.XpG();e.R7$(12),e.Y8G("ngIf",t.isLoading),e.R7$(2),e.Y8G("ngIf",!t.isLoading),e.R7$(),e.Y8G("ngIf",t.isNotDataFound&&!t.isLoading),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(6,X))("showFirstLastButtons",!0)}}let de=(()=>{class a{constructor(t,n,i,s,d,g){this._tempTicketsService=t,this.fuseConfirmationService=n,this._apiService=i,this._toastService=s,this._ticketTableService=d,this._ticketLogsService=g,this.displayedColumns=["tracking_id","category","product","deleted_by","deleted_at","action"],this.dataSource=new l.I6,this.isAdmin="admin"===localStorage.getItem("userRole"),this._tempTicketsService.fetchData(),(0,e.QZP)(()=>{this.dataSource.data=this.dataTempTickets})}get isNotDataFound(){return this._tempTicketsService.isNotFound()}get isLoading(){return this._tempTicketsService.isLoading()}get dataTempTickets(){return this._tempTicketsService._data()}ngOnInit(){}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}applyFilter(t){t=(t=t.trim()).toLowerCase(),this.dataSource.filter=t}handleRestoreTickets(t){this.fuseConfirmationService.open({title:"Restore Confirmation",message:`Are you sure want to restore this ticket ${t}?`,icon:{show:!0,name:"restore",color:"primary"},actions:{confirm:{label:"Restore",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.restoreTickets(t)})}restoreTickets(t){var n=this;return(0,p.A)(function*(){try{const{status:s}=yield n._apiService.post(`api/V1/tickets/restore/${t}`,{});return 200===s?(n._toastService.success("Success Restore Ticket","Success"),n._tempTicketsService.fetchData(),n._ticketTableService.fetchData(),void n._ticketLogsService.fetchDatas()):void n._toastService.error("Failed Restore Ticket","Failed")}catch(i){throw n._toastService.error("Failed Restore Ticket","Failed"),i}})()}handleDeleteTempTicket(t){this.fuseConfirmationService.open({title:"Delete Confirmation",message:`Are you sure want to delete this ticket permanent ${t}?`,actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this.deleteTempTicket(t)})}deleteTempTicket(t){var n=this;return(0,p.A)(function*(){try{const{status:s}=yield n._apiService.delete(`api/V1/tickets/temp/${t}`);return 200===s?(n._toastService.success("Success Delete Tickets Permanent","Success"),void n._tempTicketsService.fetchData()):void n._toastService.error("Failed Delete Tickets Permanent","Failed")}catch(i){throw n._toastService.error("Failed Delete Tickets Permanent","Failed"),i}})()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(U.X),e.rXU(B.G),e.rXU(I.G),e.rXU(P.tw),e.rXU($.M),e.rXU(N.j))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-temp-tickets"]],viewQuery:function(n,i){if(1&n&&(e.GBs(c.B4,5),e.GBs(k.iy,5)),2&n){let s;e.mGM(s=e.lsd())&&(i.sort=s.first),e.mGM(s=e.lsd())&&(i.paginator=s.first)}},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["paginator",""],["table",""],["class","h-fit border-[1px] shadow-xl mt-4 bg-white rounded-lg p-5",4,"ngIf"],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","flex-col","items-start","sm:flex-row","sm:items-center","justify-between"],[1,"text-2xl","font-semibold"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Tickets",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-192",3,"dataSource",4,"ngIf"],["class","py-10",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],["matSort","",1,"min-w-192",3,"dataSource"],["matColumnDef","tracking_id"],[4,"matHeaderCellDef"],["class","text-lg whitespace-nowrap",4,"matCellDef"],["matColumnDef","category"],["class","flex items-center gap-3 py-5",4,"matCellDef"],["matColumnDef","product"],["matColumnDef","deleted_by"],["matColumnDef","deleted_at"],["class","flex items-center gap-3",4,"matCellDef"],["matColumnDef","action"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","whitespace-nowrap"],[1,"flex","items-center","gap-3","py-5"],[1,"flex","items-center","gap-3"],["mat-sort-header",""],["class","flex items-center",4,"ngIf"],[1,"flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-yellow-500","hover:bg-yellow-600","rounded","hover:cursor-pointer","hover:underline",3,"click"],["svgIcon","restore",1,"text-white",2,"transform","scale(0.8)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"py-10"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"text-lg","font-semibold"],[1,"text-sm"]],template:function(n,i){1&n&&e.DNE(0,me,18,7,"section",2),2&n&&e.Y8G("ngIf",i.isAdmin)},dependencies:[x.MD,x.bT,k.Ou,k.iy,C.hM,l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,_.X1,u.fS,u.fg,c.NQ,c.B4,c.aE,f.Cn,T.g7,_.YN,y.An]})}}return a})();var _e=r(68589),M=r(86600),w=r(25084),E=r(53719),G=r(82798),ue=r(21413),L=r(88834),pe=r(40171),fe=r(5271),Y=r(62288);let he=(()=>{class a{constructor(t,n,i,s,d,g,b){this._apiService=t,this.toast=n,this._ticketTableSerivce=i,this._ticketLogsTableService=s,this.fuseConfirmationService=d,this.dialogRef=g,this.data=b,this.isLoading=!1,this.excelData=[],this.selectedFile=null}ngOnInit(){}formatDate(t){const n=new Date(t.getTime()+6e4*t.getTimezoneOffset());return`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()+1).padStart(2,"0")}`}formatTime(t){return`${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}onFileChange(t){const n=t.target.files[0];if(n){this.selectedFile=n;const i=new FileReader;i.onload=s=>{const d=new Uint8Array(s.target.result),g=Y.LF(d,{type:"array",cellDates:!0});this.excelData=Y.Wp.sheet_to_json(g.Sheets[g.SheetNames[0]]),this.excelData=this.excelData.map(h=>({...h,hari_masuk:h.hari_masuk instanceof Date?this.formatDate(h.hari_masuk):h.hari_masuk,hari_respon:h.hari_respon instanceof Date?this.formatDate(h.hari_respon):h.hari_respon,waktu_masuk:h.waktu_masuk instanceof Date?this.formatTime(h.waktu_masuk):h.waktu_masuk,waktu_respon:h.waktu_respon instanceof Date?this.formatTime(h.waktu_respon):h.waktu_respon})),console.log("Formatted Excel Data:",this.excelData)},i.readAsArrayBuffer(n)}}onSubmit(){var t=this;return(0,p.A)(function*(){if(t.selectedFile)if(t.excelData&&0!==t.excelData.length)try{t.isLoading=!0,console.log(t.excelData);const{status:i}=yield t._apiService.post("api/V1/tickets/excel",t.excelData);if(201===i)return t.toast.success("Success Create Tickets","Success"),t._ticketTableSerivce.fetchData(),t._ticketLogsTableService.fetchDatas(),t.dialogRef.close(),void(t.isLoading=!1);if(500===i)return t.toast.error("Internal Server Error","Failed"),t.dialogRef.close(),void(t.isLoading=!1);if(409===i)t.isLoading=!1,t.fuseConfirmationService.open({title:"Notification",message:"The Tickets already exists on the server. Would you like to create another Tickets time anyway?",icon:{color:"info"},actions:{confirm:{label:"Confirmation",color:"primary"}}});else if(400===i)return t.toast.error("Bad Request","Failed"),t.dialogRef.close(),void(t.isLoading=!1)}catch(n){throw n}else t.toast.warning("The selected file is empty or invalid.","Warning");else t.toast.warning("Please select a file before submitting.","Warning")})()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(I.G),e.rXU(P.tw),e.rXU($.M),e.rXU(N.j),e.rXU(B.G),e.rXU(C.CP),e.rXU(C.Vh))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-import-excel"]],standalone:!0,features:[e.aNF],decls:26,vars:2,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","items-start","w-full","justify-between"],[1,"mb-2","text-2xl","font-semibold","sm:mb-0"],[1,"text-sm","text-gray-500"],["href","files/template_ticket_import.xlsx","download","",1,"text-blue-600","underline"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,""],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","px-8","py-4","pb-4","gap-5"],[1,"flex","flex-col","gap-2"],["for","excelFile",1,"text-sm","font-medium","text-gray-700","mb-1"],[1,"flex","items-center","border","border-gray-300","rounded-lg","px-4","py-2","cursor-pointer","hover:border-blue-500"],["type","file","id","excelFile","accept",".xlsx, .xls",1,"hidden",3,"change"],["for","excelFile",1,"flex-1","text-gray-600","cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M12 12v6m0 0l3-3m-3 3l-3-3M16 8V4H8v4"],["type","submit",1,"bg-green-600","text-white","p-2","rounded",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4,"Import Excel"),e.k0s(),e.j41(5,"p",4),e.EFF(6," Upload an Excel file. "),e.j41(7,"a",5),e.EFF(8,"Download here"),e.k0s(),e.EFF(9,". "),e.k0s()(),e.j41(10,"a",6),e.bIt("click",function(){return i.dialogRef.close()}),e.nrm(11,"mat-icon",7),e.k0s()(),e.nrm(12,"ion-loading",8),e.j41(13,"div",9)(14,"form",10)(15,"div",11)(16,"label",12),e.EFF(17,"Upload Excel File"),e.k0s(),e.j41(18,"div",13)(19,"input",14),e.bIt("change",function(d){return i.onFileChange(d)}),e.k0s(),e.j41(20,"label",15),e.EFF(21),e.k0s(),e.qSk(),e.j41(22,"svg",16),e.nrm(23,"path",17),e.k0s()()(),e.joV(),e.j41(24,"button",18),e.bIt("click",function(){return i.onSubmit()}),e.EFF(25," Import Excel "),e.k0s()()()()),2&n&&(e.R7$(12),e.Y8G("isOpen",i.isLoading),e.R7$(9),e.SpI(" ",i.selectedFile?i.selectedFile.name:"Choose Excel file..."," "))},dependencies:[_.X1,_.qT,_.cb,_.YN,_.cV,E.RG,u.fS,L.Hl,y.m_,y.An,fe.rQ,w.X6,M.Sy,G.Ve,x.MD]})}}return a})();const ge=()=>["/dashboards/tickets/add-tickets"],R=()=>({disableClose:!0}),ke=()=>[5,10,20],xe=(a,o,t)=>({"bg-blue-500":a,"bg-yellow-500":o,"bg-green-500":t}),O=(a,o,t,n)=>({"text-green-600":a,"text-blue-600":o,"text-yellow-600":t,"text-red-600":n}),Te=a=>["/dashboards/tickets",a];function be(a,o){if(1&a){const t=e.RV6();e.j41(0,"button",53),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.importExcel())}),e.nrm(1,"mat-icon",54),e.j41(2,"span"),e.EFF(3,"Import Excel"),e.k0s()()}}function ve(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",55),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyProductsFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.SpI(" ",t.name," ")}}function Fe(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",56),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyCategoryFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.JRh(t.name)}}function ye(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",55),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyStatusFilter())}),e.j41(1,"div",57)(2,"h1",58),e.EFF(3),e.k0s()()()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.Y8G("ngClass",e.sMw(3,xe,"New"===t.name,"On Progress"===t.name,"Resolved"===t.name)),e.R7$(2),e.JRh(t.name)}}function Ce(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",55),e.mxI("ngModelChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.checked,i)||(s.checked=i),e.Njj(i)}),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())})("change",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.applyPriorityFilter())}),e.j41(1,"div",18),e.nrm(2,"mat-icon",59),e.j41(3,"h1",60),e.EFF(4),e.k0s()()()}if(2&a){const t=o.$implicit;e.R50("ngModel",t.checked),e.R7$(2),e.Y8G("ngClass",e.ziG(3,O,"Low"===t.name,"Hedium"===t.name,"High"===t.name,"Critical"===t.name)),e.R7$(2),e.JRh(t.name)}}function we(a,o){1&a&&(e.j41(0,"div",61),e.nrm(1,"div",62)(2,"div",62)(3,"div",62)(4,"div",62)(5,"div",62)(6,"div",62)(7,"div",63),e.k0s())}function De(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Tracking ID "),e.k0s())}function je(a,o){if(1&a&&(e.j41(0,"mat-cell",90)(1,"a",91),e.EFF(2),e.k0s()()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(2,Te,t.tracking_id)),e.R7$(),e.JRh(t.tracking_id)}}function Se(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Ticket Entry Day "),e.k0s())}function Ee(a,o){if(1&a&&(e.j41(0,"mat-cell",18),e.nrm(1,"mat-icon",92),e.EFF(2),e.k0s()),2&a){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.hari_masuk," ")}}function Re(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Ticket Entry Time "),e.k0s())}function Ie(a,o){if(1&a&&(e.j41(0,"mat-cell",18),e.nrm(1,"mat-icon",93),e.EFF(2),e.k0s()),2&a){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.waktu_masuk," ")}}function $e(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Category "),e.k0s())}function Ne(a,o){if(1&a&&(e.j41(0,"mat-cell",94),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.category," ")}}function Me(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Users "),e.k0s())}function Ge(a,o){1&a&&(e.j41(0,"div",61),e.nrm(1,"div",62),e.k0s())}function Le(a,o){if(1&a&&(e.j41(0,"mat-cell",95)(1,"div",96),e.nrm(2,"img",97),e.j41(3,"p",58),e.EFF(4),e.k0s()()()),2&a){const t=o.$implicit;e.R7$(2),e.Y8G("src",t.user.avatar,e.B4B),e.R7$(2),e.JRh(t.user.name)}}function Ve(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," PIC "),e.k0s())}function Ae(a,o){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",""==(null==t?null:t.pic)||null==(null==t?null:t.pic)?"Not Found":t.pic," ")}}function Be(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Subject "),e.k0s())}function Pe(a,o){if(1&a&&(e.j41(0,"mat-cell",98),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",t.subject," ")}}function Ye(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Whatsapp Client "),e.k0s())}function Oe(a,o){if(1&a&&(e.j41(0,"mat-cell")(1,"a",99),e.EFF(2),e.k0s()()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("href","https://wa.me/"+(null==t?null:t.no_whatsapp),e.B4B),e.R7$(),e.SpI(" ",""===(null==t?null:t.no_whatsapp)?"Not Found":t.no_whatsapp," ")}}function Ue(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Status "),e.k0s())}function Xe(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-option",104),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG().$implicit,d=e.XpG(2);return e.Njj(d.changeStatus(s.tracking_id,i))}),e.EFF(1),e.k0s()}if(2&a){const t=o.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function We(a,o){if(1&a){const t=e.RV6();e.j41(0,"mat-cell",100)(1,"mat-form-field",101)(2,"mat-select",102),e.mxI("valueChange",function(i){const s=e.eBV(t).$implicit;return e.DH7(s.status,i)||(s.status=i),e.Njj(i)}),e.DNE(3,Xe,2,2,"mat-option",103),e.k0s()()()}if(2&a){const t=o.$implicit,n=e.XpG(2);e.R7$(2),e.R50("value",t.status),e.Y8G("disabled",!n.isAdmin&&(n.shiftStatus||"Resolved"===(null==t?null:t.status))),e.R7$(),e.Y8G("ngForOf",n.statusList)}}function He(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Solved Time "),e.k0s())}function Je(a,o){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=o.$implicit;e.R7$(),e.SpI(" ",""===t.solved_time||null===t.solved_time?"On Progress":t.solved_time,"")}}function Ke(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Last Replier "),e.k0s())}function ze(a,o){1&a&&(e.j41(0,"div",61),e.nrm(1,"div",62),e.k0s())}function Qe(a,o){if(1&a&&(e.j41(0,"mat-cell",105)(1,"div",96),e.nrm(2,"img",106),e.j41(3,"p",58),e.EFF(4),e.k0s()()()),2&a){const t=o.$implicit;e.R7$(2),e.Y8G("src",null===t.last_replier?t.user.avatar:t.last_replier.avatar,e.B4B),e.R7$(2),e.JRh(null===t.last_replier?t.user.name:t.last_replier.name)}}function Ze(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Priority "),e.k0s())}function qe(a,o){if(1&a&&(e.j41(0,"mat-cell",18),e.nrm(1,"mat-icon",59),e.j41(2,"h1",60),e.EFF(3),e.k0s()()),2&a){const t=o.$implicit;e.R7$(),e.Y8G("ngClass",e.ziG(2,O,"Low"===t.priority,"Medium"===t.priority,"High"===t.priority,"Critical"===t.priority)),e.R7$(2),e.JRh(t.priority)}}function et(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Date "),e.k0s())}function tt(a,o){if(1&a&&(e.j41(0,"mat-cell",18),e.nrm(1,"mat-icon",92),e.EFF(2),e.k0s()),2&a){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.created_date," ")}}function at(a,o){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Time "),e.k0s())}function it(a,o){if(1&a&&(e.j41(0,"mat-cell",18),e.nrm(1,"mat-icon",93),e.EFF(2),e.k0s()),2&a){const t=o.$implicit;e.R7$(2),e.SpI(" ",t.created_time," ")}}function nt(a,o){1&a&&e.nrm(0,"mat-header-row")}function ot(a,o){1&a&&e.nrm(0,"mat-row")}function st(a,o){if(1&a&&(e.j41(0,"mat-table",64,8)(2,"div"),e.qex(3,65),e.DNE(4,De,2,0,"mat-header-cell",66)(5,je,3,4,"mat-cell",67),e.bVm(),e.qex(6,68),e.DNE(7,Se,2,0,"mat-header-cell",66)(8,Ee,3,1,"mat-cell",69),e.bVm(),e.qex(9,70),e.DNE(10,Re,2,0,"mat-header-cell",66)(11,Ie,3,1,"mat-cell",69),e.bVm(),e.qex(12,71),e.DNE(13,$e,2,0,"mat-header-cell",66)(14,Ne,2,1,"mat-cell",72),e.bVm(),e.qex(15,73),e.DNE(16,Me,2,0,"mat-header-cell",66)(17,Ge,2,0,"div",48)(18,Le,5,2,"mat-cell",74),e.bVm(),e.qex(19,75),e.DNE(20,Ve,2,0,"mat-header-cell",66)(21,Ae,2,1,"mat-cell",76),e.bVm(),e.qex(22,77),e.DNE(23,Be,2,0,"mat-header-cell",66)(24,Pe,2,1,"mat-cell",78),e.bVm(),e.qex(25,79),e.DNE(26,Ye,2,0,"mat-header-cell",66)(27,Oe,3,2,"mat-cell",76),e.bVm(),e.qex(28,80),e.DNE(29,Ue,2,0,"mat-header-cell",66)(30,We,4,3,"mat-cell",81),e.bVm(),e.qex(31,82),e.DNE(32,He,2,0,"mat-header-cell",66)(33,Je,2,1,"mat-cell",76),e.bVm(),e.qex(34,83),e.DNE(35,Ke,2,0,"mat-header-cell",66)(36,ze,2,0,"div",48)(37,Qe,5,2,"mat-cell",84),e.bVm(),e.qex(38,85),e.DNE(39,Ze,2,0,"mat-header-cell",66)(40,qe,4,7,"mat-cell",69),e.bVm(),e.qex(41,86),e.DNE(42,et,2,0,"mat-header-cell",66)(43,tt,3,1,"mat-cell",69),e.bVm(),e.qex(44,87),e.DNE(45,at,2,0,"mat-header-cell",66)(46,it,3,1,"mat-cell",69),e.bVm(),e.DNE(47,nt,1,0,"mat-header-row",88)(48,ot,1,0,"mat-row",89),e.k0s()()),2&a){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(17),e.Y8G("ngIf",t.isLoading),e.R7$(19),e.Y8G("ngIf",t.isLoading),e.R7$(11),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}function rt(a,o){1&a&&(e.j41(0,"div",107)(1,"div",108),e.nrm(2,"img",109)(3,"br"),e.j41(4,"p",110),e.EFF(5,"Data Not Found"),e.k0s(),e.j41(6,"p",111),e.EFF(7,"try using a different keyword or add a new tickets"),e.k0s()()())}const V=new Date,lt=V.getMonth(),ct=V.getFullYear();V.getDay();let mt=(()=>{class a{constructor(t,n,i,s,d){this._apiService=t,this.cdr=n,this._ticketLogsService=i,this._ticketTableService=s,this._matDialog=d,this.filterValues={search:"",category:[],products:[],status:[],priority:[]},this.shiftStatus=!0,this.ticketStatus=!1,this.isAdmin="admin"===localStorage.getItem("userRole"),this.statusList=["New","On Progress","Resolved"],this.productsItems=[],this.category=[],this.statusItems=[],this.priorityItems=[],this._unsubscribeAll=new ue.B,this.displayedColumns=["tracking_id","hari_masuk","waktu_masuk","name","category","subject","pic","no_whatsapp","status","solved_time","last_replier","priority","create_date","create_time"],this.dataSource=new l.I6,this.range=new _.gE({start:new _.MJ(new Date(ct,lt-1)),end:new _.MJ(new Date)}),this._ticketTableService.checkTickets(),this._ticketTableService.fetchData(),(0,e.QZP)(()=>{const g=this.datas,b=new Set,v=new Set,h=new Set,S=new Set;g.forEach(m=>{m.products_name&&(Array.isArray(m.products_name)?m.products_name.forEach(D=>S.add(D)):S.add(m.products_name)),m.category&&(Array.isArray(m.category)?m.category.forEach(D=>b.add(D)):(b.add(m.category),v.add(m.status))),m.status&&(Array.isArray(m.status)?m.status.forEach(D=>v.add(D)):v.add(m.status)),m.priority&&(Array.isArray(m.priority)?m.priority.forEach(D=>h.add(D)):h.add(m.priority)),m.subject||(m.subject="Subject Not Found")}),this.statusItems=[...v].map(m=>({name:m,checked:!1})),this.category=[...b].map(m=>({name:m,checked:!1})),this.priorityItems=[...h].map(m=>({name:m,checked:!1})),this.productsItems=[...S].map(m=>({name:m,checked:!1})),this.dataSource.data=0!==this._ticketTableService._datas().length?g:[]})}get datas(){return this._ticketTableService._datas()}get isLoading(){return this._ticketTableService.isLoading()}get isNotFound(){return this._ticketTableService.isNotFound()}ngOnInit(){this.fetchUsers(),this.range.valueChanges.subscribe(({start:t,end:n})=>{if(n){const i=t instanceof Date?t:new Date(t),s=n instanceof Date?n:new Date(n);this._ticketTableService.fetchDataByDate(i.toLocaleDateString("en-CA"),s.toLocaleDateString("en-CA"))}})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}importExcel(){this._matDialog.open(he,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}generateReport(){this._matDialog.open(pe.E,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}fetchUsers(){var t=this;return(0,p.A)(function*(){try{const n=yield t._apiService.get("api/V1/get-profile");t.shiftStatus="Active Shift"!==n.data.shift_status,t.cdr.detectChanges()}catch(n){throw n}})()}applyFilter(){this.dataSource.filterPredicate=(t,n)=>{let i=JSON.parse(n),s=""===i.search||t.tracking_id.toLowerCase().includes(i.search)||t.created_date.toLowerCase().includes(i.search)||t.created_time.toLowerCase().includes(i.search)||t.hari_masuk.toLowerCase().includes(i.search)||t.waktu_masuk.toLowerCase().includes(i.search)||t.products_name.toLowerCase().includes(i.search)||t.category.toLowerCase().includes(i.search)||t.subject.toLowerCase().includes(i.search)||t.status.toLowerCase().includes(i.search)||t.priority.toLowerCase().includes(i.search)||t.no_whatsapp.toLowerCase().includes(i.search)||t.user?.name.toLowerCase().includes(i.search)||t.last_replier?.name.toLowerCase().includes(i.search),d=0===i.category.length||i.category.includes(t.category.toLowerCase()),g=0===i.status.length||i.status.includes(t.status.toLowerCase()),b=0===i.priority.length||i.priority.includes(t.priority.toLowerCase()),v=0===i.products.length||i.products.includes(t.products_name.toLowerCase());return s&&d&&g&&b&&v},this.dataSource.filter=JSON.stringify(this.filterValues)}applySearchFilter(t){this.filterValues.search=t.trim().toLowerCase(),this.applyFilter()}applyProductsFilter(){this.filterValues.products=this.productsItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyCategoryFilter(){this.filterValues.category=this.category.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyStatusFilter(){this.filterValues.status=this.statusItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyPriorityFilter(){this.filterValues.priority=this.priorityItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}changeStatus(t,n){var i=this;return(0,p.A)(function*(){try{const{status:s}=yield i._apiService.post(`api/V1/ticket-status/${t}`,{status:n});200===s&&(i._ticketLogsService.fetchDatas(),i._ticketTableService.fetchData())}catch(s){throw s}})()}static{this.\u0275fac=function(n){return new(n||a)(e.rXU(I.G),e.rXU(e.gRc),e.rXU(N.j),e.rXU($.M),e.rXU(C.bZ))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-ticket"]],viewQuery:function(n,i){if(1&n&&(e.GBs(c.B4,5),e.GBs(k.iy,5)),2&n){let s;e.mGM(s=e.lsd())&&(i.sort=s.first),e.mGM(s=e.lsd())&&(i.paginator=s.first)}},standalone:!0,features:[e.aNF],decls:88,vars:36,consts:[["addUserMenu","matMenu"],["picker",""],["menu","matMenu"],["products","matMenu"],["categorys","matMenu"],["status","matMenu"],["priority","matMenu"],["paginator",""],["table",""],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","flex-col","items-start","lg:flex-row","sm:items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Tickets",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],[1,"flex","items-center","gap-3"],["mat-raised-button","",1,"flex","w-fit","text-nowrap","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","text-white",3,"disabled","matMenuTriggerFor","ngClass"],[1,"flex","items-center","gap-1"],[1,"m-2","pr-4","border-r-[1px]"],["svgIcon","keyboard_arrow_down",1,"font-bold","text-2xl"],["mat-menu-item","",3,"routerLink"],["svgIcon","mat_outline:add",1,"icon-size-5"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-raised-button","",1,"flex","w-fit","text-nowrap","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","bg-red-500","text-white",3,"click"],["svgIcon","mat_solid:picture_as_pdf",1,"text-white"],[1,"max-sm:hidden","font-semibold"],[1,"min-w-[300px]","max-w-full","self-end","hidden","sm:block"],[1,"w-full",3,"rangePicker","formGroup"],["matStartDate","","formControlName","start","placeholder","Start date",1,"w-full"],["matEndDate","","formControlName","end","placeholder","End date",1,"w-full"],["matSuffix","",3,"for"],["touchUi",""],[1,"flex","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","border-[1px]","text-white",3,"matMenuTriggerFor"],["svgIcon","filter_alt"],[1,"max-sm:hidden","font-semibold","text-black"],["svgIcon","keyboard_arrow_down"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"min-w-[300px]"],[1,"px-5","py-3","w-full"],[1,"font-semibold","mb-2"],[1,"px-5","flex","flex-col","gap-2","w-full"],["class","h-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],["class","h-full w-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],[1,"px-5","py-3"],[1,"min-w-[300px]","max-w-full","pt-4","self-start","sm:hidden","block"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-[2480px]",3,"dataSource",4,"ngIf"],["class","py-10",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["mat-menu-item","",3,"click"],["svgIcon","mat_outline:upload_file",1,"icon-size-5"],[1,"h-full",3,"ngModelChange","click","change","ngModel"],[1,"h-full","w-full",3,"ngModelChange","click","change","ngModel"],[1,"px-3","py-1","text-white","whitespace-nowrap","rounded-full",3,"ngClass"],[1,"font-medium"],["svgIcon","mat_outline:bookmark",1,"-rotate-90",3,"ngClass"],[1,"font-medium","uppercase"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],["matSort","",1,"min-w-[2480px]",3,"dataSource"],["matColumnDef","tracking_id"],[4,"matHeaderCellDef"],["class","text-lg text-blue-600 font-medium underline whitespace-nowrap",4,"matCellDef"],["matColumnDef","hari_masuk"],["class","flex items-center gap-3",4,"matCellDef"],["matColumnDef","waktu_masuk"],["matColumnDef","category"],["class","flex items-center gap-3 font-medium",4,"matCellDef"],["matColumnDef","name"],["class","py-3.5 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","pic"],[4,"matCellDef"],["matColumnDef","subject"],["class","font-bold text-lg",4,"matCellDef"],["matColumnDef","no_whatsapp"],["matColumnDef","status"],["class","py-4 w-full",4,"matCellDef"],["matColumnDef","solved_time"],["matColumnDef","last_replier"],["class","py-2 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","priority"],["matColumnDef","create_date"],["matColumnDef","create_time"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","text-blue-600","font-medium","underline","whitespace-nowrap"],[3,"routerLink"],["svgIcon","mat_solid:date_range"],["svgIcon","mat_outline:access_time"],[1,"flex","items-center","gap-3","font-medium"],[1,"py-3.5","flex","items-center","gap-3","w-fit"],[1,"w-full","flex","items-center","gap-3"],["alt","",1,"w-7","h-7","object-cover","rounded-full",3,"src"],[1,"font-bold","text-lg"],["target","_blank",3,"href"],[1,"py-4","w-full"],["hideRequiredMarker","",1,"w-full"],["placeholder","Select",3,"valueChange","value","disabled"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value","click",4,"ngFor","ngForOf"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"click","value"],[1,"py-2","flex","items-center","gap-3","w-fit"],["alt","",1,"w-7","h-7","rounded-full",3,"src"],[1,"py-10"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"text-lg","font-semibold"],[1,"text-sm"]],template:function(n,i){if(1&n){const s=e.RV6();e.j41(0,"section",9)(1,"div",10)(2,"div",11)(3,"label",12),e.EFF(4,"Search"),e.k0s(),e.j41(5,"div",13)(6,"div",14),e.qSk(),e.j41(7,"svg",15),e.nrm(8,"path",16),e.k0s()(),e.joV(),e.j41(9,"input",17),e.bIt("keyup",function(g){return e.eBV(s),e.Njj(i.applySearchFilter(g.target.value))}),e.k0s()()(),e.j41(10,"div",18)(11,"button",19)(12,"div",20)(13,"span",21),e.EFF(14,"New Tickets"),e.k0s(),e.nrm(15,"mat-icon",22),e.k0s()(),e.j41(16,"mat-menu",null,0)(18,"button",23),e.nrm(19,"mat-icon",24),e.j41(20,"span"),e.EFF(21,"Add Tickets"),e.k0s()(),e.DNE(22,be,4,0,"button",25),e.k0s(),e.j41(23,"button",26),e.bIt("click",function(){return e.eBV(s),e.Njj(i.generateReport())}),e.nrm(24,"mat-icon",27),e.j41(25,"span",28),e.EFF(26,"Generate Report"),e.k0s()(),e.j41(27,"mat-form-field",29)(28,"mat-date-range-input",30),e.nrm(29,"input",31)(30,"input",32),e.k0s(),e.nrm(31,"mat-datepicker-toggle",33)(32,"mat-date-range-picker",34,1),e.k0s(),e.j41(34,"button",35),e.nrm(35,"mat-icon",36),e.j41(36,"span",37),e.EFF(37,"Filter"),e.k0s(),e.nrm(38,"mat-icon",38),e.k0s(),e.j41(39,"mat-menu",null,2)(41,"button",39),e.EFF(42,"Products"),e.k0s(),e.j41(43,"button",39),e.EFF(44,"Category"),e.k0s(),e.j41(45,"button",39),e.EFF(46,"Status"),e.k0s(),e.j41(47,"button",39),e.EFF(48,"Priority"),e.k0s(),e.j41(49,"mat-menu",40,3)(51,"div",41)(52,"h1",42),e.EFF(53,"Choose Products"),e.k0s()(),e.j41(54,"div",43),e.DNE(55,ve,2,2,"mat-checkbox",44),e.k0s()(),e.j41(56,"mat-menu",40,4)(58,"div",41)(59,"h1",42),e.EFF(60,"Choose Category"),e.k0s()(),e.j41(61,"div",43),e.DNE(62,Fe,2,2,"mat-checkbox",45),e.k0s()(),e.j41(63,"mat-menu",null,5)(65,"div",46)(66,"h1",42),e.EFF(67,"Choose status"),e.k0s()(),e.DNE(68,ye,4,7,"mat-checkbox",44),e.k0s(),e.j41(69,"mat-menu",null,6)(71,"div",46)(72,"h1",42),e.EFF(73,"Choose Priority"),e.k0s()(),e.DNE(74,Ce,5,8,"mat-checkbox",44),e.k0s()()(),e.j41(75,"mat-form-field",47)(76,"mat-date-range-input",30),e.nrm(77,"input",31)(78,"input",32),e.k0s(),e.nrm(79,"mat-datepicker-toggle",33)(80,"mat-date-range-picker",null,1),e.k0s()(),e.DNE(82,we,8,0,"div",48),e.j41(83,"div",49),e.DNE(84,st,49,5,"mat-table",50),e.k0s(),e.DNE(85,rt,8,0,"div",51),e.nrm(86,"mat-paginator",52,7),e.k0s()}if(2&n){const s=e.sdS(17),d=e.sdS(33),g=e.sdS(40),b=e.sdS(50),v=e.sdS(57),h=e.sdS(64),S=e.sdS(70);e.R7$(11),e.Y8G("disabled",i.shiftStatus&&!i.isAdmin)("matMenuTriggerFor",s)("ngClass",i.shiftStatus&&!i.isAdmin?"bg-gray-400":"bg-primary"),e.R7$(7),e.Y8G("routerLink",e.lJ4(30,ge)),e.R7$(4),e.Y8G("ngIf",i.isAdmin),e.R7$(6),e.Y8G("rangePicker",d)("formGroup",i.range),e.R7$(3),e.Y8G("for",d),e.R7$(3),e.Y8G("matMenuTriggerFor",g),e.R7$(7),e.Y8G("matMenuTriggerFor",b)("matMenuTriggerData",e.lJ4(31,R)),e.R7$(2),e.Y8G("matMenuTriggerFor",v)("matMenuTriggerData",e.lJ4(32,R)),e.R7$(2),e.Y8G("matMenuTriggerFor",h)("matMenuTriggerData",e.lJ4(33,R)),e.R7$(2),e.Y8G("matMenuTriggerFor",S)("matMenuTriggerData",e.lJ4(34,R)),e.R7$(8),e.Y8G("ngForOf",i.productsItems),e.R7$(7),e.Y8G("ngForOf",i.category),e.R7$(6),e.Y8G("ngForOf",i.statusItems),e.R7$(6),e.Y8G("ngForOf",i.priorityItems),e.R7$(2),e.Y8G("rangePicker",d)("formGroup",i.range),e.R7$(3),e.Y8G("for",d),e.R7$(3),e.Y8G("ngIf",i.isLoading),e.R7$(2),e.Y8G("ngIf",!i.isLoading),e.R7$(),e.Y8G("ngIf",i.isNotFound&&!i.isLoading),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(35,ke))("showFirstLastButtons",!0)}},dependencies:[x.MD,x.YU,x.Sq,x.bT,k.Ou,k.iy,C.hM,l.tP,l.Zl,l.tL,l.ji,l.cC,l.YV,l.iL,l.KS,l.$R,l.YZ,l.NB,_.X1,_.me,_.BC,_.cb,_.j4,_.JD,u.fS,u.fg,E.rl,E.yw,c.NQ,c.B4,y.An,f.Cn,f.kk,f.fb,f.Cp,T.g7,T.So,_.YN,_.vS,E.RG,w.X6,w.bU,w.el,w.xR,w.IG,w.SG,G.Ve,G.VO,M.wT,M.Sy,L.Hl,L.$z,F.Wk],styles:[".mat-mdc-form-field-subscript-wrapper{display:none!important}",".mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%] {\n        display: none;\n    }"]})}}return a})();const dt=()=>["/dashboards/home"];let _t=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-tickets"]],standalone:!0,features:[e.aNF],decls:18,vars:2,consts:[[1,"p-4","h-full","w-full","sm:px-5"],[1,"px-1","pt-3","flex","justify-between","items-start","sm:items-center","flex-col","sm:flex-row","gap-5","sm:gap-0"],[1,"font-bold","text-lg","sm:text-3xl"],[1,"text-sm","sm:text-base"],[1,"text-sm","text-gray-600"],[1,"font-medium","text-gray-500","hover:cursor-pointer","hover:text-blue-400",3,"routerLink"],[1,"mx-2","text-gray-400"],[1,"font-semibold","text-blue-600","hover:text-blue-500"],[1,"h-fit","w-full"]],template:function(n,i){1&n&&(e.j41(0,"main",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4,"Tickets"),e.k0s(),e.j41(5,"p",3),e.EFF(6,"Keep track of ongoing tickets and follow up efficiently."),e.k0s()(),e.j41(7,"div",4)(8,"span",5),e.EFF(9,"Home"),e.k0s(),e.j41(10,"span",6),e.EFF(11,"/"),e.k0s(),e.j41(12,"span",7),e.EFF(13,"Tickets"),e.k0s()()(),e.j41(14,"div",8),e.nrm(15,"app-ticket")(16,"app-ticket-logs")(17,"app-temp-tickets"),e.k0s()()),2&n&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(1,dt)))},dependencies:[mt,_e.V,F.Wk,de],encapsulation:2,changeDetection:0})}}return a})();var ut=r(25798),pt=r(96697),ft=r(96354);const ht=[{path:"",component:_t},{path:"add-tickets",canActivate:[(a,o)=>{const t=(0,e.WQX)(F.Ix),n=(0,e.WQX)(ut.D),i="admin"===localStorage.getItem("userRole");return n.user$.pipe((0,pt.s)(1),(0,ft.T)(s=>!(!i&&"Active Shift"!==s.shift_status)||t.parseUrl("/dashboards/tickets")))}],loadChildren:()=>Promise.all([r.e(6233),r.e(2076),r.e(789)]).then(r.bind(r,10789))},{path:":trackingId",loadChildren:()=>Promise.all([r.e(6233),r.e(1526)]).then(r.bind(r,21526))}]},48807:(A,j,r)=>{r.d(j,{X:()=>_});var F=r(10467),p=r(54438),e=r(3366),x=r(45794);let _=(()=>{class T{constructor(u,f){this._apiService=u,this._toastService=f,this._data=(0,p.vPA)([]),this.isLoading=(0,p.vPA)(!1),this.isNotFound=(0,p.vPA)(!1)}fetchData(){var u=this;return(0,F.A)(function*(){u.isLoading.set(!0),u._apiService.get("api/V1/tickets/temp").then(function(){var f=(0,F.A)(function*(k){u.isLoading.set(!1),u.isNotFound.set(!1),u._data.set(k.data),null!==k.data&&0!=k.data.length||u.isNotFound.set(!0)});return function(k){return f.apply(this,arguments)}}()).catch(function(){var f=(0,F.A)(function*(k){u.isLoading.set(!1),u.isNotFound.set(!0),u._toastService.error("Failed to fetch data","Error")});return function(k){return f.apply(this,arguments)}}())})()}static{this.\u0275fac=function(f){return new(f||T)(p.KVO(e.G),p.KVO(x.tw))}}static{this.\u0275prov=p.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()},35883:(A,j,r)=>{r.d(j,{M:()=>u});var F=r(10467),p=r(54438),e=r(84412),x=r(86648),_=r(88141),T=r(3366),C=r(45794);let u=(()=>{class f{constructor(c,l){this._apiService=c,this._toastService=l,this._data=new e.t(null),this._datas=(0,p.vPA)([]),this.isLoading=(0,p.vPA)(!0),this.isNotFound=(0,p.vPA)(!1)}get data$(){return this._data.asObservable()}Update(c){this._data.next(c)}checkTickets(){return(0,x.H)(this._apiService.get("api/V1/check-tickets-deadline")).pipe((0,_.M)(c=>{console.log(c)}))}fetchDataByDate(c,l){this.isLoading.set(!0),this._apiService.get(`api/V1/tickets-date?start_date=${c}&end_date=${l}`).then(y=>{this.isLoading.set(!1),this.isNotFound.set(!1),this._datas.set(y.data),null!==y.data&&0!=y.data.length||this.isNotFound.set(!0)}).catch(y=>{this.isLoading.set(!1),this.isNotFound.set(!0),this._toastService.error("Failed to fetch data","Error")})}fetchData(){var c=this;return(0,F.A)(function*(){c.isLoading.set(!0),c._apiService.get("api/V1/tickets").then(l=>{c.isLoading.set(!1),c.isNotFound.set(!1),c._datas.set(l.data),null!==l.data&&0!=l.data.length||c.isNotFound.set(!0)}).catch(l=>{c.isLoading.set(!1),c.isNotFound.set(!0),c._toastService.error("Failed to fetch data","Error")})})()}static{this.\u0275fac=function(l){return new(l||f)(p.KVO(T.G),p.KVO(C.tw))}}static{this.\u0275prov=p.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()}}]);