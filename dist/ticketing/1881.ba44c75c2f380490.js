"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[1881],{11881:(M,m,n)=>{n.r(m),n.d(m,{default:()=>Y});var f=n(10467),u=n(60177),l=n(89417),b=n(86600),h=n(25084),p=n(53719),C=n(59042),y=n(82798),c=n(14160),t=n(54438);const k=["chart"];let O=(()=>{class o{constructor(){this.data={},this.seriesData=[],this.header="",this.labels=[]}ngOnChanges(r){this.chartOptions={colors:["#8979FF"],series:this.seriesData,chart:{id:"dailyHumadityChart",height:350,type:"area",dropShadow:{enabled:!0,top:4,left:2,blur:6,opacity:.5,color:"#8979FF"},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},dataLabels:{enabled:!0,formatter:a=>null!==a?`${a} Ticket`:"N/A",style:{fontWeight:"bold",colors:["#8979FF"],fontSize:"12px"},background:{enabled:!0,foreColor:"#fff",borderRadius:4,padding:4,opacity:.9,borderWidth:1,borderColor:"#8979FF",dropShadow:{enabled:!0,top:2,left:1,blur:3,opacity:.3,color:"#8979FF"}}},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,90,100]}},stroke:{curve:"smooth",width:2,colors:["#8979FF"]},xaxis:{categories:this.labels}}}static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-area-chart"]],viewQuery:function(a,e){if(1&a&&t.GBs(k,5),2&a){let s;t.mGM(s=t.lsd())&&(e.chart=s.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:9,consts:[["id","chart",1,"bg-white","border-[0.7px]","shadow-md","p-2","rounded-xl","h-full"],[1,"text-xl","font-semibold","px-4","border-b-[1px]","border-solid","py-4"],[3,"colors","series","fill","chart","xaxis","stroke","tooltip","dataLabels"]],template:function(a,e){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.nrm(4,"apx-chart",2),t.k0s()),2&a&&(t.R7$(3),t.JRh(e.header),t.R7$(),t.Y8G("colors",e.chartOptions.colors)("series",e.chartOptions.series)("fill",e.chartOptions.fill)("chart",e.chartOptions.chart)("xaxis",e.chartOptions.xaxis)("stroke",e.chartOptions.stroke)("tooltip",e.chartOptions.tooltip)("dataLabels",e.chartOptions.dataLabels))},dependencies:[c.J,c.Q,u.MD],styles:[".apexcharts-gridlines[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:none!important}"]})}}return o})();const D=["chart"];let v=(()=>{class o{constructor(){this.data={},this.seriesData=[],this.header="",this.labels=[]}ngOnChanges(r){this.chartOptions={series:this.seriesData||[],chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!0,enabledOnSeries:[1],style:{fontSize:"18px",fontFamily:"Helvetica, Arial, sans-serif"}},stroke:{curve:"straight",width:[0,4]},xaxis:{categories:this.labels||[]}}}static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-bar-chart"]],viewQuery:function(a,e){if(1&a&&t.GBs(D,5),2&a){let s;t.mGM(s=t.lsd())&&(e.chart=s.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:7,consts:[["id","chart",1,"bg-white","border-[0.7px]","shadow-md","p-2","rounded-xl"],[1,"text-xl","font-semibold","px-4","border-b-[1px]","border-solid","py-4"],[3,"series","chart","xaxis","stroke","tooltip","dataLabels"]],template:function(a,e){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.nrm(4,"apx-chart",2),t.k0s()),2&a&&(t.R7$(3),t.JRh(e.header),t.R7$(),t.Y8G("series",e.chartOptions.series)("chart",e.chartOptions.chart)("xaxis",e.chartOptions.xaxis)("stroke",e.chartOptions.stroke)("tooltip",e.chartOptions.tooltip)("dataLabels",e.chartOptions.dataLabels))},dependencies:[c.J,c.Q],styles:[".apexcharts-gridlines[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:none!important}"]})}}return o})();var F=n(31849);const w=["chart"];let R=(()=>{class o{constructor(){this.seriesData=[],this.header="",this.labels=[],this.chartOptions={}}ngOnChanges(r){this.chartOptions=this.getChartOptions()}getChartOptions(){return{series:this.seriesData||[],chart:{height:350,width:"100%",type:"pie"},labels:this.labels||[],dataLabels:{enabled:!0,style:{fontFamily:"Inter, sans-serif"}},stroke:{colors:["#fff"]},legend:{position:"bottom",fontFamily:"Inter, sans-serif"},responsive:[{breakpoint:480,options:{chart:{width:300},legend:{position:"bottom"}}}]}}static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-pie-chart"]],viewQuery:function(a,e){if(1&a&&t.GBs(w,5),2&a){let s;t.mGM(s=t.lsd())&&(e.chart=s.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels"},standalone:!0,features:[t.OA$,t.aNF],decls:7,vars:8,consts:[["fuseCard",""],[1,"flex","flex-col","border-[0.7px]","w-full","h-full"],[1,"text-xl","font-semibold","px-8","border-b-[1px]","border-solid","py-4"],[1,"mt-2","px-8"],[3,"series","chart","labels","dataLabels","legend","stroke","responsive"]],template:function(a,e){1&a&&(t.j41(0,"fuse-card",1,0)(2,"div",2)(3,"h1"),t.EFF(4),t.k0s()(),t.j41(5,"div",3),t.nrm(6,"apx-chart",4),t.k0s()()),2&a&&(t.R7$(4),t.JRh(e.header),t.R7$(2),t.Y8G("series",e.chartOptions.series)("chart",e.chartOptions.chart)("labels",e.chartOptions.labels)("dataLabels",e.chartOptions.dataLabels)("legend",e.chartOptions.legend)("stroke",e.chartOptions.stroke)("responsive",e.chartOptions.responsive))},dependencies:[c.J,c.Q,F.$]})}}return o})();var x=n(44549),T=n(5964),L=n(23294);const P=["chart"];let G=(()=>{class o{constructor(){this.seriesData=[],this.header="",this.labels=[]}ngOnChanges(r){this.chartOptions={series:this.seriesData,chart:{height:350,type:"bar",events:{click:function(a,e,s){}}},colors:["#008FFB","#00E396","#FEB019","#FF4560"],plotOptions:{bar:{columnWidth:"45%",distributed:!0,borderRadius:5,borderRadiusApplication:"end"}},dataLabels:{enabled:!0,formatter:a=>null!==a?`${a} Ticket`:"N/A",style:{fontWeight:"bold",colors:["#3ECA22"],fontSize:"12px"},background:{enabled:!0,foreColor:"#fff",borderRadius:4,padding:4,opacity:.9,borderWidth:1,borderColor:"#3ECA22",dropShadow:{enabled:!0,top:2,left:1,blur:3,opacity:.3,color:"#3ECA22"}}},legend:{show:!1},grid:{borderColor:"#e7e7e7",yaxis:{lines:{show:!0}}},stroke:{curve:"straight",width:[0,4]},xaxis:{categories:this.labels,labels:{style:{colors:["#008FFB","#00E396","#FEB019","#FF4560"],fontSize:"12px"}}}}}static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-column-chart"]],viewQuery:function(a,e){if(1&a&&t.GBs(P,5),2&a){let s;t.mGM(s=t.lsd())&&(e.chart=s.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:11,consts:[["id","chart",1,"bg-white","border-[0.7px]","shadow-md","p-2","rounded-xl","h-full"],[1,"text-xl","font-semibold","px-4","border-b-[1px]","border-solid","py-4"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","stroke","legend","colors","grid"]],template:function(a,e){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.nrm(4,"apx-chart",2),t.k0s()),2&a&&(t.R7$(3),t.JRh(e.header),t.R7$(),t.Y8G("series",e.chartOptions.series)("chart",e.chartOptions.chart)("dataLabels",e.chartOptions.dataLabels)("plotOptions",e.chartOptions.plotOptions)("yaxis",e.chartOptions.yaxis)("xaxis",e.chartOptions.xaxis)("stroke",e.chartOptions.stroke)("legend",e.chartOptions.legend)("colors",e.chartOptions.colors)("grid",e.chartOptions.grid))},dependencies:[c.J,c.Q]})}}return o})();const S=["chart"];let U=(()=>{class o{constructor(){this.data={},this.seriesData=[],this.header="",this.labels=[]}ngOnChanges(r){this.chartOptions={series:this.seriesData,chart:{type:"bar",height:380},plotOptions:{bar:{barHeight:"45%",distributed:!0,horizontal:!0,dataLabels:{position:"bottom"}}},colors:["#FEB019","#FF4560","#008FFB","#00E396"],dataLabels:{enabled:!0,textAnchor:"start",style:{fontWeight:"bold",colors:["#3ECA22"],fontSize:"12px"},formatter:function(a,e){return e.w.globals.labels[e.dataPointIndex]+":  "+a},offsetX:0,background:{enabled:!0,foreColor:"#fff",borderRadius:4,padding:4,opacity:.9,borderWidth:1,borderColor:"#3ECA22",dropShadow:{enabled:!0,top:2,left:1,blur:3,opacity:.3,color:"#3ECA22"}}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:this.labels},yaxis:{labels:{show:!1}},tooltip:{theme:"dark",x:{show:!1},y:{title:{formatter:function(){return"Ticket"}}}}}}static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-bar-chart-side"]],viewQuery:function(a,e){if(1&a&&t.GBs(S,5),2&a){let s;t.mGM(s=t.lsd())&&(e.chart=s.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:12,consts:[["id","chart",1,"bg-white","border-[0.7px]","shadow-md","p-2","rounded-xl"],[1,"text-xl","font-semibold","px-4","border-b-[1px]","border-solid","py-4"],[3,"series","chart","dataLabels","stroke","colors","title","subtitle","plotOptions","yaxis","xaxis","tooltip"]],template:function(a,e){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.nrm(4,"apx-chart",2),t.k0s()),2&a&&(t.R7$(3),t.JRh(e.header),t.R7$(),t.Y8G("series",e.chartOptions.series)("chart",e.chartOptions.chart)("dataLabels",e.chartOptions.dataLabels)("stroke",e.chartOptions.stroke)("colors",e.chartOptions.colors)("title",e.chartOptions.title)("subtitle",e.chartOptions.subtitle)("plotOptions",e.chartOptions.plotOptions)("yaxis",e.chartOptions.yaxis)("xaxis",e.chartOptions.xaxis)("tooltip",e.chartOptions.tooltip))},dependencies:[c.J,c.Q],styles:[".apexcharts-gridlines[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:none!important}"]})}}return o})();var A=n(3366),B=n(45794);function $(o,j){if(1&o&&(t.j41(0,"mat-option",24),t.EFF(1),t.k0s()),2&o){const r=j.$implicit;t.Y8G("value",r),t.R7$(),t.SpI(" ",r," ")}}const g=new Date,E=g.getMonth(),N=g.getFullYear(),Y=[{path:"",component:(()=>{class o{constructor(r,a,e){this.fb=r,this._apiService=a,this._toast=e,this.products=[],this.today=new Date,this.data={},this.chartUserRole=[],this.pieSeriesData=[],this.pieLabels=[],this.chartCategoryLabels=[],this.chartPriorityLabels=[],this.chartPeriodeLabels=[],this.chartUserTicketsLabels=[],this.ChartUserResolvedLabels=[],this.ChartTicketProductsLabels=[],this.range=new l.gE({start:new l.MJ(new Date(N,E)),end:new l.MJ(new Date)}),this.formatDate=s=>s?x.c9.fromJSDate(new Date(s)).toISODate():null}ngOnInit(){this.fetchProducts(),this.analyticsForm=this.fb.group({products_name:[this.products[0],[l.k0.required]]}),this.range.get("end")?.valueChanges.pipe((0,T.p)(r=>!!r&&!!this.range.value.start),(0,L.F)()).subscribe(r=>{const a=new Date(r),e=new Date(this.range.value.start),s=this.analyticsForm.value.products_name;!isNaN(e.getTime())&&!isNaN(a.getTime())&&s&&this.fetchAnalytics(s,e.toLocaleDateString("en-CA"),a.toLocaleDateString("en-CA"))}),this.analyticsForm.get("products_name")?.valueChanges.subscribe(r=>{const e=this.range.value.end,s=new Date(this.range.value.start),d=new Date(e);!isNaN(s.getTime())&&!isNaN(d.getTime())&&r&&this.fetchAnalytics(r,s.toLocaleDateString("en-CA"),d.toLocaleDateString("en-CA"))})}fetchProducts(){var r=this;return(0,f.A)(function*(){try{const a=yield r._apiService.get("api/V1/list-products");r.products=a.data,r.analyticsForm.patchValue({products_name:r.products[0]})}catch(a){throw console.error("Error fetching data:",a),a}})()}fetchAnalytics(r,a,e){var s=this;return(0,f.A)(function*(){try{const d=yield s._apiService.post("api/V1/statistik",{products_name:r,start_date:a,end_date:e});s.data=d.data.data,s.chartUserRole=[],s.data.CharUserRole.forEach(i=>{s.chartUserRole.push({total_user_role:i.total_user_role,role:i.role})}),s.pieSeriesData=s.chartUserRole.map(i=>Number(i.total_user_role)),s.pieLabels=s.chartUserRole.map(i=>i.role),s.chartCategoryData=[{name:"Total Tiket",data:s.data.ChartCategory.map(i=>i.total_tickets),type:"bar"},{name:"Total Tiket",data:s.data.ChartCategory.map(i=>i.total_tickets),type:"line"}],s.chartCategoryLabels=s.data.ChartCategory.map(i=>i.category_name),s.chartPriorityData=[{name:"Total Tiket",data:s.data.ChartPriority.map(i=>i.value),type:"bar"}],s.chartPriorityLabels=s.data.ChartPriority.map(i=>i.label),s.chartPeriodeData=[{name:"Total Tiket",data:s.data.ChartTicketPeriode.map(i=>i.total_tickets),type:"area"}],s.chartPeriodeLabels=s.data.ChartTicketPeriode.map(i=>i.created_at),s.chartUserTicketsData=[{name:"Tickets Created",data:s.data.ChartUserTickets.map(i=>i.total_user_tickets),type:"bar"}],s.chartUserTicketsLabels=s.data.ChartUserTickets.map(i=>i.name),s.ChartUserResolvedData=[{data:s.data.ChartUserResolved.map(i=>i.resolved_count)}],s.ChartUserResolvedLabels=s.data.ChartUserResolved.map(i=>i.name),s.ChartTicketProductsData=[{data:s.data.ChartTicketProducts.map(i=>i.total_tickets)}],s.ChartTicketProductsLabels=s.data.ChartTicketProducts.map(i=>i.name)}catch(d){throw s._toast.error("Failed Fetch Data","Error"),d}})()}static{this.\u0275fac=function(a){return new(a||o)(t.rXU(l.ok),t.rXU(A.G),t.rXU(B.tw))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-analytics"]],standalone:!0,features:[t.aNF],decls:32,vars:27,consts:[["picker",""],[1,"w-full","h-full","p-5","sm:p-10","bg-[#f9fafb]"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between"],[1,"mb-5","sm:mb-0"],[1,"text-4xl","font-bold"],[1,"flex","items-center","w-full","sm:w-1/3","gap-4",3,"formGroup"],["hideRequiredMarker","",1,"w-full"],[1,"text-sm","opacity-50","font-medium"],["formControlName","products_name","placeholder","Select Products"],["class","px-3 py-1 font-medium text-base rounded-full",3,"value",4,"ngFor","ngForOf"],[1,"w-full"],[1,"w-full",3,"rangePicker","formGroup","max"],["matStartDate","","formControlName","start","placeholder","Start date",1,"w-full"],["matEndDate","","formControlName","end","placeholder","End date",1,"w-full"],["matSuffix","",3,"for"],["touchUi",""],[1,"mt-5","sm:mt-10","h-fit","w-full","flex","flex-col","gap-4"],[1,"w-full","grid","grid-cols-1","sm:grid-cols-5","gap-2"],[1,"col-span-2","sm:col-span-5","xl:col-span-2",3,"seriesData","labels","header"],[1,"col-span-2","sm:col-span-3","xl:col-span-2",3,"seriesData","labels","header"],[1,"col-span-1","sm:col-span-2","xl:col-span-1",3,"header","seriesData","labels"],[1,"w-full","grid","grid-cols-1","sm:grid-cols-4","gap-2"],[1,"col-span-2",3,"header","seriesData","labels"],[1,"col-span-2","h-full",3,"seriesData","labels","header"],[1,"px-3","py-1","font-medium","text-base","rounded-full",3,"value"]],template:function(a,e){if(1&a&&(t.j41(0,"main",1)(1,"div",2)(2,"div",3)(3,"h1",4),t.EFF(4,"Analytics"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Data Statistic Report"),t.k0s()(),t.j41(7,"form",5)(8,"mat-form-field",6)(9,"mat-label",7),t.EFF(10,"Products"),t.k0s(),t.j41(11,"mat-select",8),t.DNE(12,$,2,2,"mat-option",9),t.k0s()(),t.j41(13,"mat-form-field",10)(14,"mat-label",7),t.EFF(15,"Start Date - End Date"),t.k0s(),t.j41(16,"mat-date-range-input",11),t.nrm(17,"input",12)(18,"input",13),t.k0s(),t.nrm(19,"mat-datepicker-toggle",14)(20,"mat-date-range-picker",15,0),t.k0s()()(),t.j41(22,"div",16)(23,"div",17),t.nrm(24,"app-column-chart",18)(25,"app-bar-chart",19)(26,"app-pie-chart",20),t.k0s(),t.j41(27,"div",21),t.nrm(28,"app-bar-chart-side",22)(29,"app-bar-chart-side",22)(30,"app-column-chart",22)(31,"app-area-chart",23),t.k0s()()()),2&a){const s=t.sdS(21);t.R7$(7),t.Y8G("formGroup",e.analyticsForm),t.R7$(5),t.Y8G("ngForOf",e.products),t.R7$(4),t.Y8G("rangePicker",s)("formGroup",e.range)("max",e.today),t.R7$(3),t.Y8G("for",s),t.R7$(5),t.Y8G("seriesData",e.chartPriorityData)("labels",e.chartPriorityLabels)("header","Tickets By Priority"),t.R7$(),t.Y8G("seriesData",e.chartCategoryData)("labels",e.chartCategoryLabels)("header","Tickets By Category"),t.R7$(),t.Y8G("header","User By Roles")("seriesData",e.pieSeriesData)("labels",e.pieLabels),t.R7$(2),t.Y8G("header","Tickets Resolved By Users")("seriesData",e.ChartUserResolvedData)("labels",e.ChartUserResolvedLabels),t.R7$(),t.Y8G("header","Tickets By Products")("seriesData",e.ChartTicketProductsData)("labels",e.ChartTicketProductsLabels),t.R7$(),t.Y8G("header","Tickets Create By Users")("seriesData",e.chartUserTicketsData)("labels",e.chartUserTicketsLabels),t.R7$(),t.Y8G("seriesData",e.chartPeriodeData)("labels",e.chartPeriodeLabels)("header","Tickets By Periode")}},dependencies:[R,O,p.RG,p.rl,p.nJ,p.yw,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,y.Ve,y.VO,b.wT,l.YN,b.Sy,u.MD,u.Sq,h.X6,h.bU,h.el,h.xR,h.IG,h.SG,C.fS,v,G,U],styles:[".mat-mdc-form-field-subscript-wrapper{display:none!important}"]})}}return o})()}]}}]);