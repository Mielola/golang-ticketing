"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[789],{10789:(Y,h,a)=>{a.r(h),a.d(h,{default:()=>D});var u=a(10467),f=a(60177),r=a(89417),F=a(88834),k=a(86600),d=a(25084),c=a(53719),b=a(99213),g=a(59042),v=a(82798),p=a(76233),T=a(5271),y=a(44549),C=a(89967),t=a(54438),j=a(3366),I=a(74710),E=a(75351);const R=(i,l,e,o)=>({"text-green-600":i,"text-blue-600":l,"text-yellow-600":e,"text-red-600":o});function G(i,l){1&i&&t.EFF(0,"Ticket Information")}function S(i,l){if(1&i&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function $(i,l){if(1&i&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function N(i,l){if(1&i&&(t.j41(0,"mat-option",34),t.nrm(1,"mat-icon",35),t.EFF(2),t.k0s()),2&i){const e=l.$implicit;t.Y8G("value",e),t.R7$(),t.Y8G("ngClass",t.ziG(3,R,"low"===e.toLowerCase(),"medium"===e.toLowerCase(),"high"===e.toLowerCase(),"critical"===e.toLowerCase())),t.R7$(),t.SpI(" ",e," ")}}function w(i,l){1&i&&t.EFF(0,"Response Information")}const D=[{path:"",component:(()=>{class i{constructor(e,o,s,n){this._apiService=e,this.fb=o,this.router=s,this._matDialog=n,this.products=[],this.category=[],this.priority=["Low","Medium","High"],this.disableInput=!0,this.isLoading=!1}ngOnInit(){var e=this;this.fetchDataProducts(),this.firstTicketForm=this.fb.group({products_name:["",r.k0.required],subject:[{value:"",disabled:this.disableInput},r.k0.required],category_name:[{value:"",disabled:this.disableInput},r.k0.required],detail_kendala:[{value:"",disabled:this.disableInput},r.k0.required],priority:[{value:"",disabled:this.disableInput},r.k0.required],hari_masuk:[{value:null,disabled:this.disableInput},r.k0.required],waktu_masuk:[{value:"",disabled:this.disableInput},r.k0.required],hari_respon:[{value:null,disabled:this.disableInput},r.k0.required],waktu_respon:[{value:"",disabled:this.disableInput},r.k0.required]}),this.secondTicketForm=this.fb.group({PIC:["",[r.k0.required]],no_whatsapp:["",[r.k0.required]],respon_diberikan:["",r.k0.required]}),this.firstTicketForm.get("products_name")?.valueChanges.subscribe(function(){var o=(0,u.A)(function*(s){if(s){const{data:n}=yield e._apiService.post("api/V1/get-data-form",{name:s});e.category=n.data,e.enableFields()}else e.disableFields()});return function(s){return o.apply(this,arguments)}}())}enableFields(){Object.keys(this.firstTicketForm.controls).forEach(e=>{"products_name"!==e&&this.firstTicketForm.get(e)?.enable()})}disableFields(){Object.keys(this.firstTicketForm.controls).forEach(e=>{"products_name"!==e&&this.firstTicketForm.get(e)?.disable()})}fetchDataProducts(){var e=this;return(0,u.A)(function*(){try{const o=yield e._apiService.get("api/V1/list-products");e.products=o.data}catch(o){console.error("Error fetching data:",o)}})()}addProducts(){this._matDialog.open(C.H,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}onSubmit(){var e=this;return(0,u.A)(function*(){try{e.isLoading=!0;const o=m=>m?y.c9.fromJSDate(new Date(m)).toISODate():null,s={...e.firstTicketForm.value,...e.secondTicketForm.value,hari_masuk:o(e.firstTicketForm.value.hari_masuk),hari_respon:o(e.firstTicketForm.value.hari_respon),entry_day:o(e.firstTicketForm.value.entry_day),response_day:o(e.firstTicketForm.value.response_day),PIC:e.secondTicketForm.value.PIC,no_whatsapp:e.secondTicketForm.value.no_whatsapp};console.log("Data yang dikirim:",s);const n=yield e._apiService.post("api/V1/tickets",s);e.isLoading=!1,201===n.status&&(e.router.navigateByUrl("/dashboards/tickets"),e.firstTicketForm.disable(),e.firstTicketForm.reset(),e.secondTicketForm.disable(),e.secondTicketForm.reset())}catch(o){console.error("Error submitting form:",o),e.isLoading=!1}})()}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(j.G),t.rXU(r.ok),t.rXU(I.Ix),t.rXU(E.bZ))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-form-add-tickets"]],standalone:!0,features:[t.aNF],decls:78,vars:16,consts:[["stepper","matHorizontalStepper"],["picker",""],["pickers",""],[1,"flex","justify-center","bg-[url('/assets/images/cards/moon.jpg')]","bg-center","bg-cover","w-full","py-0","sm:py-20"],[1,"bg-white","shadow-xl","w-full","mx-5","md:mx-40","h-fit","p-5","sm:rounded"],[1,"self-start","text-lg","font-semibold","uppercase"],[1,"text-sm","opacity-60","font-medium"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[3,"linear"],[3,"stepControl"],[1,"mt-8","w-full",3,"formGroup"],["matStepLabel",""],["action","",1,"mt-2.5","flex","flex-col"],["hideRequiredMarker","",1,"w-full"],["formControlName","products_name","placeholder","Select Products"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value",4,"ngFor","ngForOf"],["floatLabel","always",1,"w-full"],["formControlName","subject","matInput","",3,"placeholder"],[1,"w-full"],["formControlName","category_name"],["floatLabel","always",1,"w-full","mb-2"],["formControlName","detail_kendala","matInput","","rows","4","cols","50","placeholder","Problem Detail"],["formControlName","priority","placeholder","Select Priority"],[1,"example-full-width"],["formControlName","hari_masuk","matInput","","placeholder","Choose a date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["formControlName","waktu_masuk","matInput","","type","time"],["formControlName","hari_respon","matInput","","placeholder","Choose a date",3,"matDatepicker"],["formControlName","waktu_respon","matInput","","type","time"],["mat-raised-button","",1,"bg-blue-500","w-full","rounded-full","p-3","text-white","font-semibold",3,"click"],["formControlName","PIC","matInput","",3,"placeholder"],["formControlName","no_whatsapp","matInput","",3,"placeholder"],["formControlName","respon_diberikan","matInput","","rows","4","cols","50","placeholder","Response Admin"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"value"],["svgIcon","mat_outline:bookmark",1,"-rotate-90",3,"ngClass"]],template:function(o,s){if(1&o){const n=t.RV6();t.j41(0,"main",3)(1,"div",4)(2,"h1",5),t.EFF(3,"Form Add Ticketing"),t.k0s(),t.j41(4,"h3",6),t.EFF(5,"Add Tickets"),t.k0s(),t.nrm(6,"ion-loading",7),t.j41(7,"mat-horizontal-stepper",8,0)(9,"mat-step",9)(10,"form",10),t.DNE(11,G,1,0,"ng-template",11),t.j41(12,"div",12)(13,"mat-form-field",13)(14,"mat-label"),t.EFF(15,"Products"),t.k0s(),t.j41(16,"mat-select",14),t.DNE(17,S,2,2,"mat-option",15),t.k0s()(),t.j41(18,"mat-form-field",16)(19,"mat-label"),t.EFF(20,"Subject Judul"),t.k0s(),t.nrm(21,"input",17),t.k0s(),t.j41(22,"mat-form-field",18)(23,"mat-label"),t.EFF(24,"Category"),t.k0s(),t.j41(25,"mat-select",19),t.DNE(26,$,2,2,"mat-option",15),t.k0s()(),t.j41(27,"mat-form-field",20)(28,"mat-label"),t.EFF(29,"Problem Detail"),t.k0s(),t.nrm(30,"textarea",21),t.k0s(),t.j41(31,"mat-form-field",13)(32,"mat-label"),t.EFF(33,"Priority"),t.k0s(),t.j41(34,"mat-select",22),t.DNE(35,N,3,8,"mat-option",15),t.k0s()(),t.j41(36,"mat-form-field",23)(37,"mat-label"),t.EFF(38,"Entry day"),t.k0s(),t.nrm(39,"input",24)(40,"mat-datepicker-toggle",25)(41,"mat-datepicker",26,1),t.k0s(),t.j41(43,"mat-form-field",23)(44,"mat-label"),t.EFF(45,"Entry Time"),t.k0s(),t.nrm(46,"input",27),t.k0s(),t.j41(47,"mat-form-field",23)(48,"mat-label"),t.EFF(49,"Respon day"),t.k0s(),t.nrm(50,"input",28)(51,"mat-datepicker-toggle",25)(52,"mat-datepicker",26,2),t.k0s(),t.j41(54,"mat-form-field",23)(55,"mat-label"),t.EFF(56,"Respon Time"),t.k0s(),t.nrm(57,"input",29),t.k0s(),t.j41(58,"button",30),t.bIt("click",function(){t.eBV(n);const x=t.sdS(8);return t.Njj(x.next())}),t.EFF(59," Next "),t.k0s()()()(),t.j41(60,"mat-step",9)(61,"form",10),t.DNE(62,w,1,0,"ng-template",11),t.j41(63,"div",12)(64,"mat-form-field",16)(65,"mat-label"),t.EFF(66,"PIC"),t.k0s(),t.nrm(67,"input",31),t.k0s(),t.j41(68,"mat-form-field",16)(69,"mat-label"),t.EFF(70,"No Whatsapp Client"),t.k0s(),t.nrm(71,"input",32),t.k0s(),t.j41(72,"mat-form-field",20)(73,"mat-label"),t.EFF(74,"Response Admin"),t.k0s(),t.nrm(75,"textarea",33),t.k0s(),t.j41(76,"button",30),t.bIt("click",function(){return t.eBV(n),t.Njj(s.onSubmit())}),t.EFF(77," Submit "),t.k0s()()()()()()()}if(2&o){const n=t.sdS(42),m=t.sdS(53);t.R7$(6),t.Y8G("isOpen",s.isLoading),t.R7$(),t.Y8G("linear",!0),t.R7$(2),t.Y8G("stepControl",s.firstTicketForm),t.R7$(),t.Y8G("formGroup",s.firstTicketForm),t.R7$(7),t.Y8G("ngForOf",s.products),t.R7$(4),t.Y8G("placeholder","Subject Judul"),t.R7$(5),t.Y8G("ngForOf",s.category),t.R7$(9),t.Y8G("ngForOf",s.priority),t.R7$(4),t.Y8G("matDatepicker",n),t.R7$(),t.Y8G("for",n),t.R7$(10),t.Y8G("matDatepicker",m),t.R7$(),t.Y8G("for",m),t.R7$(9),t.Y8G("stepControl",null),t.R7$(),t.Y8G("formGroup",s.secondTicketForm),t.R7$(6),t.Y8G("placeholder","PIC"),t.R7$(4),t.Y8G("placeholder","No Whatsapp")}},dependencies:[c.RG,c.rl,c.nJ,c.yw,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,v.Ve,v.VO,k.wT,k.Sy,F.Hl,F.$z,g.fS,g.fg,d.X6,d.Vh,d.bZ,d.bU,p.aP,p.V5,p.Ti,p.M6,f.MD,f.YU,f.Sq,b.m_,b.An,k.WX,T.rQ],encapsulation:2})}}return i})()}]}}]);