"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3096],{33096:(Me,H,i)=>{i.r(H),i.d(H,{default:()=>Ge});var f=i(10467),e=i(54438),I=i(74710),h=i(60177),c=i(89417),$=i(82765),D=i(86600),G=i(25084),b=i(75351),x=i(53719),F=i(99213),v=i(59042),w=i(59115),R=i(96695),N=i(82798),T=i(2042),p=i(9159),A=i(21413),k=i(88834),Y=i(40171),B=i(44549),y=i(3366),O=i(10801),j=i(45794);let P=(()=>{class a{constructor(t,o){this._apiService=t,this._toastService=o,this._data=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isNotFound=(0,e.vPA)(!1)}Update(t){this._data.set(t)}fetchData(){var t=this;return(0,f.A)(function*(){t.isLoading.set(!0),t._apiService.get("api/V1/tickets/handover").then(function(){var o=(0,f.A)(function*(n){t.isLoading.set(!1),t.isNotFound.set(!1),t._data.set(n.data),null!==n.data||t.isNotFound.set(!0)});return function(n){return o.apply(this,arguments)}}()).catch(function(){var o=(0,f.A)(function*(n){t.isLoading.set(!1),t.isNotFound.set(!0),t._toastService.error("Failed to fetch data","Error")});return function(n){return o.apply(this,arguments)}}())})()}static{this.\u0275fac=function(o){return new(o||a)(e.KVO(y.G),e.KVO(j.tw))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();const S=()=>({disableClose:!0}),X=()=>[5,10,20],U=(a,r,t)=>({"bg-blue-500":a,"bg-yellow-500":r,"bg-green-500":t}),M=(a,r,t,o)=>({"text-green-600":a,"text-blue-600":r,"text-yellow-600":t,"text-red-600":o}),J=a=>["/dashboards/tickets",a];function W(a,r){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",34),e.mxI("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.DH7(s.checked,n)||(s.checked=n),e.Njj(n)}),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())})("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.applyProductsFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=r.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.SpI(" ",t.name," ")}}function z(a,r){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",35),e.mxI("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.DH7(s.checked,n)||(s.checked=n),e.Njj(n)}),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())})("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.applyCategoryFilter())}),e.EFF(1),e.k0s()}if(2&a){const t=r.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.JRh(t.name)}}function Q(a,r){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",34),e.mxI("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.DH7(s.checked,n)||(s.checked=n),e.Njj(n)}),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())})("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.applyStatusFilter())}),e.j41(1,"div",36)(2,"h1",37),e.EFF(3),e.k0s()()()}if(2&a){const t=r.$implicit;e.R50("ngModel",t.checked),e.R7$(),e.Y8G("ngClass",e.sMw(3,U,"New"===t.name,"On Progress"===t.name,"Resolved"===t.name)),e.R7$(2),e.JRh(t.name)}}function Z(a,r){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",34),e.mxI("ngModelChange",function(n){const s=e.eBV(t).$implicit;return e.DH7(s.checked,n)||(s.checked=n),e.Njj(n)}),e.bIt("click",function(n){return e.eBV(t),e.Njj(n.stopPropagation())})("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.applyPriorityFilter())}),e.j41(1,"div",16),e.nrm(2,"mat-icon",38),e.j41(3,"h1",39),e.EFF(4),e.k0s()()()}if(2&a){const t=r.$implicit;e.R50("ngModel",t.checked),e.R7$(2),e.Y8G("ngClass",e.ziG(3,M,"Low"===t.name,"Hedium"===t.name,"High"===t.name,"Critical"===t.name)),e.R7$(2),e.JRh(t.name)}}function K(a,r){1&a&&(e.j41(0,"div",40),e.nrm(1,"div",41)(2,"div",41)(3,"div",41)(4,"div",41)(5,"div",41)(6,"div",41)(7,"div",42),e.k0s())}function q(a,r){1&a&&(e.j41(0,"div")(1,"div",43),e.nrm(2,"img",44)(3,"br"),e.j41(4,"p",45),e.EFF(5,"Data Not Found"),e.k0s(),e.j41(6,"p",46),e.EFF(7,"try using a different keyword or add a new tickets"),e.k0s()()())}function ee(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Tracking ID "),e.k0s())}function te(a,r){if(1&a&&(e.j41(0,"mat-cell",69)(1,"a",70),e.EFF(2),e.k0s()()),2&a){const t=r.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(2,J,t.tracking_id)),e.R7$(),e.JRh(t.tracking_id)}}function ae(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Date "),e.k0s())}function ne(a,r){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.nrm(2,"br"),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.SpI(" ",null==t.created_at?null:t.created_at.split(" ")[0]," ")}}function oe(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Created Time "),e.k0s())}function re(a,r){if(1&a&&(e.j41(0,"mat-cell",16),e.nrm(1,"mat-icon",71),e.EFF(2),e.nrm(3,"br"),e.k0s()),2&a){const t=r.$implicit;e.R7$(2),e.SpI(" ",null==t.created_at?null:t.created_at.split(" ")[1]," ")}}function se(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Category "),e.k0s())}function ie(a,r){if(1&a&&(e.j41(0,"mat-cell",72),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.SpI(" ",t.category_name," ")}}function le(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Name "),e.k0s())}function ce(a,r){1&a&&(e.j41(0,"div",40),e.nrm(1,"div",41),e.k0s())}function me(a,r){if(1&a&&(e.j41(0,"mat-cell",73)(1,"div",74),e.nrm(2,"img",75),e.j41(3,"p",37),e.EFF(4),e.k0s()()()),2&a){const t=r.$implicit;e.R7$(2),e.Y8G("src",t.avatar,e.B4B),e.R7$(2),e.JRh(t.user_name)}}function de(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Shift Created "),e.k0s())}function ue(a,r){if(1&a&&(e.j41(0,"mat-cell",72),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.Lme(" ",t.shifts_id," (",t.shift_name,") ")}}function pe(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," PIC "),e.k0s())}function fe(a,r){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.SpI(" ",""==(null==t?null:t.PIC)||null==(null==t?null:t.PIC)?"Not Found":t.PIC," ")}}function he(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Subject "),e.k0s())}function _e(a,r){if(1&a&&(e.j41(0,"mat-cell",76),e.EFF(1),e.k0s()),2&a){const t=r.$implicit;e.R7$(),e.SpI(" ",t.subject," ")}}function ge(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Whatsapp Client "),e.k0s())}function ve(a,r){if(1&a&&(e.j41(0,"mat-cell")(1,"a",77),e.EFF(2),e.k0s()()),2&a){const t=r.$implicit;e.R7$(),e.Y8G("href","https://wa.me/"+(null==t?null:t.no_whatsapp),e.B4B),e.R7$(),e.SpI(" ",""===(null==t?null:t.no_whatsapp)?"Not Found":t.no_whatsapp," ")}}function be(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Status "),e.k0s())}function xe(a,r){if(1&a){const t=e.RV6();e.j41(0,"mat-option",82),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG().$implicit,d=e.XpG(2);return e.Njj(d.changeStatus(s.tracking_id,n))}),e.EFF(1),e.k0s()}if(2&a){const t=r.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}function Fe(a,r){if(1&a){const t=e.RV6();e.j41(0,"mat-cell",78)(1,"mat-form-field",79)(2,"mat-select",80),e.mxI("valueChange",function(n){const s=e.eBV(t).$implicit;return e.DH7(s.status,n)||(s.status=n),e.Njj(n)}),e.DNE(3,xe,2,2,"mat-option",81),e.k0s()()()}if(2&a){const t=r.$implicit,o=e.XpG(2);e.R7$(2),e.R50("value",t.status),e.Y8G("disabled","Resolved"===t.status||o.shiftStatus&&!o.isAdmin),e.R7$(),e.Y8G("ngForOf",o.statusList)}}function ke(a,r){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Priority "),e.k0s())}function ye(a,r){if(1&a&&(e.j41(0,"mat-cell",16),e.nrm(1,"mat-icon",38),e.j41(2,"h1",39),e.EFF(3),e.k0s()()),2&a){const t=r.$implicit;e.R7$(),e.Y8G("ngClass",e.ziG(2,M,"Low"===t.priority,"Medium"===t.priority,"High"===t.priority,"Critical"===t.priority)),e.R7$(2),e.JRh(t.priority)}}function Ce(a,r){1&a&&e.nrm(0,"mat-header-row")}function we(a,r){1&a&&e.nrm(0,"mat-row")}function je(a,r){if(1&a&&(e.j41(0,"mat-table",47,6)(2,"div"),e.qex(3,48),e.DNE(4,ee,2,0,"mat-header-cell",49)(5,te,3,4,"mat-cell",50),e.bVm(),e.qex(6,51),e.DNE(7,ae,2,0,"mat-header-cell",49)(8,ne,3,1,"mat-cell",52),e.bVm(),e.qex(9,53),e.DNE(10,oe,2,0,"mat-header-cell",49)(11,re,4,1,"mat-cell",54),e.bVm(),e.qex(12,55),e.DNE(13,se,2,0,"mat-header-cell",49)(14,ie,2,1,"mat-cell",56),e.bVm(),e.qex(15,57),e.DNE(16,le,2,0,"mat-header-cell",49)(17,ce,2,0,"div",29)(18,me,5,2,"mat-cell",58),e.bVm(),e.qex(19,59),e.DNE(20,de,2,0,"mat-header-cell",49)(21,ue,2,2,"mat-cell",56),e.bVm(),e.qex(22,60),e.DNE(23,pe,2,0,"mat-header-cell",49)(24,fe,2,1,"mat-cell",52),e.bVm(),e.qex(25,61),e.DNE(26,he,2,0,"mat-header-cell",49)(27,_e,2,1,"mat-cell",62),e.bVm(),e.qex(28,63),e.DNE(29,ge,2,0,"mat-header-cell",49)(30,ve,3,2,"mat-cell",52),e.bVm(),e.qex(31,64),e.DNE(32,be,2,0,"mat-header-cell",49)(33,Fe,4,3,"mat-cell",65),e.bVm(),e.qex(34,66),e.DNE(35,ke,2,0,"mat-header-cell",49)(36,ye,4,7,"mat-cell",54),e.bVm(),e.DNE(37,Ce,1,0,"mat-header-row",67)(38,we,1,0,"mat-row",68),e.k0s()()),2&a){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(17),e.Y8G("ngIf",t.isLoading),e.R7$(20),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}const E=new Date,Se=E.getMonth(),De=E.getFullYear();E.getDay();let Re=(()=>{class a{constructor(t,o,n,s,d){this._apiService=t,this.cdr=o,this._ticketLogsService=n,this._handOversService=s,this._matDialog=d,this.filterValues={search:"",category:[],products:[],status:[],priority:[]},this.shiftStatus=!0,this.isAdmin="admin"===localStorage.getItem("userRole"),this.ticketStatus=!1,this.statusList=["New","On Progress","Resolved"],this.productsItems=[],this.category=[],this.statusItems=[],this.priorityItems=[],this._unsubscribeAll=new A.B,this.displayedColumns=["tracking_id","name","shift_created","create_date","create_time","category","subject","pic","no_whatsapp","status","priority"],this.dataSource=new p.I6,this.range=new c.gE({start:new c.MJ(new Date(De,Se-1)),end:new c.MJ(new Date)}),this.formatDate=m=>m?B.c9.fromJSDate(new Date(m)).toISODate():null,this.formatTime=m=>{const u=new Date(m);return`${u.getHours().toString().padStart(2,"0")}:${u.getMinutes().toString().padStart(2,"0")}`},(0,e.QZP)(()=>{this.dataSource.data=this.datas;const m=new Set,u=new Set,_=new Set,C=new Set;this.datas.forEach(l=>{l.products_name&&(Array.isArray(l.products_name)?l.products_name.forEach(g=>C.add(g)):C.add(l.products_name)),l.category_name&&(Array.isArray(l.category_name)?l.category_name.forEach(g=>m.add(g)):(m.add(l.category_name),u.add(l.status))),l.status&&(Array.isArray(l.status)?l.status.forEach(g=>u.add(g)):u.add(l.status)),l.priority&&(Array.isArray(l.priority)?l.priority.forEach(g=>g.add(g)):_.add(l.priority)),l.subject||(l.subject="Subject Not Found")}),this.statusItems=[...u].map(l=>({name:l,checked:!1})),this.category=[...m].map(l=>({name:l,checked:!1})),this.priorityItems=[..._].map(l=>({name:l,checked:!1})),this.productsItems=[...C].map(l=>({name:l,checked:!1}))})}get datas(){return this._handOversService._data()}get isLoading(){return this._handOversService.isLoading()}get isNotDataFound(){return this._handOversService.isNotFound()}ngOnInit(){this._handOversService.fetchData(),this.fetchUsers(),this.range.valueChanges.subscribe(({start:t,end:o})=>{o&&(t instanceof Date||new Date(t),o instanceof Date||new Date(o))})}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}generateReport(){this._matDialog.open(Y.E,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}fetchUsers(){var t=this;return(0,f.A)(function*(){try{const o=yield t._apiService.get("api/V1/get-profile");t.shiftStatus="Active Shift"!==o.data.shift_status,t.cdr.detectChanges()}catch(o){throw o}})()}applyFilter(){this.dataSource.filterPredicate=(t,o)=>{let n=JSON.parse(o);console.log(t);let s=""===n.search||t.tracking_id.toLowerCase().includes(n.search)||t.products_name.toLowerCase().includes(n.search)||t.category_name.toLowerCase().includes(n.search)||t.subject.toLowerCase().includes(n.search)||t.status.toLowerCase().includes(n.search)||t.priority.toLowerCase().includes(n.search)||t.no_whatsapp.toLowerCase().includes(n.search)||t.user?.name.toLowerCase().includes(n.search)||t.last_replier?.name.toLowerCase().includes(n.search),d=0===n.category.length||n.category.includes(t.category_name.toLowerCase()),m=0===n.status.length||n.status.includes(t.status.toLowerCase()),u=0===n.priority.length||n.priority.includes(t.priority.toLowerCase()),_=0===n.products.length||n.products.includes(t.products_name.toLowerCase());return s&&d&&m&&u&&_},this.dataSource.filter=JSON.stringify(this.filterValues)}applySearchFilter(t){this.filterValues.search=t.trim().toLowerCase(),this.applyFilter()}applyProductsFilter(){this.filterValues.products=this.productsItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyCategoryFilter(){this.filterValues.category=this.category.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyStatusFilter(){this.filterValues.status=this.statusItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}applyPriorityFilter(){this.filterValues.priority=this.priorityItems.filter(t=>t.checked).map(t=>t.name.toLowerCase()),this.applyFilter()}changeStatus(t,o){var n=this;return(0,f.A)(function*(){try{const{status:s}=yield n._apiService.post(`api/V1/ticket-status/${t}`,{status:o});if(200===s){const m=yield n._apiService.get("api/V1/tickets/handover");n._handOversService.Update(m.data)}}catch(s){throw s}})()}static{this.\u0275fac=function(o){return new(o||a)(e.rXU(y.G),e.rXU(e.gRc),e.rXU(O.j),e.rXU(P),e.rXU(b.bZ))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-handovers"]],viewQuery:function(o,n){if(1&o&&(e.GBs(T.B4,5),e.GBs(R.iy,5)),2&o){let s;e.mGM(s=e.lsd())&&(n.sort=s.first),e.mGM(s=e.lsd())&&(n.paginator=s.first)}},standalone:!0,features:[e.aNF],decls:58,vars:24,consts:[["menu","matMenu"],["products","matMenu"],["categorys","matMenu"],["status","matMenu"],["priority","matMenu"],["paginator",""],["table",""],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","flex-col","items-start","lg:flex-row","sm:items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Tickets",1,"block","w-full","p-4","ps-10","text-sm","text-gray-900","border","border-gray-300","rounded-lg","bg-gray-50","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"keyup"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","gap-2","p-2.5","rounded-full","px-3","sm:px-5","border-[1px]","text-white",3,"matMenuTriggerFor"],["svgIcon","filter_alt"],[1,"max-sm:hidden","font-semibold","text-black"],["svgIcon","keyboard_arrow_down"],["mat-menu-item","",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"min-w-[300px]"],[1,"px-5","py-3","w-full"],[1,"font-semibold","mb-2"],[1,"px-5","flex","flex-col","gap-2","w-full"],["class","h-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],["class","h-full w-full",3,"ngModel","ngModelChange","click","change",4,"ngFor","ngForOf"],[1,"px-5","py-3"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-[2180px]",3,"dataSource",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],[1,"h-full",3,"ngModelChange","click","change","ngModel"],[1,"h-full","w-full",3,"ngModelChange","click","change","ngModel"],[1,"px-3","py-1","text-white","whitespace-nowrap","rounded-full",3,"ngClass"],[1,"font-medium"],["svgIcon","mat_outline:bookmark",1,"-rotate-90",3,"ngClass"],[1,"font-medium","uppercase"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"text-lg","font-semibold"],[1,"text-sm"],["matSort","",1,"min-w-[2180px]",3,"dataSource"],["matColumnDef","tracking_id"],[4,"matHeaderCellDef"],["class","text-lg text-blue-600 font-medium underline whitespace-nowrap",4,"matCellDef"],["matColumnDef","create_date"],[4,"matCellDef"],["matColumnDef","create_time"],["class","flex items-center gap-3",4,"matCellDef"],["matColumnDef","category"],["class","flex items-center gap-3 font-medium",4,"matCellDef"],["matColumnDef","name"],["class","py-3.5 flex items-center gap-3 w-fit",4,"matCellDef"],["matColumnDef","shift_created"],["matColumnDef","pic"],["matColumnDef","subject"],["class","font-bold text-lg",4,"matCellDef"],["matColumnDef","no_whatsapp"],["matColumnDef","status"],["class","py-4 w-full",4,"matCellDef"],["matColumnDef","priority"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","text-blue-600","font-medium","underline","whitespace-nowrap"],[3,"routerLink"],["svgIcon","mat_outline:access_time"],[1,"flex","items-center","gap-3","font-medium"],[1,"py-3.5","flex","items-center","gap-3","w-fit"],[1,"w-full","flex","items-center","gap-3"],["alt","",1,"w-7","h-7","object-cover","rounded-full",3,"src"],[1,"font-bold","text-lg"],["target","_blank",3,"href"],[1,"py-4","w-full"],["hideRequiredMarker","",1,"w-full"],["placeholder","Select",3,"valueChange","value","disabled"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value","click",4,"ngFor","ngForOf"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"click","value"]],template:function(o,n){if(1&o){const s=e.RV6();e.j41(0,"section",7)(1,"div",8)(2,"div",9)(3,"label",10),e.EFF(4,"Search"),e.k0s(),e.j41(5,"div",11)(6,"div",12),e.qSk(),e.j41(7,"svg",13),e.nrm(8,"path",14),e.k0s()(),e.joV(),e.j41(9,"input",15),e.bIt("keyup",function(m){return e.eBV(s),e.Njj(n.applySearchFilter(m.target.value))}),e.k0s()()(),e.j41(10,"div",16)(11,"button",17),e.nrm(12,"mat-icon",18),e.j41(13,"span",19),e.EFF(14,"Filter"),e.k0s(),e.nrm(15,"mat-icon",20),e.k0s(),e.j41(16,"mat-menu",null,0)(18,"button",21),e.EFF(19,"Products"),e.k0s(),e.j41(20,"button",21),e.EFF(21,"Category"),e.k0s(),e.j41(22,"button",21),e.EFF(23,"Status"),e.k0s(),e.j41(24,"button",21),e.EFF(25,"Priority"),e.k0s(),e.j41(26,"mat-menu",22,1)(28,"div",23)(29,"h1",24),e.EFF(30,"Choose Products"),e.k0s()(),e.j41(31,"div",25),e.DNE(32,W,2,2,"mat-checkbox",26),e.k0s()(),e.j41(33,"mat-menu",22,2)(35,"div",23)(36,"h1",24),e.EFF(37,"Choose Category"),e.k0s()(),e.j41(38,"div",25),e.DNE(39,z,2,2,"mat-checkbox",27),e.k0s()(),e.j41(40,"mat-menu",null,3)(42,"div",28)(43,"h1",24),e.EFF(44,"Choose status"),e.k0s()(),e.DNE(45,Q,4,7,"mat-checkbox",26),e.k0s(),e.j41(46,"mat-menu",null,4)(48,"div",28)(49,"h1",24),e.EFF(50,"Choose Priority"),e.k0s()(),e.DNE(51,Z,5,8,"mat-checkbox",26),e.k0s()()()(),e.DNE(52,K,8,0,"div",29)(53,q,8,0,"div",30),e.j41(54,"div",31),e.DNE(55,je,39,4,"mat-table",32),e.k0s(),e.nrm(56,"mat-paginator",33,5),e.k0s()}if(2&o){const s=e.sdS(17),d=e.sdS(27),m=e.sdS(34),u=e.sdS(41),_=e.sdS(47);e.R7$(11),e.Y8G("matMenuTriggerFor",s),e.R7$(7),e.Y8G("matMenuTriggerFor",d)("matMenuTriggerData",e.lJ4(19,S)),e.R7$(2),e.Y8G("matMenuTriggerFor",m)("matMenuTriggerData",e.lJ4(20,S)),e.R7$(2),e.Y8G("matMenuTriggerFor",u)("matMenuTriggerData",e.lJ4(21,S)),e.R7$(2),e.Y8G("matMenuTriggerFor",_)("matMenuTriggerData",e.lJ4(22,S)),e.R7$(8),e.Y8G("ngForOf",n.productsItems),e.R7$(7),e.Y8G("ngForOf",n.category),e.R7$(6),e.Y8G("ngForOf",n.statusItems),e.R7$(6),e.Y8G("ngForOf",n.priorityItems),e.R7$(),e.Y8G("ngIf",n.isLoading),e.R7$(),e.Y8G("ngIf",n.isNotDataFound&&!n.isLoading),e.R7$(2),e.Y8G("ngIf",!n.isNotDataFound&&!n.isLoading&&0!=n.dataSource.data.length),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(23,X))("showFirstLastButtons",!0)}},dependencies:[h.MD,h.YU,h.Sq,h.bT,R.Ou,R.iy,b.hM,p.tP,p.Zl,p.tL,p.ji,p.cC,p.YV,p.iL,p.KS,p.$R,p.YZ,p.NB,c.X1,c.BC,v.fS,v.fg,x.rl,T.NQ,T.B4,F.An,w.Cn,w.kk,w.fb,w.Cp,$.g7,$.So,c.YN,c.vS,x.RG,G.X6,N.Ve,N.VO,D.wT,D.Sy,k.Hl,I.Wk],styles:[".mat-mdc-form-field-subscript-wrapper{display:none!important}",".mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%] {\n        display: none;\n    }"]})}}return a})();var Ne=i(5271),V=i(46601);let L=(()=>{class a{constructor(){this._apiService=(0,e.WQX)(y.G),this._toastService=(0,e.WQX)(j.tw),this._data=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isNotFound=(0,e.vPA)(!1)}fetchData(){var t=this;return(0,f.A)(function*(){t.isLoading.set(!0),t._apiService.get("api/V1/notes").then(function(){var o=(0,f.A)(function*(n){t.isLoading.set(!1),t.isNotFound.set(!1),t._data.set(n.data),null!==n.data&&0!=n.data.length||t.isNotFound.set(!0)});return function(n){return o.apply(this,arguments)}}()).catch(function(){var o=(0,f.A)(function*(n){t.isLoading.set(!1),t.isNotFound.set(!0),t._toastService.error("Failed to fetch data","Error")});return function(n){return o.apply(this,arguments)}}())})()}static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})(),Te=(()=>{class a{constructor(t,o,n,s,d,m,u){this._apiService=t,this.fb=o,this.toast=n,this.fuseConfirmationService=s,this._handoverService=d,this.dialogRef=m,this.data=u,this.isLoading=!1}ngOnInit(){this.notesForm=this.fb.group({title:[null],content:[null]})}onSubmit(){var t=this;return(0,f.A)(function*(){if(t.notesForm.invalid)t.toast.warning("Please Fill All Form","Warning");else try{t.isLoading=!0;const{status:n}=yield t._apiService.post("api/V1/notes",{title:t.notesForm.value.title,content:t.notesForm.value.content});if(201===n)return t.toast.success("Success Create Notes","Success"),t._handoverService.fetchData(),t.dialogRef.close(),void(t.isLoading=!1);if(500===n)return t.toast.error("Internal Server Error","Failed"),t.dialogRef.close(),void(t.isLoading=!1);409===n&&(t.isLoading=!1,t.fuseConfirmationService.open({title:"Notification",message:"The Products already exists on the server. Would you like to create another Products time anyway?",icon:{color:"info"},actions:{confirm:{label:"Confirmation",color:"primary"}}}))}catch(o){throw o}})()}static{this.\u0275fac=function(o){return new(o||a)(e.rXU(y.G),e.rXU(c.ok),e.rXU(j.tw),e.rXU(V.G),e.rXU(L),e.rXU(b.CP),e.rXU(b.Vh))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-form-add-notes"]],standalone:!0,features:[e.aNF],decls:20,vars:3,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","sm:flex-row","items-start","sm:items-center","w-full","justify-between"],[1,"mb-2","text-xl","font-semibold","sm:mb-0"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,""],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","px-8","py-4","pb-4","gap-6",3,"formGroup"],["floatLabel","always",1,"w-full"],["formControlName","title","matInput","",3,"placeholder"],["matInput","","formControlName","content","rows","4","placeholder","Your Content"],["type","submit",1,"bg-green-600","text-white","p-2","rounded",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4,"Add Notes"),e.k0s()(),e.j41(5,"a",4),e.bIt("click",function(){return n.dialogRef.close()}),e.nrm(6,"mat-icon",5),e.k0s()(),e.nrm(7,"ion-loading",6),e.j41(8,"div",7)(9,"form",8)(10,"mat-form-field",9)(11,"mat-label"),e.EFF(12,"Title"),e.k0s(),e.nrm(13,"input",10),e.k0s(),e.j41(14,"mat-form-field",9)(15,"mat-label"),e.EFF(16,"Content"),e.k0s(),e.nrm(17,"textarea",11),e.k0s(),e.j41(18,"button",12),e.bIt("click",function(){return n.onSubmit()}),e.EFF(19," Add Notes "),e.k0s()()()()),2&o&&(e.R7$(7),e.Y8G("isOpen",n.isLoading),e.R7$(2),e.Y8G("formGroup",n.notesForm),e.R7$(4),e.Y8G("placeholder","Title"))},dependencies:[c.X1,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,c.YN,x.RG,x.rl,x.nJ,v.fS,v.fg,k.Hl,F.m_,F.An,Ne.rQ,G.X6,D.Sy,N.Ve,h.MD],encapsulation:2})}}return a})();const Ee=()=>["/dashboards/home"];function He(a,r){1&a&&(e.j41(0,"div",23)(1,"mat-icon",24),e.EFF(2,"note_alt"),e.k0s(),e.j41(3,"p",25),e.EFF(4,"Tidak ada catatan ditemukan"),e.k0s(),e.j41(5,"p",26),e.EFF(6,"Coba gunakan kata kunci lain atau tambahkan catatan baru."),e.k0s()())}function Ie(a,r){if(1&a){const t=e.RV6();e.j41(0,"div",29)(1,"h3",30),e.EFF(2),e.k0s(),e.j41(3,"p",31),e.EFF(4),e.k0s(),e.j41(5,"div",32)(6,"span",33),e.EFF(7),e.k0s(),e.j41(8,"span",33),e.EFF(9),e.k0s()(),e.j41(10,"button",34),e.bIt("click",function(){const n=e.eBV(t).$implicit,s=e.XpG(2);return e.Njj(s.handleDeleteNotes(n.id))}),e.j41(11,"mat-icon"),e.EFF(12,"close"),e.k0s()()()}if(2&a){const t=r.$implicit;e.R7$(2),e.JRh(t.title),e.R7$(2),e.JRh(t.content),e.R7$(3),e.SpI("Ditulis oleh ",t.name,""),e.R7$(2),e.JRh(t.updated_at)}}function $e(a,r){if(1&a&&(e.j41(0,"div",27),e.DNE(1,Ie,13,4,"div",28),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.filteredData)}}const Ge=[{path:"",component:(()=>{class a{constructor(t,o,n,s,d){this._handoverService=t,this._apiService=o,this.fuseConfirmationService=n,this._matDialog=s,this._toastService=d,this.data=[],this.searchText="",this.filteredData=[],(0,e.QZP)(()=>{this.data=this._data,this.filteredData=this.data})}get _data(){return this._handoverService._data()}get isNotFound(){return this._handoverService.isNotFound()}ngOnInit(){this._handoverService.fetchData()}filterNotes(){const t=this.searchText.toLowerCase();this.filteredData=this.data.filter(o=>o.title.toLowerCase().includes(t)||o.content.toLowerCase().includes(t)||o.name.toLowerCase().includes(t))}addNotes(){this._matDialog.open(Te,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}handleDeleteNotes(t){this.fuseConfirmationService.open({title:"Confirmation Delete",message:"Are you sure want to delete this note ?",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this.deleteNotes(t)})}deleteNotes(t){var o=this;return(0,f.A)(function*(){try{const{status:s}=yield o._apiService.delete(`api/V1/notes/${t}`);return 200===s?(o._toastService.success("Success Delete Notes","Success"),void o._handoverService.fetchData()):void o._toastService.error("Failed Delete Notes","Failed")}catch(n){throw o._toastService.error("Failed Delete Notes","Failed"),n}})()}static{this.\u0275fac=function(o){return new(o||a)(e.rXU(L),e.rXU(y.G),e.rXU(V.G),e.rXU(b.bZ),e.rXU(j.tw))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-handover"]],standalone:!0,features:[e.aNF],decls:37,vars:7,consts:[[1,"p-4","h-full","w-full"],[1,"px-1","pt-3","flex","justify-between","items-start","sm:items-center","flex-col","sm:flex-row","gap-5","sm:gap-0"],[1,"font-bold","text-lg","sm:text-3xl"],[1,"text-sm","sm:text-base"],[1,"text-sm","text-gray-600"],[1,"font-medium","text-gray-500","hover:cursor-pointer","hover:text-blue-400",3,"routerLink"],[1,"mx-2","text-gray-400"],[1,"font-semibold","text-blue-600","hover:text-blue-500"],[1,"px-1","pt-10","pb-3","flex","justify-between","items-start","sm:items-center","flex-col","sm:flex-row","gap-5","sm:gap-0"],[1,""],[1,"flex","items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","rounded-full","w-full"],["for","table-search",1,"sr-only"],[1,"relative","my-2","w-full"],[1,"absolute","inset-y-0","rtl:inset-r-0","start-0","flex","items-center","ps-3","pointer-events-none"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 20 20",1,"w-4","h-4","text-gray-500","dark:text-gray-400"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"],["type","text","matInput","","placeholder","Search Notes",1,"block","w-full","p-4","ps-10","text-sm","rounded-full","text-gray-900","border","bg-white","focus:ring-blue-500","focus:border-blue-500","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500",3,"ngModelChange","ngModel"],["mat-flat-button","",1,"ml-4","min-w-10","px-1","sm:px-4",3,"click","color"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","hidden","sm:inline-block"],["class","text-center py-10 text-gray-500",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mt-2 p-3",4,"ngIf"],[1,"text-center","py-10","text-gray-500"],[1,"text-5xl","mb-2"],[1,"text-lg","font-semibold"],[1,"text-sm"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-4","mt-2","p-3"],["class","bg-yellow-100 border-l-4 border-yellow-500 p-4 rounded-md shadow-md relative",4,"ngFor","ngForOf"],[1,"bg-yellow-100","border-l-4","border-yellow-500","p-4","rounded-md","shadow-md","relative"],[1,"text-md","font-semibold","text-gray-800"],[1,"text-sm","text-gray-600","mt-1"],[1,"mt-4","flex","justify-between","items-center"],[1,"text-xs","text-gray-500","italic"],["mat-icon-button","","aria-label","Delete note",1,"absolute","top-2","right-2","text-gray-500","hover:text-red-600",3,"click"]],template:function(o,n){1&o&&(e.j41(0,"main",0)(1,"div",1)(2,"div")(3,"h1",2),e.EFF(4,"Handover Tickets"),e.k0s(),e.j41(5,"p",3),e.EFF(6,"List of unresolved tickets pending handover to the next team."),e.k0s()(),e.j41(7,"div",4)(8,"span",5),e.EFF(9,"Home"),e.k0s(),e.j41(10,"span",6),e.EFF(11,"/"),e.k0s(),e.j41(12,"span",7),e.EFF(13,"Handover Tickets"),e.k0s()()(),e.nrm(14,"app-handovers"),e.j41(15,"div",8)(16,"div")(17,"h1",2),e.EFF(18,"List Task"),e.k0s(),e.j41(19,"p",3),e.EFF(20,"Review and manage all pending tasks assigned to your team."),e.k0s()()(),e.j41(21,"div",9)(22,"div",10)(23,"div",11)(24,"label",12),e.EFF(25,"Search"),e.k0s(),e.j41(26,"div",13)(27,"div",14),e.qSk(),e.j41(28,"svg",15),e.nrm(29,"path",16),e.k0s()(),e.joV(),e.j41(30,"input",17),e.mxI("ngModelChange",function(d){return e.DH7(n.searchText,d)||(n.searchText=d),d}),e.bIt("ngModelChange",function(){return n.filterNotes()}),e.k0s()()(),e.j41(31,"button",18),e.bIt("click",function(){return n.addNotes()}),e.nrm(32,"mat-icon",19),e.j41(33,"span",20),e.EFF(34,"New note"),e.k0s()()(),e.DNE(35,He,7,0,"div",21)(36,$e,2,1,"div",22),e.k0s()()),2&o&&(e.R7$(8),e.Y8G("routerLink",e.lJ4(6,Ee)),e.R7$(22),e.R50("ngModel",n.searchText),e.R7$(),e.Y8G("color","primary"),e.R7$(),e.Y8G("svgIcon","heroicons_solid:plus-circle"),e.R7$(3),e.Y8G("ngIf",n.isNotFound),e.R7$(),e.Y8G("ngIf",!n.isNotFound))},dependencies:[Re,I.Wk,F.m_,F.An,k.Hl,k.$z,k.iY,v.fS,v.fg,h.MD,h.Sq,h.bT,c.YN,c.me,c.BC,c.vS],encapsulation:2})}}return a})()}]}}]);