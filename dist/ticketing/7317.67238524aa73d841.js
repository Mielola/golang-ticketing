"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[7317],{37317:(K,x,o)=>{o.r(x),o.d(x,{default:()=>Q});var m=o(10467),d=o(60177),e=o(54438),r=o(89417),g=o(88834),j=o(82765),v=o(86600),w=o(25084),f=o(75351),p=o(53719),_=o(99213),b=o(59042),N=o(59115),F=o(96695),P=o(82798),h=o(2042),c=o(9159),k=o(5271),S=o(3366),C=o(45794),D=o(46601);let T=(()=>{class a{constructor(t,i){this._apiService=t,this._toastService=i,this._data=(0,e.vPA)([]),this.isLoading=(0,e.vPA)(!1),this.isNotFound=(0,e.vPA)(!1)}Update(t){this._data.set(t)}fetchData(){var t=this;return(0,m.A)(function*(){t.isLoading.set(!0),t._apiService.get("api/V1/places").then(function(){var i=(0,m.A)(function*(l){t.isLoading.set(!1),t.isNotFound.set(!1),t._data.set(l.data),null!==l.data&&0!=l.data.length||t.isNotFound.set(!0)});return function(l){return i.apply(this,arguments)}}()).catch(function(){var i=(0,m.A)(function*(l){t.isLoading.set(!1),t.isNotFound.set(!0),t._toastService.error("Failed to fetch data","Error")});return function(l){return i.apply(this,arguments)}}())})()}static{this.\u0275fac=function(i){return new(i||a)(e.KVO(S.G),e.KVO(C.tw))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function E(a,s){if(1&a&&(e.j41(0,"mat-option",15),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}let y=(()=>{class a{constructor(t,i,l,n,u,J,Z){this._apiService=t,this.fb=i,this.toast=l,this.fuseConfirmationService=n,this._placesTableService=u,this.dialogRef=J,this.data=Z,this.isLoading=!1}ngOnInit(){this.placesForm=this.fb.group({products_id:[null,[r.k0.required]],name:[null,[r.k0.required]]}),this.fetchData()}fetchData(){var t=this;return(0,m.A)(function*(){try{const i=yield t._apiService.get("api/V1/products");t.products=i.data,"Edit"===t.data.mode&&t.pacthValueForm()}catch(i){throw i}})()}pacthValueForm(){this.placesForm.patchValue({name:this.data.place.Name,products_id:String(this.data.place.ProductsID)})}onSubmit(){var t=this;return(0,m.A)(function*(){if(t.placesForm.invalid)t.toast.warning("Please Fill All Form","Warning");else try{t.isLoading=!0;const i="Add"==t.data.mode?"api/V1/places":`api/V1/places/${t.data.place.ID}`,{status:n}=yield t._apiService.post(i,{name:t.placesForm.value.name,products_id:Number(t.placesForm.value.products_id)});if(201===n)return t.toast.success("Success Create Products","Success"),t._placesTableService.fetchData(),t.dialogRef.close(),void(t.isLoading=!1);if(200===n)return t.toast.success("Success Update Products","Success"),t._placesTableService.fetchData(),t.dialogRef.close(),void(t.isLoading=!1);if(500===n)return t.toast.error("Internal Server Error","Failed"),t.dialogRef.close(),void(t.isLoading=!1);409===n?(t.isLoading=!1,t.fuseConfirmationService.open({title:"Notification",message:"The Products already exists on the server. Would you like to create another Products time anyway?",icon:{color:"info"},actions:{confirm:{label:"Confirmation",color:"primary"}}})):(t.isLoading=!1,t.toast.error("Unknown Error","Failed"))}catch(i){throw i}})()}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(S.G),e.rXU(r.ok),e.rXU(C.tw),e.rXU(D.G),e.rXU(T),e.rXU(f.CP),e.rXU(f.Vh))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-form-add-edit-places"]],standalone:!0,features:[e.aNF],decls:21,vars:7,consts:[[1,"h-full","w-full","flex","flex-col"],[1,"flex","justify-between","p-2"],[1,"truncate","text-lg","font-medium","leading-6","tracking-tight","px-5","py-3","flex","flex-col","sm:flex-row","items-start","sm:items-center","w-full","justify-between"],[1,"mb-2","text-xl","font-semibold","sm:mb-0"],[3,"click"],["svgIcon","mat_solid:close",1,"cursor-pointer"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[1,""],[1,"bg-card","flex","flex-col","overflow-hidden","rounded-2xl","px-8","py-4","pb-4",3,"formGroup"],["hideRequiredMarker","",1,"w-full"],["formControlName","products_id","placeholder","Select Products"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value",4,"ngFor","ngForOf"],[1,"w-full"],["formControlName","name","matInput","",3,"placeholder"],["type","submit",1,"text-white","p-2","rounded",3,"click","ngClass"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"value"]],template:function(i,l){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e.EFF(4),e.k0s()(),e.j41(5,"a",4),e.bIt("click",function(){return l.dialogRef.close()}),e.nrm(6,"mat-icon",5),e.k0s()(),e.nrm(7,"ion-loading",6),e.j41(8,"div",7)(9,"form",8)(10,"mat-form-field",9)(11,"mat-label"),e.EFF(12,"Products"),e.k0s(),e.j41(13,"mat-select",10),e.DNE(14,E,2,2,"mat-option",11),e.k0s()(),e.j41(15,"mat-form-field",12)(16,"mat-label"),e.EFF(17,"Places Name"),e.k0s(),e.nrm(18,"input",13),e.k0s(),e.j41(19,"button",14),e.bIt("click",function(){return l.onSubmit()}),e.EFF(20),e.k0s()()()()),2&i&&(e.R7$(4),e.JRh("Add"==l.data.mode?"Add Place":"Edit Place"),e.R7$(3),e.Y8G("isOpen",l.isLoading),e.R7$(2),e.Y8G("formGroup",l.placesForm),e.R7$(5),e.Y8G("ngForOf",l.products),e.R7$(4),e.Y8G("placeholder","Place Name"),e.R7$(),e.Y8G("ngClass","Add"==l.data.mode?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"),e.R7$(),e.SpI(" ","Add"==l.data.mode?"Add Place":"Edit Place"," "))},dependencies:[r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.YN,p.RG,p.rl,p.nJ,b.fS,b.fg,g.Hl,_.m_,_.An,k.rQ,w.X6,v.Sy,v.wT,P.Ve,P.VO,d.MD,d.YU,d.Sq]})}}return a})();const R=()=>[5,10,20];function I(a,s){1&a&&(e.j41(0,"div",15),e.nrm(1,"div",16)(2,"div",16)(3,"div",16)(4,"div",16)(5,"div",16)(6,"div",16)(7,"div",17),e.k0s())}function G(a,s){1&a&&(e.j41(0,"div")(1,"div",18),e.nrm(2,"img",19),e.j41(3,"h1",20),e.EFF(4,"Data Not Found"),e.k0s()()())}function $(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Places Id "),e.k0s())}function A(a,s){if(1&a&&(e.j41(0,"mat-cell",32),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",t.ID," ")}}function V(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Places Name "),e.k0s())}function L(a,s){if(1&a&&(e.j41(0,"mat-cell",32),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",t.Name," ")}}function X(a,s){1&a&&(e.j41(0,"mat-header-cell"),e.EFF(1," Products Name "),e.k0s())}function U(a,s){if(1&a&&(e.j41(0,"mat-cell"),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",t.Product.Name," ")}}function Y(a,s){1&a&&(e.j41(0,"mat-header-cell",33),e.EFF(1," Action "),e.k0s())}function B(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",35)(1,"a",36),e.bIt("click",function(){e.eBV(t);const l=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.handleDeletePlaces(l.ID))}),e.nrm(2,"mat-icon",37),e.k0s(),e.j41(3,"a",38),e.bIt("click",function(){e.eBV(t);const l=e.XpG().$implicit,n=e.XpG(2);return e.Njj(n.editPlaces(l))}),e.nrm(4,"mat-icon",39),e.k0s()()}}function O(a,s){if(1&a&&(e.j41(0,"mat-cell"),e.DNE(1,B,5,0,"div",34),e.k0s()),2&a){const t=s.$implicit;e.R7$(),e.Y8G("ngIf","default-trial"!=t.name)}}function H(a,s){1&a&&e.nrm(0,"mat-header-row")}function M(a,s){1&a&&e.nrm(0,"mat-row")}function W(a,s){if(1&a&&(e.j41(0,"mat-table",21,1)(2,"div"),e.qex(3,22),e.DNE(4,$,2,0,"mat-header-cell",23)(5,A,2,1,"mat-cell",24),e.bVm(),e.qex(6,25),e.DNE(7,V,2,0,"mat-header-cell",23)(8,L,2,1,"mat-cell",24),e.bVm(),e.qex(9,26),e.DNE(10,X,2,0,"mat-header-cell",23)(11,U,2,1,"mat-cell",27),e.bVm(),e.qex(12,28),e.DNE(13,Y,2,0,"mat-header-cell",29)(14,O,2,1,"mat-cell",27),e.bVm(),e.DNE(15,H,1,0,"mat-header-row",30)(16,M,1,0,"mat-row",31),e.k0s()()),2&a){const t=e.XpG();e.Y8G("dataSource",t.dataSource),e.R7$(15),e.Y8G("matHeaderRowDef",t.displayedColumns),e.R7$(),e.Y8G("matRowDefColumns",t.displayedColumns)}}let z=(()=>{class a{constructor(t,i,l,n,u){this._apiService=t,this.fuseConfirmationService=i,this._placesService=l,this._matDialog=n,this._toastService=u,this.displayedColumns=["id","name","products","action"],this.dataSource=new c.I6,(0,e.QZP)(()=>{this.dataSource.data=this.datas})}get datas(){return this._placesService._data()}get isLoading(){return this._placesService.isLoading()}get isNotDataFound(){return this._placesService.isNotFound()}ngOnInit(){this._placesService.fetchData()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}addPlaces(){this._matDialog.open(y,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw",data:{mode:"Add"}})}editPlaces(t){this._matDialog.open(y,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw",data:{mode:"Edit",place:t}})}handleDeletePlaces(t){this.fuseConfirmationService.open({title:"Delete Confirmation",message:"Are you sure want to delete this Places ?",actions:{confirm:{label:"Delete"}}}).afterClosed().subscribe(l=>{"confirmed"===l&&this.deletePlaces(t)})}deletePlaces(t){var i=this;return(0,m.A)(function*(){try{const{status:n}=yield i._apiService.delete(`api/V1/places/${t}`);return 200===n?(i._toastService.success("Success Delete Places","Success"),void i._placesService.fetchData()):void i._toastService.error("Failed Delete Places","Failed")}catch(l){throw i._toastService.error("Failed Delete Places","Failed"),l}})()}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(S.G),e.rXU(D.G),e.rXU(T),e.rXU(f.bZ),e.rXU(C.tw))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-table-places"]],viewQuery:function(i,l){if(1&i&&(e.GBs(h.B4,5),e.GBs(F.iy,5)),2&i){let n;e.mGM(n=e.lsd())&&(l.sort=n.first),e.mGM(n=e.lsd())&&(l.paginator=n.first)}},standalone:!0,features:[e.aNF],decls:16,vars:7,consts:[["paginator",""],["table",""],[1,"h-fit","border-[1px]","shadow-xl","mt-4","bg-white","rounded-lg","p-5"],[1,"flex","items-start","flex-row","sm:items-center","justify-between"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","gap-3","w-1/3","max-lg:w-full"],[1,"text-xl","font-semibold"],[1,"flex","items-center","gap-3"],["mat-raised-button","",1,"bg-blue-600","hover:bg-blue-700","text-white",3,"click"],["svgIcon","mat_outline:add",1,"text-white"],[1,"font-semibold"],["role","status","class","p-5 animate-pulse",4,"ngIf"],[4,"ngIf"],[1,"w-full","overflow-auto","whitespace-nowrap","mt-5"],["matSort","","class","min-w-160",3,"dataSource",4,"ngIf"],[3,"pageSize","pageSizeOptions","showFirstLastButtons"],["role","status",1,"p-5","animate-pulse"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full","mb-[22px]"],[1,"h-6","bg-gray-300","rounded-full","dark:bg-gray-700","w-full"],[1,"flex","flex-col","items-center"],["src","icons/not-found.jpg","alt","not-found.jpg",1,"h-64","bg-cover","bg-center","object-scale-down"],[1,"mt-2","font-semibold","text-xl","-tracking-tighter"],["matSort","",1,"min-w-160",3,"dataSource"],["matColumnDef","id"],[4,"matHeaderCellDef"],["class","text-lg font-medium whitespace-nowrap",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","products"],[4,"matCellDef"],["matColumnDef","action"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"text-lg","font-medium","whitespace-nowrap"],["mat-sort-header",""],["class","flex items-center",4,"ngIf"],[1,"flex","items-center"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-red-500","hover:cursor-pointer","hover:bg-red-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:trash",1,"text-white",2,"transform","scale(0.7)"],[1,"font-medium","mx-1","text-white","dark:text-white","bg-blue-500","hover:bg-blue-600","rounded","hover:underline",3,"click"],["svgIcon","heroicons_solid:pencil-square",1,"text-white",2,"transform","scale(0.7)"]],template:function(i,l){if(1&i){const n=e.RV6();e.j41(0,"section",2)(1,"div",3)(2,"div",4)(3,"h1",5),e.EFF(4,"Places"),e.k0s()(),e.j41(5,"div",6)(6,"button",7),e.bIt("click",function(){return e.eBV(n),e.Njj(l.addPlaces())}),e.nrm(7,"mat-icon",8),e.j41(8,"span",9),e.EFF(9,"Add Places"),e.k0s()()()(),e.DNE(10,I,8,0,"div",10)(11,G,5,0,"div",11),e.j41(12,"div",12),e.DNE(13,W,17,3,"mat-table",13),e.k0s(),e.nrm(14,"mat-paginator",14,0),e.k0s()}2&i&&(e.R7$(10),e.Y8G("ngIf",l.isLoading),e.R7$(),e.Y8G("ngIf",l.isNotDataFound&&!l.isLoading),e.R7$(2),e.Y8G("ngIf",!l.isNotDataFound&&!l.isLoading&&0!=l.dataSource.data.length),e.R7$(),e.Y8G("pageSize",10)("pageSizeOptions",e.lJ4(6,R))("showFirstLastButtons",!0))},dependencies:[d.MD,d.bT,F.Ou,F.iy,f.hM,c.tP,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,r.X1,b.fS,h.NQ,h.B4,h.aE,_.An,N.Cn,j.g7,r.YN,p.RG,w.X6,P.Ve,v.Sy,g.Hl,g.$z],styles:[".mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%] {\n        display: none;\n    }"]})}}return a})();const Q=[{path:"",component:(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-place"]],standalone:!0,features:[e.aNF],decls:2,vars:0,consts:[[1,"p-4","h-full","w-full"]],template:function(i,l){1&i&&(e.j41(0,"main",0),e.nrm(1,"app-table-places"),e.k0s())},dependencies:[z]})}}return a})()}]}}]);