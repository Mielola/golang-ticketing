"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3393],{63393:(k,d,o)=>{o.r(d),o.d(d,{default:()=>y});var m=o(10467),c=o(60177),l=o(89417),f=o(88834),e=o(54438),p=o(6369),g=o(3366),v=o(45794);function b(n,u){if(1&n){const t=e.RV6();e.j41(0,"div",14)(1,"button",15),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleEdit())}),e.EFF(2,"Edit"),e.k0s()()}}function h(n,u){if(1&n){const t=e.RV6();e.j41(0,"div",16)(1,"button",17),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleEdit())}),e.EFF(2,"Cancel"),e.k0s(),e.j41(3,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onSubmit())}),e.EFF(4,"Save"),e.k0s()()}}function j(n,u){1&n&&(e.j41(0,"div",16)(1,"button",19),e.EFF(2,"Loading..."),e.k0s()())}const y=[{path:"",component:(()=>{class n{constructor(t,a,i,r){this._userService=t,this.fb=a,this._apiService=i,this._toast=r,this.className="w-full h-full bg-gradient-to-r from-blue-500 to-[#86C127]",this.disabled=!0,this.selectedImage=null,this.isLoading=!1}ngOnInit(){this.editUserForm=this.fb.group({name:[{value:"",disabled:this.disabled},l.k0.required],email:[{value:"",disabled:this.disabled},l.k0.required],avatar:[{value:"",disabled:this.disabled}]}),this._userService.user$.subscribe(t=>{t&&(this.user=t,this.editUserForm.patchValue({name:t.name||"",email:t.email||"",avatar:""}))})}triggerFileInput(){document.querySelector('input[type="file"]').click()}onFileSelected(t){const a=t.target;if(a.files&&a.files.length>0){const i=a.files[0];this.editUserForm.patchValue({avatar:i});const r=new FileReader;r.onload=()=>{this.selectedImage=r.result},r.readAsDataURL(i)}}toggleEdit(){this.disabled?this.editUserForm.enable():this.editUserForm.disable(),this.disabled=!this.disabled}onSubmit(){var t=this;return(0,m.A)(function*(){try{t.isLoading=!0;const a=new FormData;a.append("name",t.editUserForm.get("name")?.value),a.append("email",t.editUserForm.get("email")?.value);const i=t.editUserForm.get("avatar")?.value;i&&a.append("avatar",i);const{data:r,status:s}=yield t._apiService.post("api/V1/edit-profile",a);if(console.log(r),400===s)return void t._toast.error("Email Already Used","Email Already Used Broo");200===s&&(t._userService.Update(r.data.user),t.toggleEdit())}catch(a){throw console.error(a),t._toast.error("Error","Internal Server Error"),a}finally{t.isLoading=!1}})()}canDeactivate(){return!!this.disabled||confirm("Anda sedang dalam mode edit. Apakah Anda yakin ingin meninggalkan halaman ini tanpa menyimpan perubahan?")}static{this.\u0275fac=function(a){return new(a||n)(e.rXU(p.D),e.rXU(l.ok),e.rXU(g.G),e.rXU(v.tw))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-profile"]],hostVars:2,hostBindings:function(a,i){2&a&&e.HbH(i.className)},standalone:!0,features:[e.aNF],decls:20,vars:7,consts:[["fileInput",""],[1,"h-full","w-full","flex","items-center","justify-center","p-10"],[1,"bg-white","rounded-md","h-fit","sm:w-1/2","relative","flex","flex-col"],["src","images/cards/01-320x200.jpg","alt","",1,"h-[200px]","object-center","object-cover","rounded-t-md"],[1,"h-20","w-20","md:h-28","md:w-28","rounded-full","absolute","bg-white","shadow-xl","left-5","sm:left-10","top-40","sm:top-36","cursor-pointer","object-cover","object-center",3,"click","src"],[1,"sm:px-10","sm:py-5","px-10","pt-13","pb-4","md:pl-44"],["action","",3,"formGroup"],["type","file","accept","image/*","formControlName","avatar","hidden","",3,"change"],[1,"flex","flex-col","gap-2"],[1,"font-semibold"],["type","text","formControlName","name","placeholder","Your Name",1,"border-[2px]","border-opacity-","p-2","rounded","w-full",3,"value"],["type","email","formControlName","email","placeholder","Your Name",1,"border-[2px]","border-opacity-","p-2","rounded","w-full",3,"value"],["class","justify-end mt-4 w-full flex",4,"ngIf"],["class","justify-end mt-4 w-full flex items-center gap-2",4,"ngIf"],[1,"justify-end","mt-4","w-full","flex"],["mat-flat-button","",1,"p-2.5","px-14","font-semibold","rounded-full","bg-gray-300","hover:bg-gray-400","transition-colors",3,"click"],[1,"justify-end","mt-4","w-full","flex","items-center","gap-2"],["mat-flat-button","",1,"p-2.5","max-sm:px-8","px-14","font-semibold","rounded-full","bg-gray-300","hover:bg-gray-400","transition-colors",3,"click"],["mat-flat-button","",1,"p-2.5","max-sm:px-8","px-14","text-white","font-semibold","rounded-full","bg-blue-500","hover:bg-blue-600","transition-colors",3,"click"],["mat-flat-button","","disabled","",1,"p-2.5","px-14","font-semibold","rounded-full","bg-gray-300","hover:bg-gray-400","transition-colors"]],template:function(a,i){if(1&a){const r=e.RV6();e.j41(0,"main",1)(1,"div",2),e.nrm(2,"img",3),e.j41(3,"img",4),e.bIt("click",function(){return e.eBV(r),e.Njj(i.triggerFileInput())}),e.k0s(),e.j41(4,"div",5)(5,"form",6)(6,"input",7,0),e.bIt("change",function(F){return e.eBV(r),e.Njj(i.onFileSelected(F))}),e.k0s(),e.j41(8,"div",8)(9,"h1",9),e.EFF(10,"Name :"),e.k0s(),e.nrm(11,"input",10),e.k0s(),e.nrm(12,"br"),e.j41(13,"div",8)(14,"h1",9),e.EFF(15,"Email :"),e.k0s(),e.nrm(16,"input",11),e.k0s()(),e.DNE(17,b,3,0,"div",12)(18,h,5,0,"div",13)(19,j,3,0,"div",13),e.k0s()()()}2&a&&(e.R7$(3),e.Y8G("src",i.selectedImage||(null==i.user?null:i.user.avatar),e.B4B),e.R7$(2),e.Y8G("formGroup",i.editUserForm),e.R7$(6),e.Y8G("value",i.user.name),e.R7$(5),e.Y8G("value",i.user.email),e.R7$(),e.Y8G("ngIf",i.disabled&&!i.isLoading),e.R7$(),e.Y8G("ngIf",!i.disabled&&!i.isLoading),e.R7$(),e.Y8G("ngIf",i.isLoading))},dependencies:[f.$z,c.MD,c.bT,l.X1,l.qT,l.me,l.BC,l.cb,l.j4,l.JD],encapsulation:2})}}return n})(),canDeactivate:[(()=>{class n{canDeactivate(t){return!t||!t.canDeactivate||t.canDeactivate()}static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})()]}]}}]);