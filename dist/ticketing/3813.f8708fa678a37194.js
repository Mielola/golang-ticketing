"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[3813],{13813:(_,y,l)=>{l.r(y),l.d(y,{default:()=>Q});var g=l(10467),u=l(60177),c=l(89417),C=l(86600),p=l(25084),m=l(53719),O=l(59042),k=l(82798),d=l(14160),t=l(54438);const T=["chart"];let P=(()=>{class i{constructor(){this.data={},this.seriesData=[],this.header="",this.labels=[]}ngOnChanges(s){this.chartOptions={colors:["#26e7a6"],series:this.seriesData,chart:{id:"dailyHumadityChart",height:350,type:"area",dropShadow:{enabled:!0,top:4,left:2,blur:6,opacity:.5,color:"#26e7a6"},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},dataLabels:{enabled:!0,formatter:r=>null!==r?`${r} Ticket`:"N/A",style:{fontWeight:"bold",colors:["#26e7a6"],fontSize:"12px"},background:{enabled:!0,foreColor:"#fff",borderRadius:4,padding:4,opacity:.9,borderWidth:1,borderColor:"#26e7a6",dropShadow:{enabled:!0,top:2,left:1,blur:3,opacity:.3,color:"#26e7a6"}}},fill:{type:"gradient",gradient:{shadeIntensity:1,opacityFrom:.7,opacityTo:.9,stops:[0,90,100]}},stroke:{curve:"smooth",width:2,colors:["#26e7a6"]},xaxis:{categories:this.labels}}}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-area-chart"]],viewQuery:function(r,a){if(1&r&&t.GBs(T,5),2&r){let e;t.mGM(e=t.lsd())&&(a.chart=e.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:9,consts:[["id","chart",1,"bg-white","border-[0.7px]","shadow-md","p-2","rounded-xl","h-full"],[1,"text-xl","font-semibold","px-4","border-b-[1px]","border-solid","py-4"],[3,"colors","series","fill","chart","xaxis","stroke","tooltip","dataLabels"]],template:function(r,a){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.nrm(4,"apx-chart",2),t.k0s()),2&r&&(t.R7$(3),t.JRh(a.header),t.R7$(),t.Y8G("colors",a.chartOptions.colors)("series",a.chartOptions.series)("fill",a.chartOptions.fill)("chart",a.chartOptions.chart)("xaxis",a.chartOptions.xaxis)("stroke",a.chartOptions.stroke)("tooltip",a.chartOptions.tooltip)("dataLabels",a.chartOptions.dataLabels))},dependencies:[d.J,d.Q,u.MD],styles:[".apexcharts-gridlines[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:none!important}"]})}}return i})();var D=l(74710);const x=["chart"];let R=(()=>{class i{constructor(s){this.router=s,this.data={},this.seriesData=[],this.header="",this.labels=[],this.param=""}ngOnChanges(s){this.chartOptions={series:this.seriesData||[],chart:{height:350,type:"bar",zoom:{enabled:!1},events:{click:(r,a,e)=>{""==this.param&&null==this.param&&null==this.param||this.router.navigate([`/dashboards/tickets/${this.param}`,this.labels[e.dataPointIndex]])}}},plotOptions:{bar:{columnWidth:"45%",distributed:!0,borderRadius:5,borderRadiusApplication:"around"}},dataLabels:{enabled:!0,formatter:r=>null!==r?`${r} Ticket`:"N/A",style:{fontWeight:"bold",colors:["#3ECA22"],fontSize:"12px"},background:{enabled:!0,foreColor:"#fff",borderRadius:4,padding:4,opacity:.9,borderWidth:1,borderColor:"#3ECA22",dropShadow:{enabled:!0,top:2,left:1,blur:3,opacity:.3,color:"#3ECA22"}}},stroke:{curve:"straight",width:[0,4]},xaxis:{categories:this.labels||[]}}}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(D.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-bar-chart"]],viewQuery:function(r,a){if(1&r&&t.GBs(x,5),2&r){let e;t.mGM(e=t.lsd())&&(a.chart=e.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels",param:"param"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:8,consts:[["id","chart",1,"bg-white","border-[0.7px]","shadow-md","p-2","rounded-xl"],[1,"text-xl","font-semibold","px-4","border-b-[1px]","border-solid","py-4"],[3,"series","chart","xaxis","stroke","plotOptions","tooltip","dataLabels"]],template:function(r,a){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.nrm(4,"apx-chart",2),t.k0s()),2&r&&(t.R7$(3),t.JRh(a.header),t.R7$(),t.Y8G("series",a.chartOptions.series)("chart",a.chartOptions.chart)("xaxis",a.chartOptions.xaxis)("stroke",a.chartOptions.stroke)("plotOptions",a.chartOptions.plotOptions)("tooltip",a.chartOptions.tooltip)("dataLabels",a.chartOptions.dataLabels))},dependencies:[d.J,d.Q],styles:[".apexcharts-gridlines[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:none!important}"]})}}return i})();var L=l(44549),w=l(5964),E=l(23294);const A=["chart"];let S=(()=>{class i{constructor(s){this.router=s,this.seriesData=[],this.header="",this.labels=[],this.param=""}ngOnChanges(s){this.chartOptions={series:this.seriesData,chart:{height:350,type:"bar",events:{click:(r,a,e)=>{""!==this.param&&null!=this.param&&this.router.navigate([`/dashboards/tickets/${this.param}`,this.labels[e.dataPointIndex]])}}},colors:["#008FFB","#00E396","#FEB019","#FF4560","#008FFB","#00E396","#FEB019","#FF4560","#008FFB","#00E396","#FEB019","#FF4560"],plotOptions:{bar:{columnWidth:"45%",distributed:!0,borderRadius:5,borderRadiusApplication:"end"}},dataLabels:{enabled:!0,formatter:r=>null!==r?`${r} Ticket`:"N/A",style:{fontWeight:"bold",colors:["#3ECA22"],fontSize:"12px"},background:{enabled:!0,foreColor:"#fff",borderRadius:4,padding:4,opacity:.9,borderWidth:1,borderColor:"#3ECA22",dropShadow:{enabled:!0,top:2,left:1,blur:3,opacity:.3,color:"#3ECA22"}}},legend:{show:!1},grid:{borderColor:"#e7e7e7",yaxis:{lines:{show:!0}}},stroke:{curve:"straight",width:[0,4]},xaxis:{categories:this.labels,labels:{style:{colors:["#008FFB","#00E396","#FEB019","#FF4560","#008FFB","#00E396","#FEB019","#FF4560","#008FFB","#00E396","#FEB019","#FF4560"],fontSize:"12px"}}}}}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(D.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-column-chart"]],viewQuery:function(r,a){if(1&r&&t.GBs(A,5),2&r){let e;t.mGM(e=t.lsd())&&(a.chart=e.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels",param:"param"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:11,consts:[["id","chart",1,"bg-white","border-[0.7px]","shadow-md","p-2","rounded-xl","h-full"],[1,"text-xl","font-semibold","px-4","border-b-[1px]","border-solid","py-4"],[3,"series","chart","dataLabels","plotOptions","yaxis","xaxis","stroke","legend","colors","grid"]],template:function(r,a){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.nrm(4,"apx-chart",2),t.k0s()),2&r&&(t.R7$(3),t.JRh(a.header),t.R7$(),t.Y8G("series",a.chartOptions.series)("chart",a.chartOptions.chart)("dataLabels",a.chartOptions.dataLabels)("plotOptions",a.chartOptions.plotOptions)("yaxis",a.chartOptions.yaxis)("xaxis",a.chartOptions.xaxis)("stroke",a.chartOptions.stroke)("legend",a.chartOptions.legend)("colors",a.chartOptions.colors)("grid",a.chartOptions.grid))},dependencies:[d.J,d.Q]})}}return i})();const G=["chart"];let B=(()=>{class i{constructor(){this.data={},this.seriesData=[],this.header="",this.labels=[]}ngOnChanges(s){this.chartOptions={series:this.seriesData,chart:{type:"bar",height:380},plotOptions:{bar:{barHeight:"45%",distributed:!0,horizontal:!0,dataLabels:{position:"bottom"}}},colors:["#FEB019","#FF4560","#008FFB","#00E396"],dataLabels:{enabled:!0,textAnchor:"start",style:{fontWeight:"bold",colors:["#3ECA22"],fontSize:"12px"},formatter:function(r,a){return a.w.globals.labels[a.dataPointIndex]+":  "+r},offsetX:0,background:{enabled:!0,foreColor:"#fff",borderRadius:4,padding:4,opacity:.9,borderWidth:1,borderColor:"#3ECA22",dropShadow:{enabled:!0,top:2,left:1,blur:3,opacity:.3,color:"#3ECA22"}}},stroke:{width:1,colors:["#fff"]},xaxis:{categories:this.labels},yaxis:{labels:{show:!1}},tooltip:{theme:"dark",x:{show:!1},y:{title:{formatter:function(){return"Ticket"}}}}}}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-bar-chart-side"]],viewQuery:function(r,a){if(1&r&&t.GBs(G,5),2&r){let e;t.mGM(e=t.lsd())&&(a.chart=e.first)}},inputs:{seriesData:"seriesData",header:"header",labels:"labels"},standalone:!0,features:[t.OA$,t.aNF],decls:5,vars:12,consts:[["id","chart",1,"bg-white","border-[0.7px]","shadow-md","p-2","rounded-xl"],[1,"text-xl","font-semibold","px-4","border-b-[1px]","border-solid","py-4"],[3,"series","chart","dataLabels","stroke","colors","title","subtitle","plotOptions","yaxis","xaxis","tooltip"]],template:function(r,a){1&r&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3),t.k0s()(),t.nrm(4,"apx-chart",2),t.k0s()),2&r&&(t.R7$(3),t.JRh(a.header),t.R7$(),t.Y8G("series",a.chartOptions.series)("chart",a.chartOptions.chart)("dataLabels",a.chartOptions.dataLabels)("stroke",a.chartOptions.stroke)("colors",a.chartOptions.colors)("title",a.chartOptions.title)("subtitle",a.chartOptions.subtitle)("plotOptions",a.chartOptions.plotOptions)("yaxis",a.chartOptions.yaxis)("xaxis",a.chartOptions.xaxis)("tooltip",a.chartOptions.tooltip))},dependencies:[d.J,d.Q],styles:[".apexcharts-gridlines[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{stroke:none!important}"]})}}return i})();var U=l(3366),$=l(45794),N=l(64394);function Y(i,f){if(1&i&&(t.j41(0,"mat-option",23),t.EFF(1),t.k0s()),2&i){const s=f.$implicit;t.Y8G("value",s),t.R7$(),t.SpI(" ",s," ")}}function M(i,f){if(1&i&&t.nrm(0,"app-bar-chart",24),2&i){let s;const r=t.XpG();t.Y8G("param","places")("seriesData",r.ChartTicketPlaceData)("labels",r.ChartTicketPlaceLabels)("header","Tickets By Place ("+(null==(s=r.analyticsForm.get("products_name"))?null:s.value)+")")}}function I(i,f){if(1&i&&t.nrm(0,"app-bar-chart",24),2&i){let s;const r=t.XpG();t.Y8G("param","category")("seriesData",r.chartCategoryData)("labels",r.chartCategoryLabels)("header","Tickets By Category ("+(null==(s=r.analyticsForm.get("products_name"))?null:s.value)+")")}}const F=new Date,j=F.getMonth(),J=F.getFullYear(),Q=[{path:"",component:(()=>{class i{constructor(s,r,a,e){this.fb=s,this._apiService=r,this._toast=a,this._analyticsService=e,this.products=[],this.today=new Date,this.data={},this.chartUserRole=[],this.pieSeriesData=[],this.pieLabels=[],this.chartCategoryData=[],this.chartCategoryLabels=[],this.chartPriorityLabels=[],this.ChartReqCategoryLabels=[],this.chartPeriodeLabels=[],this.chartUserTicketsLabels=[],this.ChartUserResolvedLabels=[],this.ChartTicketProductsLabels=[],this.ChartTicketPlaceData=[],this.ChartTicketPlaceLabels=[],this.range=new c.gE({start:new c.MJ(new Date(J,j)),end:new c.MJ(new Date)}),this.formatDate=n=>n?L.c9.fromJSDate(new Date(n)).toISODate():null}get currentProducts(){return this._analyticsService.currentProducts()}set currentProducts(s){this._analyticsService.currentProducts.set(s)}ngOnInit(){this.fetchProducts(),this.analyticsForm=this.fb.group({products_name:[this.products[0],[c.k0.required]]}),this.range.get("end")?.valueChanges.pipe((0,w.p)(s=>!!s&&!!this.range.value.start),(0,E.F)()).subscribe(s=>{const r=new Date(s),a=new Date(this.range.value.start),e=this.analyticsForm.value.products_name;!isNaN(a.getTime())&&!isNaN(r.getTime())&&e&&this.fetchAnalytics(e,a.toLocaleDateString("en-CA"),r.toLocaleDateString("en-CA"))}),this.analyticsForm.get("products_name")?.valueChanges.subscribe(s=>{const a=this.range.value.end,e=new Date(this.range.value.start),n=new Date(a);this.currentProducts=s,!isNaN(e.getTime())&&!isNaN(n.getTime())&&s&&this.fetchAnalytics(s,e.toLocaleDateString("en-CA"),n.toLocaleDateString("en-CA"))})}fetchProducts(){var s=this;return(0,g.A)(function*(){try{const r=yield s._apiService.get("api/V1/list-products");s.products=r.data;const a=s.currentProducts;s.analyticsForm.patchValue({products_name:a&&s.products.includes(a)?a:s.products[0]})}catch(r){throw console.error("Error fetching data:",r),r}})()}fetchAnalytics(s,r,a){var e=this;return(0,g.A)(function*(){try{const n=yield e._apiService.post("api/V1/statistik",{products_name:s,start_date:r,end_date:a});e.data=n.data.data,e.chartUserRole=[],e.data.CharUserRole.forEach(o=>{e.chartUserRole.push({total_user_role:o.total_user_role,role:o.role})}),e.pieSeriesData=e.chartUserRole.map(o=>Number(o.total_user_role)),e.pieLabels=e.chartUserRole.map(o=>o.role);const h=(e.data.ChartCategory??[]).map(o=>o.total_tickets),b=(e.data.ChartCategory??[]).map(o=>o.category_name);h?.length>0?(e.chartCategoryData=[{name:"Total Tiket",data:h,type:"bar"}],e.chartCategoryLabels=b):(e.chartCategoryData=[],e.chartCategoryLabels=[]),e.ChartReqCategoryData=[{name:"Total Tiket",data:e.data.ChartReqCategory.map(o=>o.total_tickets),type:"bar"}],e.ChartReqCategoryLabels=e.data.ChartReqCategory.map(o=>o.name),e.chartPriorityData=[{name:"Total Tiket",data:e.data.ChartPriority.map(o=>o.value),type:"bar"}],e.chartPriorityLabels=e.data.ChartPriority.map(o=>o.label),e.chartPeriodeData=[{name:"Total Tiket",data:e.data.ChartTicketPeriode.map(o=>o.total_tickets),type:"area"}],e.chartPeriodeLabels=e.data.ChartTicketPeriode.map(o=>o.created_at),e.chartUserTicketsData=[{name:"Tickets Created",data:e.data.ChartUserTickets.map(o=>o.total_user_tickets),type:"bar"}],e.chartUserTicketsLabels=e.data.ChartUserTickets.map(o=>o.name),e.ChartUserResolvedData=[{data:e.data.ChartUserResolved.map(o=>o.resolved_count)}],e.ChartUserResolvedLabels=e.data.ChartUserResolved.map(o=>o.name),e.ChartTicketProductsData=[{data:e.data.ChartTicketProducts.map(o=>o.total_tickets)}],e.ChartTicketProductsLabels=e.data.ChartTicketProducts.map(o=>o.name);const v=(e.data.ChartPlaces??[]).map(o=>o.total_tickets),X=(e.data.ChartPlaces??[]).map(o=>o.places_name);v?.length>0?(e.ChartTicketPlaceData=[{name:"Total Tiket",data:v}],e.ChartTicketPlaceLabels=X):(e.ChartTicketPlaceData=[],e.ChartTicketPlaceLabels=[])}catch(n){throw e._toast.error("Failed Fetch Data","Error"),n}})()}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(c.ok),t.rXU(U.G),t.rXU($.tw),t.rXU(N.c))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-analytics"]],standalone:!0,features:[t.aNF],decls:31,vars:25,consts:[["picker",""],[1,"w-full","h-full","p-5","sm:p-10","bg-[#f9fafb]"],[1,"flex","flex-col","sm:flex-row","items-start","sm:items-center","justify-between"],[1,"mb-5","sm:mb-0"],[1,"text-4xl","font-bold"],[1,"flex","items-center","w-full","sm:w-1/3","gap-4",3,"formGroup"],["hideRequiredMarker","",1,"w-full"],[1,"text-sm","opacity-50","font-medium"],["formControlName","products_name","placeholder","Select Products"],["class","px-3 py-1 font-medium text-base rounded-full",3,"value",4,"ngFor","ngForOf"],[1,"w-full"],[1,"w-full",3,"rangePicker","formGroup","max"],["matStartDate","","formControlName","start","placeholder","Start date",1,"w-full"],["matEndDate","","formControlName","end","placeholder","End date",1,"w-full"],["matSuffix","",3,"for"],["touchUi",""],[1,"mt-5","sm:mt-10","h-fit","w-full","flex","flex-col","gap-4"],[1,"w-full","grid","grid-cols-1","sm:grid-cols-4","gap-2"],["class","col-span-2 sm:col-span-3 xl:col-span-2",3,"param","seriesData","labels","header",4,"ngIf"],[1,"col-span-2","h-full",3,"seriesData","labels","header"],[1,"col-span-2",3,"header","seriesData","labels","param"],[1,"col-span-2",3,"header","seriesData","labels"],[1,"col-span-2","sm:col-span-5","xl:col-span-2",3,"seriesData","labels","param","header"],[1,"px-3","py-1","font-medium","text-base","rounded-full",3,"value"],[1,"col-span-2","sm:col-span-3","xl:col-span-2",3,"param","seriesData","labels","header"]],template:function(r,a){if(1&r&&(t.j41(0,"main",1)(1,"div",2)(2,"div",3)(3,"h1",4),t.EFF(4,"Analytics"),t.k0s(),t.j41(5,"p"),t.EFF(6,"Data Statistic Report"),t.k0s()(),t.j41(7,"form",5)(8,"mat-form-field",6)(9,"mat-label",7),t.EFF(10,"Products"),t.k0s(),t.j41(11,"mat-select",8),t.DNE(12,Y,2,2,"mat-option",9),t.k0s()(),t.j41(13,"mat-form-field",10)(14,"mat-label",7),t.EFF(15,"Start Date - End Date"),t.k0s(),t.j41(16,"mat-date-range-input",11),t.nrm(17,"input",12)(18,"input",13),t.k0s(),t.nrm(19,"mat-datepicker-toggle",14)(20,"mat-date-range-picker",15,0),t.k0s()()(),t.j41(22,"div",16)(23,"div",17),t.DNE(24,M,1,4,"app-bar-chart",18)(25,I,1,4,"app-bar-chart",18),t.nrm(26,"app-area-chart",19)(27,"app-column-chart",20)(28,"app-bar-chart-side",21)(29,"app-bar-chart-side",21)(30,"app-column-chart",22),t.k0s()()()),2&r){let e,n,h;const b=t.sdS(21);t.R7$(7),t.Y8G("formGroup",a.analyticsForm),t.R7$(5),t.Y8G("ngForOf",a.products),t.R7$(4),t.Y8G("rangePicker",b)("formGroup",a.range)("max",a.today),t.R7$(3),t.Y8G("for",b),t.R7$(5),t.Y8G("ngIf",a.ChartTicketPlaceData.length>0&&a.ChartTicketPlaceData[0].data.length>0),t.R7$(),t.Y8G("ngIf",(null==a.chartCategoryData?null:a.chartCategoryData.length)>0),t.R7$(),t.Y8G("seriesData",a.chartPeriodeData)("labels",a.chartPeriodeLabels)("header","Tickets By Date ("+(null==(e=a.analyticsForm.get("products_name"))?null:e.value)+")"),t.R7$(),t.Y8G("header","Tickets Create By Users ("+(null==(n=a.analyticsForm.get("products_name"))?null:n.value)+")")("seriesData",a.chartUserTicketsData)("labels",a.chartUserTicketsLabels)("param","users"),t.R7$(),t.Y8G("header","Tickets Resolved By Users")("seriesData",a.ChartUserResolvedData)("labels",a.ChartUserResolvedLabels),t.R7$(),t.Y8G("header","Tickets By Products")("seriesData",a.ChartTicketProductsData)("labels",a.ChartTicketProductsLabels),t.R7$(),t.Y8G("seriesData",a.chartPriorityData)("labels",a.chartPriorityLabels)("param",null)("header","Tickets By Priority ("+(null==(h=a.analyticsForm.get("products_name"))?null:h.value)+")")}},dependencies:[P,m.RG,m.rl,m.nJ,m.yw,c.X1,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,k.Ve,k.VO,C.wT,c.YN,C.Sy,u.MD,u.Sq,u.bT,p.X6,p.bU,p.el,p.xR,p.IG,p.SG,O.fS,R,S,B],styles:[".mat-mdc-form-field-subscript-wrapper{display:none!important}"]})}}return i})()}]}}]);