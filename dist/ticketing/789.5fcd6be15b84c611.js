"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[789],{10789:(_,h,a)=>{a.r(h),a.d(h,{default:()=>x});var f=a(10467),d=a(60177),r=a(89417),F=a(88834),k=a(86600),c=a(25084),p=a(53719),b=a(99213),g=a(59042),v=a(82798),u=a(76233),T=a(5271),y=a(44549),C=a(89967),t=a(54438),j=a(3366),I=a(74710),E=a(75351);const G=(o,n,e,i)=>({"text-green-600":o,"text-blue-600":n,"text-yellow-600":e,"text-red-600":i});function R(o,n){1&o&&t.EFF(0,"Ticket Information")}function $(o,n){if(1&o&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&o){const e=n.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function S(o,n){if(1&o&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&o){const e=n.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.name," ")}}function N(o,n){if(1&o&&(t.j41(0,"mat-form-field",19)(1,"mat-label"),t.EFF(2,"Place (Optional)"),t.k0s(),t.j41(3,"mat-select",36),t.DNE(4,S,2,2,"mat-option",15),t.k0s()()),2&o){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.place)}}function w(o,n){if(1&o&&(t.j41(0,"mat-option",35),t.EFF(1),t.k0s()),2&o){const e=n.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.category_name," ")}}function Y(o,n){if(1&o&&(t.j41(0,"mat-option",35),t.nrm(1,"mat-icon",37),t.EFF(2),t.k0s()),2&o){const e=n.$implicit;t.Y8G("value",e),t.R7$(),t.Y8G("ngClass",t.ziG(3,G,"low"===e.toLowerCase(),"medium"===e.toLowerCase(),"high"===e.toLowerCase(),"critical"===e.toLowerCase())),t.R7$(),t.SpI(" ",e," ")}}function D(o,n){1&o&&t.EFF(0,"Response Information")}const x=[{path:"",component:(()=>{class o{constructor(e,i,s,l){this._apiService=e,this.fb=i,this.router=s,this._matDialog=l,this.products=[],this.category=[],this.priority=["Low","Medium","High"],this.place=[],this.disableInput=!0,this.isLoading=!1}ngOnInit(){var e=this;this.fetchDataProducts(),this.firstTicketForm=this.fb.group({products_name:["",r.k0.required],subject:[{value:"",disabled:this.disableInput},r.k0.required],places_id:[{value:null,disabled:this.disableInput}],category_id:[{value:0,disabled:this.disableInput},r.k0.required],detail_kendala:[{value:"",disabled:this.disableInput},r.k0.required],priority:[{value:"",disabled:this.disableInput},r.k0.required],hari_masuk:[{value:null,disabled:this.disableInput},r.k0.required],waktu_masuk:[{value:"",disabled:this.disableInput},r.k0.required],hari_respon:[{value:null,disabled:this.disableInput},r.k0.required],waktu_respon:[{value:"",disabled:this.disableInput},r.k0.required]}),this.secondTicketForm=this.fb.group({PIC:["",[]],no_whatsapp:["",[r.k0.required]],respon_diberikan:["",r.k0.required]}),this.firstTicketForm.get("products_name")?.valueChanges.subscribe(function(){var i=(0,f.A)(function*(s){if(s){const{data:l}=yield e._apiService.post("api/V1/get-data-form",{name:s});e.category=l.data.category,e.place=l.data.places,e.enableFields()}else e.disableFields()});return function(s){return i.apply(this,arguments)}}())}enableFields(){Object.keys(this.firstTicketForm.controls).forEach(e=>{"products_name"!==e&&this.firstTicketForm.get(e)?.enable()})}disableFields(){Object.keys(this.firstTicketForm.controls).forEach(e=>{"products_name"!==e&&this.firstTicketForm.get(e)?.disable()})}fetchDataProducts(){var e=this;return(0,f.A)(function*(){try{const i=yield e._apiService.get("api/V1/list-products");e.products=i.data}catch(i){throw i}})()}addProducts(){this._matDialog.open(C.H,{width:window.innerWidth<600?"90%":"50%",maxWidth:"100vw"})}onSubmit(){var e=this;return(0,f.A)(function*(){try{e.isLoading=!0;const i=m=>m?y.c9.fromJSDate(new Date(m)).toISODate():null,s={...e.firstTicketForm.value,...e.secondTicketForm.value,hari_masuk:i(e.firstTicketForm.value.hari_masuk),hari_respon:i(e.firstTicketForm.value.hari_respon),entry_day:i(e.firstTicketForm.value.entry_day),response_day:i(e.firstTicketForm.value.response_day),PIC:e.secondTicketForm.value.PIC,no_whatsapp:e.secondTicketForm.value.no_whatsapp};201===(yield e._apiService.post("api/V1/tickets",s)).status&&(e.isLoading=!1,e.router.navigateByUrl("/dashboards/tickets"),e.firstTicketForm.disable(),e.firstTicketForm.reset(),e.secondTicketForm.disable(),e.secondTicketForm.reset())}catch{e.isLoading=!1}})()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(j.G),t.rXU(r.ok),t.rXU(I.Ix),t.rXU(E.bZ))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-form-add-tickets"]],standalone:!0,features:[t.aNF],decls:79,vars:17,consts:[["stepper","matHorizontalStepper"],["picker",""],["pickers",""],[1,"flex","justify-center","bg-[url('/assets/images/cards/moon.jpg')]","bg-center","bg-cover","w-full","py-0","sm:py-20"],[1,"bg-white","shadow-xl","w-full","mx-5","md:mx-40","h-fit","p-5","sm:rounded"],[1,"self-start","text-lg","font-semibold","uppercase"],[1,"text-sm","opacity-60","font-medium"],["message","Sumbitting Form...","spinner","circular",3,"isOpen"],[3,"linear"],[3,"stepControl"],[1,"mt-8","w-full",3,"formGroup"],["matStepLabel",""],["action","",1,"mt-2.5","flex","flex-col"],["hideRequiredMarker","",1,"w-full"],["formControlName","products_name","placeholder","Select Products"],["class","px-3 py-1 m-2 font-medium text-base rounded-full",3,"value",4,"ngFor","ngForOf"],["floatLabel","always",1,"w-full"],["formControlName","subject","matInput","",3,"placeholder"],["class","w-full",4,"ngIf"],[1,"w-full"],["formControlName","category_id"],["floatLabel","always",1,"w-full","mb-2"],["formControlName","detail_kendala","matInput","","rows","4","cols","50","placeholder","Problem Detail"],["formControlName","priority","placeholder","Select Priority"],[1,"example-full-width"],["formControlName","hari_masuk","matInput","","placeholder","Choose a date",3,"matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["formControlName","waktu_masuk","matInput","","type","time"],["formControlName","hari_respon","matInput","","placeholder","Choose a date",3,"matDatepicker"],["formControlName","waktu_respon","matInput","","type","time"],["mat-raised-button","",1,"bg-blue-500","w-full","rounded-full","p-3","text-white","font-semibold",3,"click"],["formControlName","PIC","matInput","",3,"placeholder"],["formControlName","no_whatsapp","matInput","",3,"placeholder"],["formControlName","respon_diberikan","matInput","","rows","4","cols","50","placeholder","Response Admin"],[1,"px-3","py-1","m-2","font-medium","text-base","rounded-full",3,"value"],["formControlName","places_id"],["svgIcon","mat_outline:bookmark",1,"-rotate-90",3,"ngClass"]],template:function(i,s){if(1&i){const l=t.RV6();t.j41(0,"main",3)(1,"div",4)(2,"h1",5),t.EFF(3,"Form Add Ticketing"),t.k0s(),t.j41(4,"h3",6),t.EFF(5,"Add Tickets"),t.k0s(),t.nrm(6,"ion-loading",7),t.j41(7,"mat-horizontal-stepper",8,0)(9,"mat-step",9)(10,"form",10),t.DNE(11,R,1,0,"ng-template",11),t.j41(12,"div",12)(13,"mat-form-field",13)(14,"mat-label"),t.EFF(15,"Products"),t.k0s(),t.j41(16,"mat-select",14),t.DNE(17,$,2,2,"mat-option",15),t.k0s()(),t.j41(18,"mat-form-field",16)(19,"mat-label"),t.EFF(20,"Subject Judul"),t.k0s(),t.nrm(21,"input",17),t.k0s(),t.DNE(22,N,5,1,"mat-form-field",18),t.j41(23,"mat-form-field",19)(24,"mat-label"),t.EFF(25,"Category"),t.k0s(),t.j41(26,"mat-select",20),t.DNE(27,w,2,2,"mat-option",15),t.k0s()(),t.j41(28,"mat-form-field",21)(29,"mat-label"),t.EFF(30,"Problem Detail"),t.k0s(),t.nrm(31,"textarea",22),t.k0s(),t.j41(32,"mat-form-field",13)(33,"mat-label"),t.EFF(34,"Priority"),t.k0s(),t.j41(35,"mat-select",23),t.DNE(36,Y,3,8,"mat-option",15),t.k0s()(),t.j41(37,"mat-form-field",24)(38,"mat-label"),t.EFF(39,"Ticket Entry day"),t.k0s(),t.nrm(40,"input",25)(41,"mat-datepicker-toggle",26)(42,"mat-datepicker",27,1),t.k0s(),t.j41(44,"mat-form-field",24)(45,"mat-label"),t.EFF(46,"Ticket Entry Time"),t.k0s(),t.nrm(47,"input",28),t.k0s(),t.j41(48,"mat-form-field",24)(49,"mat-label"),t.EFF(50,"Respon day"),t.k0s(),t.nrm(51,"input",29)(52,"mat-datepicker-toggle",26)(53,"mat-datepicker",27,2),t.k0s(),t.j41(55,"mat-form-field",24)(56,"mat-label"),t.EFF(57,"Respon Time"),t.k0s(),t.nrm(58,"input",30),t.k0s(),t.j41(59,"button",31),t.bIt("click",function(){t.eBV(l);const A=t.sdS(8);return t.Njj(A.next())}),t.EFF(60," Next "),t.k0s()()()(),t.j41(61,"mat-step",9)(62,"form",10),t.DNE(63,D,1,0,"ng-template",11),t.j41(64,"div",12)(65,"mat-form-field",16)(66,"mat-label"),t.EFF(67,"PIC"),t.k0s(),t.nrm(68,"input",32),t.k0s(),t.j41(69,"mat-form-field",16)(70,"mat-label"),t.EFF(71,"No Whatsapp Client"),t.k0s(),t.nrm(72,"input",33),t.k0s(),t.j41(73,"mat-form-field",21)(74,"mat-label"),t.EFF(75,"Response Admin"),t.k0s(),t.nrm(76,"textarea",34),t.k0s(),t.j41(77,"button",31),t.bIt("click",function(){return t.eBV(l),t.Njj(s.onSubmit())}),t.EFF(78," Submit "),t.k0s()()()()()()()}if(2&i){const l=t.sdS(43),m=t.sdS(54);t.R7$(6),t.Y8G("isOpen",s.isLoading),t.R7$(),t.Y8G("linear",!0),t.R7$(2),t.Y8G("stepControl",s.firstTicketForm),t.R7$(),t.Y8G("formGroup",s.firstTicketForm),t.R7$(7),t.Y8G("ngForOf",s.products),t.R7$(4),t.Y8G("placeholder","Subject Judul"),t.R7$(),t.Y8G("ngIf",0!==(null==s.place?null:s.place.length)),t.R7$(5),t.Y8G("ngForOf",s.category),t.R7$(9),t.Y8G("ngForOf",s.priority),t.R7$(4),t.Y8G("matDatepicker",l),t.R7$(),t.Y8G("for",l),t.R7$(10),t.Y8G("matDatepicker",m),t.R7$(),t.Y8G("for",m),t.R7$(9),t.Y8G("stepControl",null),t.R7$(),t.Y8G("formGroup",s.secondTicketForm),t.R7$(6),t.Y8G("placeholder","PIC"),t.R7$(4),t.Y8G("placeholder","No Whatsapp")}},dependencies:[p.RG,p.rl,p.nJ,p.yw,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,v.Ve,v.VO,k.wT,k.Sy,F.Hl,F.$z,g.fS,g.fg,c.X6,c.Vh,c.bZ,c.bU,u.aP,u.V5,u.Ti,u.M6,d.MD,d.YU,d.Sq,d.bT,b.m_,b.An,k.WX,T.rQ],encapsulation:2})}}return o})()}]}}]);